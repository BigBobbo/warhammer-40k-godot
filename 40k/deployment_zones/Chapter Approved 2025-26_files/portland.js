/*! For license information please see EzHeaderBidding.js.LICENSE.txt */
(()=>{var e={633:(e,t,r)=>{var i=r(738).default;function n(){"use strict";e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},d="function"==typeof Symbol?Symbol:{},u=d.iterator||"@@iterator",l=d.asyncIterator||"@@asyncIterator",c=d.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,r){return e[t]=r}}function f(e,t,r,i){var n=t&&t.prototype instanceof _?t:_,o=Object.create(n.prototype),a=new j(i||[]);return s(o,"_invoke",{value:F(e,r,a)}),o}function v(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var h="suspendedStart",m="suspendedYield",y="executing",b="completed",g={};function _(){}function w(){}function B(){}var k={};p(k,u,(function(){return this}));var P=Object.getPrototypeOf,S=P&&P(P(T([])));S&&S!==o&&a.call(S,u)&&(k=S);var O=B.prototype=_.prototype=Object.create(k);function C(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(n,o,s,d){var u=v(e[n],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==i(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,d)}),(function(e){r("throw",e,s,d)})):t.resolve(c).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,d)}))}d(u.arg)}var n;s(this,"_invoke",{value:function(e,i){function o(){return new t((function(t,n){r(e,i,t,n)}))}return n=n?n.then(o,o):o()}})}function F(e,r,i){var n=h;return function(o,a){if(n===y)throw Error("Generator is already running");if(n===b){if("throw"===o)throw a;return{value:t,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var d=z(s,i);if(d){if(d===g)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=b,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=y;var u=v(e,r,i);if("normal"===u.type){if(n=i.done?b:m,u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=b,i.method="throw",i.arg=u.arg)}}}function z(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,z(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=v(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(a.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return w.prototype=B,s(O,"constructor",{value:B,configurable:!0}),s(B,"constructor",{value:w,configurable:!0}),w.displayName=p(B,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,B):(e.__proto__=B,p(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},r.awrap=function(e){return{__await:e}},C(x.prototype),p(x.prototype,l,(function(){return this})),r.AsyncIterator=x,r.async=function(e,t,i,n,o){void 0===o&&(o=Promise);var a=new x(f(e,t,i,n),o);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(O),p(O,c,"Generator"),p(O,u,(function(){return this})),p(O,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},r.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(i,n){return s.type="throw",s.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var d=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(d&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;I(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:T(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),g}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var i=r(633)();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){var r=function(e){return function(){reportEzError(e,"header-bidding."+t)}};"function"==typeof reportEzError?r(e):window.addEventListener("reportEzErrorDefined",r(e),{once:!0}),console.error(e)}}}function s(e,t){var r;void 0!==window.__ez&&null!==(r=window.__ez)&&void 0!==r&&null!==(r=r.queue)&&void 0!==r&&r.addFileOnce?window.__ez.queue.addFileOnce(e,t+"?cb=95&gcb=0",!0,[],!0,!1,!1,!0):setTimeout((function(){s(e,t)}),200)}function d(){var e;"undefined"!=typeof __ez&&__ez.fads&&__ez.fads.log&&(e=__ez.fads).log.apply(e,arguments)}var u={AD:"AND",AE:"ARE",AF:"AFG",AG:"ATG",AI:"AIA",AL:"ALB",AM:"ARM",AO:"AGO",AQ:"ATA",AR:"ARG",AS:"ASM",AT:"AUT",AU:"AUS",AW:"ABW",AX:"ALA",AZ:"AZE",BA:"BIH",BB:"BRB",BD:"BGD",BE:"BEL",BF:"BFA",BG:"BGR",BH:"BHR",BI:"BDI",BJ:"BEN",BL:"BLM",BM:"BMU",BN:"BRN",BO:"BOL",BQ:"BES",BR:"BRA",BS:"BHS",BT:"BTN",BV:"BVT",BW:"BWA",BY:"BLR",BZ:"BLZ",CA:"CAN",CC:"CCK",CD:"COD",CF:"CAF",CG:"COG",CH:"CHE",CI:"CIV",CK:"COK",CL:"CHL",CM:"CMR",CN:"CHN",CO:"COL",CR:"CRI",CU:"CUB",CV:"CPV",CW:"CUW",CX:"CXR",CY:"CYP",CZ:"CZE",DE:"DEU",DJ:"DJI",DK:"DNK",DM:"DMA",DO:"DOM",DZ:"DZA",EC:"ECU",EE:"EST",EG:"EGY",EH:"ESH",ER:"ERI",ES:"ESP",ET:"ETH",FI:"FIN",FJ:"FJI",FK:"FLK",FM:"FSM",FO:"FRO",FR:"FRA",GA:"GAB",GB:"GBR",GD:"GRD",GE:"GEO",GF:"GUF",GG:"GGY",GH:"GHA",GI:"GIB",GL:"GRL",GM:"GMB",GN:"GIN",GP:"GLP",GQ:"GNQ",GR:"GRC",GS:"SGS",GT:"GTM",GU:"GUM",GW:"GNB",GY:"GUY",HK:"HKG",HM:"HMD",HN:"HND",HR:"HRV",HT:"HTI",HU:"HUN",ID:"IDN",IE:"IRL",IL:"ISR",IM:"IMN",IN:"IND",IO:"IOT",IQ:"IRQ",IR:"IRN",IS:"ISL",IT:"ITA",JE:"JEY",JM:"JAM",JO:"JOR",JP:"JPN",KE:"KEN",KG:"KGZ",KH:"KHM",KI:"KIR",KM:"COM",KN:"KNA",KP:"PRK",KR:"KOR",KW:"KWT",KY:"CYM",KZ:"KAZ",LA:"LAO",LB:"LBN",LC:"LCA",LI:"LIE",LK:"LKA",LR:"LBR",LS:"LSO",LT:"LTU",LU:"LUX",LV:"LVA",LY:"LBY",MA:"MAR",MC:"MCO",MD:"MDA",ME:"MNE",MF:"MAF",MG:"MDG",MH:"MHL",MK:"MKD",ML:"MLI",MM:"MMR",MN:"MNG",MO:"MAC",MP:"MNP",MQ:"MTQ",MR:"MRT",MS:"MSR",MT:"MLT",MU:"MUS",MV:"MDV",MW:"MWI",MX:"MEX",MY:"MYS",MZ:"MOZ",NA:"NAM",NC:"NCL",NE:"NER",NF:"NFK",NG:"NGA",NI:"NIC",NL:"NLD",NO:"NOR",NP:"NPL",NR:"NRU",NU:"NIU",NZ:"NZL",OM:"OMN",PA:"PAN",PE:"PER",PF:"PYF",PG:"PNG",PH:"PHL",PK:"PAK",PL:"POL",PM:"SPM",PN:"PCN",PR:"PRI",PS:"PSE",PT:"PRT",PW:"PLW",PY:"PRY",QA:"QAT",RE:"REU",RO:"ROU",RS:"SRB",RU:"RUS",RW:"RWA",SA:"SAU",SB:"SLB",SC:"SYC",SD:"SDN",SE:"SWE",SG:"SGP",SH:"SHN",SI:"SVN",SJ:"SJM",SK:"SVK",SL:"SLE",SM:"SMR",SN:"SEN",SO:"SOM",SR:"SUR",SS:"SSD",ST:"STP",SV:"SLV",SX:"SXM",SY:"SYR",SZ:"SWZ",TC:"TCA",TD:"TCD",TF:"ATF",TG:"TGO",TH:"THA",TJ:"TJK",TK:"TKL",TL:"TLS",TM:"TKM",TN:"TUN",TO:"TON",TR:"TUR",TT:"TTO",TV:"TUV",TW:"TWN",TZ:"TZA",UA:"UKR",UG:"UGA",UM:"UMI",US:"USA",UY:"URY",UZ:"UZB",VA:"VAT",VC:"VCT",VE:"VEN",VG:"VGB",VI:"VIR",VN:"VNM",VU:"VUT",WF:"WLF",WS:"WSM",YE:"YEM",YT:"MYT",ZA:"ZAF",ZM:"ZMB",ZW:"ZWE"};function l(e){if(e){var t=e.toUpperCase();return u[t]}}function c(){var e="https://prebid.adnxs.com/pbc/v1/cache";if("undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("country")){var t=_ezaq.country;["US","CA","MX","GB","DE","FR","IT","ES","IE","AT","BE","BG","HR","CH","CY","CZ","DK","EE","FI","GF","GP","GR","HU","IC","IS","JE","LI","LV","LT","LU","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SK","SI","SE","YT","GI","MC","SM","VA"].includes(t)&&(e="https://pbcache.ezoic.com/cache")}return e}const p=function(){var e=[];function t(){var n,o,a,s,u;o=!1,"true"===(null===(n=window.__ez)||void 0===n||null===(n=n.tf)||void 0===n?void 0:n.disIdm)&&(o=!0),o||(window.ezoicIdentity.isIdentityReady()?((u=window.ezoicIdentity.getProviderId("uid2"))&&(r({name:"uid2",params:{uid2Token:u}}),i("uidapi.com",u)),(s=window.ezoicIdentity.getProviderId("euid"))&&r({name:"euid",params:{euidToken:s}}),(a=window.ezoicIdentity.getProviderId("id5"))&&(r({name:"id5Id",params:{partner:457,externalModuleUrl:"https://cdn.id5-sync.com/api/1.0/id5PrebidModule.js"},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}),i("id5-sync.com",a)),epbjs.que.push((function(){0!==e.length&&epbjs.refreshUserIds({submoduleNames:e},(function(){d("IDs setIDs: Updated modules: "+e.join(", ")),e=[],epbjs.registerSignalSources(),epbjs.que.push((function(){var e=epbjs.getUserIdsAsEids(),t=epbjs.getConfig("ortb2")||{};t.user=t.user||{},t.user.eids=e,epbjs.setConfig({ortb2:t})}))}))}))):setTimeout((function(){t()}),50))}function r(t){epbjs.que.push((function(){for(var r=epbjs.getConfig().userSync.userIds||[],i=!1,n=0;n<r.length;n++)if(r[n].name===t.name){if(JSON.stringify(r[n])===JSON.stringify(t))return;i=!0,r[n]=t;break}-1===e.indexOf(t.name)&&e.push(t.name),i||r.push(t),epbjs.setConfig({userSync:{userIds:r}})}))}function i(e,t){var r;window.googletag=window.googletag||{secureSignalProviders:[],cmd:[]},null===(r=window.googletag.secureSignalProviders)||void 0===r||r.push({id:e,collectorFunction:function(){return Promise.resolve(t)}})}window.ezoicIdentity.queue.push(a((function(){window.ezoicIdentity.onIdentity((function(e){t()}))}),"init"))},f=function(){a((function(){"undefined"!=typeof window&&(s("identity","https://go.ezodn.com/detroitchicago/indy.js"),window.ezoicIdentity=window.ezoicIdentity||{},window.ezoicIdentity.queue=window.ezoicIdentity.queue||[],p())}),"modselect")()};var v={"epsilon.com":{mm:3,matcher:"ezoic.com",inserter:"ezoic.com"},"liveramp.com":{mm:3,matcher:"ezoic.com",inserter:"ezoic.com"},"uidapi.com":{mm:3,matcher:"ezoic.com",inserter:"ezoic.com"},"yahoo.com":{mm:3,matcher:"ezoic.com",inserter:"ezoic.com"}};function h(e){var t;if(null!==(t=window.ezoicIdentity)&&void 0!==t&&t.getUID){if(!window.ezoicIdentity.getUID()&&e&&Date.now()-e<=2e3)return void setTimeout((function(){h(e)}),50)}else if(e&&Date.now()-e<=2e3)return void setTimeout((function(){h(e)}),50);var r=epbjs.getUserIdsAsEids(),i=epbjs.getConfig("ortb2")||{};i.user=i.user||{},i.user.eids=r,i=function(e){e.user=e.user||{},e.user.eids=e.user.eids||[],e.user.eids=e.user.eids.map((function(e){var t,r,i,n,o,a=v[e.source];if(!a)return e;var s=null!==(t=e.inserter)&&void 0!==t?t:a.inserter;null!=s&&(e.inserter=s);var d=null!==(r=null!==(i=e.matcher)&&void 0!==i?i:a.matcher)&&void 0!==r?r:DEFAULT_EID_ATTRIBUTES.matcher;null!=d&&(e.matcher=d);var u=null!==(n=null!==(o=e.mm)&&void 0!==o?o:a.mm)&&void 0!==n?n:DEFAULT_EID_ATTRIBUTES.mm;return null!=u&&0!==u&&(e.mm=u),e}));var t=new Set;return e.user.eids=e.user.eids.filter((function(e){var r=e.source;return!t.has(r)&&(t.add(r),!0)})),e}(i),epbjs.setConfig({ortb2:i}),epbjs.refreshUserIds()}function m(e,t,r,i,n,o,a){try{var s=e[o](a),d=s.value}catch(e){return void r(e)}s.done?t(d):Promise.resolve(d).then(i,n)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){m(o,i,n,a,s,"next",e)}function s(e){m(o,i,n,a,s,"throw",e)}a(void 0)}))}}var b=r(756),g=r.n(b);function _(e){if(!e||"string"!=typeof e)return null;try{var t=new URL(e,window.location&&window.location.href?window.location.href:void 0);return t.host?t.host.toLowerCase():null}catch(e){return null}}function w(t){return t&&"object"===e(t)?t.adUrl?t.adUrl:t.adserverTargeting&&t.adserverTargeting.hb_adurl?t.adserverTargeting.hb_adurl:null:null}function B(e){return e.replace(/^(?:af|ap|ca|cn|eu|il|me|mx|sa|us)-(?:gov-)?[a-z]+-\d+-/,"")}function k(e,t){if(!e||"banner"!==e.mediaType||"s2s"!==e.source||e.ad)return!1;var r=_(w(e));if(!r)return!1;if("function"!=typeof t)return!1;var i=null;try{i=t()}catch(e){return!1}var n=_(i);return!!n&&function(e,t){return!(!e||!t)&&B(e)===B(t)}(r,n)}function P(){return P=y(g().mark((function e(t){var r,i,n,o,a,s,d,u,l,c,p=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=p.length>1&&void 0!==p[1]?p[1]:{}).getCacheUrl,k(t,i)){e.next=4;break}return e.abrupt("return",{hydrated:!1,reason:"not_eligible"});case 4:if(n=w(t)){e.next=7;break}return e.abrupt("return",{hydrated:!1,reason:"missing_ad_url"});case 7:if(o="number"==typeof r.timeoutMs&&r.timeoutMs>0?r.timeoutMs:700,"function"==typeof(a=r.fetchImpl||window.fetch)){e.next=11;break}return e.abrupt("return",{hydrated:!1,reason:"fetch_unavailable",adUrl:n});case 11:return s="undefined"!=typeof AbortController?new AbortController:null,d=setTimeout((function(){s&&s.abort()}),o),e.prev=13,e.next=16,a(n,s?{signal:s.signal}:void 0);case 16:if(u=e.sent,l=u&&"number"==typeof u.status?u.status:0,u&&200===l){e.next=20;break}return e.abrupt("return",{hydrated:!1,reason:"http_error",adUrl:n,statusCode:l});case 20:return e.next=22,u.text();case 22:if(c=e.sent){e.next=25;break}return e.abrupt("return",{hydrated:!1,reason:"empty_body",adUrl:n});case 25:return t.adUrl=n,t.ad=c,e.abrupt("return",{hydrated:!0,reason:"ok",adUrl:n});case 30:return e.prev=30,e.t0=e.catch(13),e.abrupt("return",{hydrated:!1,reason:"fetch_error",adUrl:n,error:e.t0&&e.t0.message?e.t0.message:String(e.t0)});case 33:return e.prev=33,clearTimeout(d),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[13,30,33,36]])}))),P.apply(this,arguments)}function S(t,r){if(r&&("object"==e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}var F=function(){return o((function e(r){t(this,e),this.epbjs=r}),[{key:"createConfig",value:function(){return{}}},{key:"applyConfig",value:function(){}}])}();function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z=function(){return!!e})()}var A=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,z()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"createConfig",value:function(){var e={analyticsProviders:[]};return 1==window.__enableAnalytics&&e.analyticsProviders.push({provider:"ga",options:{trackerName:"gatestprebid"}}),e.analyticsProviders.push({provider:"atsAnalytics",options:{pid:"14067"}}),!0===window.__s2smnettest&&e.analyticsProviders.push({provider:"medianetAnalytics",options:{cid:"8CUIXQW8H"}}),e}},{key:"applyConfig",value:function(){var e=this,t=this.createConfig();return t.analyticsProviders.forEach((function(t){e.epbjs.enableAnalytics([t])})),t}}])}(F);function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}var j=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,I()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"createConfig",value:function(){return{legacyRender:!0}}},{key:"applyConfig",value:function(e){var t=this.createConfig();return e.setConfig({auctionOptions:t}),t}}])}(F);function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}var R=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,T()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"createConfig",value:function(){return[{original:"aol",alias:"onedisplay"},{original:"aol",alias:"onemobile"}]}},{key:"applyConfig",value:function(e){var t=this.createConfig();return t.forEach((function(t){e.aliasBidder(t.original,t.alias)})),t}}])}(F);function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}var U=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,E()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"createConfig",value:function(){return{}}},{key:"applyConfig",value:function(e){try{e.bidderSettings=e.bidderSettings||{},e.bidderSettings.standard={adserverTargeting:[{key:"epb",val:function(e){return e.bidderCode}},{key:"epa",val:function(e){return e.adId}},{key:"epp",val:function(e){return e.pbCg}},{key:"epf",val:function(e){return e.mediaType}},{key:"eps",val:function(t){var r=t.bidder;if("ehb"==t.bidder)return 0;if(void 0!==e.SS[r.toLowerCase()])return e.SS[r.toLowerCase()];if(void 0!==e.SS[r.toLowerCase()])return e.SS[r.toLowerCase()];if("video"!==t.mediaType)return console.error("epbjs: NO MATCH",t.bidder,e.SS),0;var i={};return"undefined"!=typeof __ezInstream&&__ezInstream.hasOwnProperty("prebidBidders")&&__ezInstream.prebidBidders.map((function(e){void 0!==e.ssid&&(i[e.bidder]=parseInt(e.ssid))})),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("prebidBidders")&&__ezOutstream.prebidBidders.map((function(e){void 0!==e.ssid&&(i[e.bidder]=parseInt(e.ssid))})),i.hasOwnProperty(t.bidder)?i[t.bidder]:void 0}},{key:"epr",val:function(e){return e.source}}],storageAllowed:!0},d("Applied bidder settings configuration",e.bidderSettings.standard)}catch(e){d("Error applying bidder settings configuration",e)}}}])}(F);function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}var D=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,M()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"createConfig",value:function(){var e={cache:{useLocal:!0},rubicon:{disableFloors:!0}};return this._setupCacheBids(e),e}},{key:"_setupCacheBids",value:function(e){e.useBidCache=!1,void 0===window.ezpbCache&&(e.useBidCache=!0)}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();e.setConfig(t),d("Applied cache configuration",t)}catch(e){d("Error applying cache configuration",e)}}}])}(F);function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}var V=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,L()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"createConfig",value:function(){var e={usp:{cmpApi:"iab",timeout:0}};return"function"==typeof window.__gpp&&(e.gpp={cmpApi:"iab",timeout:0}),"function"==typeof window.__tcfapi&&(e.strictStorageEnforcement=!0,e.gdpr={cmpApi:"iab",timeout:12e4,defaultGdprScope:!0}),e}},{key:"_isEuropeanS2SCountry",value:function(){if("undefined"==typeof _ezaq||!_ezaq.hasOwnProperty("country"))return!1;var e=_ezaq.country;return["GB","DE","FR","IT","ES","IE","AT","BE","BG","HR","CH","CY","CZ","DK","EE","FI","GF","GP","GR","HU","IC","IS","JE","LI","LV","LT","LU","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SK","SI","SE","YT","GI","MC","SM","VA"].includes(e)}},{key:"_createGvlMapping",value:function(){if(!this._isEuropeanS2SCountry())return{};var e={"33across":58,adyoulike:259,amx:737,appnexus:32,axonix:678,blis:94,cadent_aperture_mx:183,conversant:24,criteo:91,gumgum:61,inmobi:333,insticator:910,ix:10,medianet:142,minutemedia:918,msft:32,nativo:263,ogury:31,onetag:241,openx:69,pubmatic:76,rubicon:52,sharethrough:80,smartadserver:45,sonobi:104,sovrn:13,triplelift:28,trustedstack:1288,unruly:36,vidazoo:744,yieldmo:173,zeta_global_ssp:833},t={};return Object.keys(e).forEach((function(r){var i=e[r];t["".concat(r,"_s2s")]=i,t["".concat(r,"_o_s2s")]=i,t["".concat(r,"_i_s2s")]=i})),t}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();if(this._isEuropeanS2SCountry()){var r=this._createGvlMapping();e.setConfig({consentManagement:t,gvlMapping:r}),d("[EPBJS] Applied consent configuration:",t),d("[EPBJS] Applied GVL mapping for s2s bidders:",Object.keys(r).length,"bidders",r)}else e.setConfig({consentManagement:t}),d("[EPBJS] Applied consent configuration:",t),d("[EPBJS] Skipped GVL mapping - not European s2s country")}catch(e){d("[EPBJS] Error applying consent configuration:",e)}}}])}(F);function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}var N=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,q()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"createConfig",value:function(){var e,t="cookie",r="cookie&html5";"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("prebid_reduce_cookies")&&!0===_ezaq.prebid_reduce_cookies&&(t="html5",r="html5");var i=[{name:"criteo"},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=muno13d&fmt=json"},storage:{type:t,name:"pbjs-unifiedid",expires:60}},{name:"amxId",storage:{name:"amxId",type:"html5",expires:1}},{name:"sharedId",params:{},storage:{type:t,name:"_sharedid",expires:365}},{name:"lotamePanoramaId"},{name:"hadronId",params:{partnerId:524}},{name:"33acrossId",params:{pid:"0010b00002MpnPqAAJ"},storage:{name:"33acrossId",type:r,expires:30,refreshInSeconds:28800}},{name:"pairId",params:{liveramp:{storageKey:"_lr_pairId"}}},{name:"pubmaticId",params:{publisherId:"156983"},storage:{name:"pubmaticId",type:r,expires:30,refreshInSeconds:86400}},{name:"FTrack",params:{url:"https://d9.flashtalking.com/d9core",ids:{"device id":!0,"single device id":!0,"household id":!0}},storage:{type:"html5",name:"ftrackId",expires:60,refreshInSeconds:28800}},{name:"teadsId",params:{pubId:13877}}];i.push(this._createId5Config()),i.push(this._createLiveRampConfig());var n=this._createPubProvidedIdConfig();if(n&&i.push(n),i.push(this._createYahooConfig()),null!==(e=window.ezoicIdentity)&&void 0!==e&&e.getUID){var o,a=window.ezoicIdentity.getUID();a&&null!=a&&null!==(o=a.email)&&void 0!==o&&o.sha256&&i.push(this._createEpsilonPubLinkConfig(a.email.sha256))}return i}},{key:"_createId5Config",value:function(){var e={name:"id5Id",params:{partner:457,externalModuleUrl:"https://cdn.id5-sync.com/api/1.0/id5PrebidModule.js"},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}};return"undefined"!=typeof ez__id5pd&&(e.params.pd=ez__id5pd),e}},{key:"_createLiveRampConfig",value:function(){var e="cookie";return"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("prebid_reduce_cookies")&&!0===_ezaq.prebid_reduce_cookies&&(e="html5"),{name:"identityLink",params:{pid:"14067",notUse3P:!1},storage:{type:e,name:"idl_env",expires:15,refreshInSeconds:1800}}}},{key:"_createEpsilonPubLinkConfig",value:function(e){var t="cookie";return"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("prebid_reduce_cookies")&&!0===_ezaq.prebid_reduce_cookies&&(t="html5"),{name:"publinkId",params:{api_key:"99255c96-b26d-4ccf-a54f-8cd79e6a89cd",e},storage:{name:"_publink",type:t,expires:30}}}},{key:"_createYahooConfig",value:function(){var e,t={name:"connectId",params:{pixelId:58713}};if(null!==(e=window.ezoicIdentity)&&void 0!==e&&e.getUID){var r,i=window.ezoicIdentity.getUID();i&&null!=i&&null!==(r=i.email)&&void 0!==r&&r.sha256&&(t.params.he=i.email.sha256)}return t}},{key:"_createPubProvidedIdConfig",value:function(){if("undefined"!=typeof ez__sspDomain&&"undefined"!=typeof ez__uIdHash)return{name:"pubProvidedId",params:{eids:[{source:ez__sspDomain,uids:[{id:ez__uIdHash,atype:3,ext:{stype:"ppuid"}}]}]}}}},{key:"applyConfig",value:function(){return this.createConfig()}}])}(F);function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}var G=function(e){function r(){var e,i,n,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(this,r),i=this,o=[a],n=O(n=r),(e=S(i,H()?Reflect.construct(n,o||[],O(i).constructor):n.apply(i,o))).ortb2Config=a.ortb2Config||{},e.userIdConfig=a.userIdConfig||null,e}return x(r,e),o(r,[{key:"createConfig",value:function(){var e={};return this._setupDevMode(e),this._setupCurrency(e),this._setupTimeouts(e),this._setupMaxRequests(e),this._setupUserSync(e),this._setupDebugging(e),this._setupBidderTimeout(e),this._setupSendAllBids(e),this._setupTargeting(e),this._setupSizeConfig(e),this._setupCriteoBidVersion(e),this._setupBidderBatching(e),e}},{key:"_setupDevMode",value:function(e){e.debug=Boolean(window.__ezpbdevmode)||window.location.search.indexOf("pbjs_debug=true")>-1||document.cookie.indexOf("pbjs_debug=true")>-1}},{key:"_setupCurrency",value:function(e){e.currency={adServerCurrency:"USD",granularityMultiplier:1,conversionRateFile:"https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json",defaultRates:{USD:{EUR:.85}}}}},{key:"_setupMaxRequests",value:function(e){e.maxRequestsPerOrigin=80,e.enableTIDs=!0,e.consistentTIDs=!0,e.paapi={enabled:!0,gpt:{autoconfig:!1},defaultForSlots:1},e.disableAjaxTimeout=!1}},{key:"_setupTimeouts",value:function(e){e.bidderSequence="random",e.timeoutBuffer=400,e.eventHistoryTTL=10,e.minBidCacheTTL=300}},{key:"_setupUserSync",value:function(e){var t,r={filterSettings:{iframe:{bidders:t="undefined"!=typeof __allSiteApprovedBidders?__allSiteApprovedBidders:"*",filter:"include"},image:{bidders:t,filter:"include"}},syncDelay:3e3,syncEnabled:!0,aliasSyncEnabled:!0,auctionDelay:500};if(this.userIdConfig)r.userIds=this.userIdConfig;else{var i=new N;r.userIds=i.createConfig()}r.encryptedSignalSources={sources:[{source:["adserver.org","id5-sync.com","sharedid.org","pubcid.org","uidapi.com","criteo.com","liveintent.com","liveramp.com","yahoo.com","esp.pubmatic.com"],encrypt:!1}]},"function"==typeof window.document.browsingTopics&&(r.topics={maxTopicCaller:4,bidders:[{bidder:"pubmatic",iframeURL:"https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html",expiry:7},{bidder:"openx",iframeURL:"https://pa.openx.net/topics_frame.html",expiry:7},{bidder:"onetag",iframeURL:"https://onetag-sys.com/static/topicsapi.html",expiry:7}]}),e.userSync=r}},{key:"_setupDebugging",value:function(e){if("1"===window.__ezmb||Boolean(window.__ezpbdevmode))try{e.testGroupId=1}catch(e){d("Error setting test group",e)}}},{key:"_setupBidderTimeout",value:function(e){window.__ez&&window.__ez.biddertimeout&&!isNaN(parseInt(window.__ez.biddertimeout))?e.bidderTimeout=parseInt(window.__ez.biddertimeout):window.__ez&&window.__ez.globalgtbidtimeout&&!isNaN(parseInt(window.__ez.globalgtbidtimeout))&&(e.bidderTimeout=parseInt(window.__ez.globalgtbidtimeout))}},{key:"_setupSendAllBids",value:function(e){e.enableSendAllBids=void 0===window.__ez.sendallbids||Boolean("true"===window.__ez.sendallbids)}},{key:"_setupTargeting",value:function(e){e.gptPreAuction={enabled:!0,mcmEnabled:!0},e.targetingControls={alwaysIncludeDeals:!0}}},{key:"_setupSizeConfig",value:function(e){e.sizeConfig=[{mediaQuery:"(min-width: 769px)",sizesSupported:[[970,250],[970,90],[728,90],[700,250],[300,250],[300,600],[160,600],[320,50]],labels:["desktop"]},{mediaQuery:"(min-width: 500px) and (max-width: 768px)",sizesSupported:[[300,250],[300,600],[728,90],[320,50]],labels:["tablet"]},{mediaQuery:"(min-width: 320px) and (max-width: 499px)",sizesSupported:[[300,250],[300,600],[320,50]],labels:["phone"]}]}},{key:"_setupCriteoBidVersion",value:function(e){e.criteo={fastBidVersion:"latest"}}},{key:"_setupBidderBatching",value:function(e){e.rubicon={singleRequest:!0},e.ttxSettings={enableSRAMode:!0},e.yahooAds={singleRequestMode:!0},e.vidazoo={singleRequest:!0},e.minutemedia={singleRequest:!0},e.rise={singleRequest:!0}}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();t.bidderTimeout=void 0===e.bidderTimeout||0===e.bidderTimeout?2500:e.bidderTimeout,Object.keys(this.ortb2Config).length>0&&e.mergeConfig({ortb2:this.ortb2Config}),e.setConfig(t),d("Applied main configuration",{mainConfig:t,ortb2:this.ortb2Config,userIdConfig:this.userIdConfig?"configured":"not provided"})}catch(e){d("Error applying main configuration",e)}}}])}(F);function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}var K=function(r){function i(){return t(this,i),e=this,n=arguments,r=O(r=i),S(e,W()?Reflect.construct(r,n||[],O(e).constructor):r.apply(e,n));var e,r,n}return x(i,r),o(i,[{key:"createConfig",value:function(){var e={};try{e=this._buildBaseOrtb2(),this._addAdvertiserRules(e),this._addIabCategories(e),this._addFirstPartySignals(e),this._addSiteInfo(e),this._addDeviceInfo(e),this._addGeoData(e)}catch(e){d("Error setting up ortb2",e)}return e}},{key:"_buildBaseOrtb2",value:function(){var e,t;return{site:{name:document.title,cattax:6,cat:[],sectioncat:[],pagecat:((null===(e=window._ezaq)||void 0===e?void 0:e.page_iab_categories)||[]).map((function(e){return e.toString()})),page:location.href,ref:document.referrer,keywords:(null===(t=document.querySelector('meta[name="keywords"]'))||void 0===t?void 0:t.content)||""},video:{minbitrate:300,maxbitrate:96e3}}}},{key:"_addAdvertiserRules",value:function(e){"undefined"!=typeof __advertiserRule&&(e.badv=__advertiserRule)}},{key:"_addIabCategories",value:function(e){var t,r,i;window.__ez&&window.__ez.tf&&"true"==window.__ez.tf.siteIAB&&(e.site.cat=((null===(r=window._ezaq)||void 0===r?void 0:r.site_iab_categories)||[]).map((function(e){return e.toString()}))),null!==(t=window._ezaq)&&void 0!==t&&t.iab_blocked_categories&&(e.site.bcat=((null===(i=window._ezaq)||void 0===i?void 0:i.iab_blocked_categories)||[]).split(",").map((function(e){return e.trim()})))}},{key:"_addFirstPartySignals",value:function(e){var t,r,i,n,o,a,s,d;null!==(t=window._ezaq)&&void 0!==t&&t.first_party_signals_page_categories&&(e.site.pagecat=((null===(o=window._ezaq)||void 0===o?void 0:o.first_party_signals_page_categories)||[]).split(",").map((function(e){return e.trim()}))),null!==(r=window._ezaq)&&void 0!==r&&r.first_party_signals_domain_categories&&(e.site.cat=((null===(a=window._ezaq)||void 0===a?void 0:a.first_party_signals_domain_categories)||[]).split(",").map((function(e){return e.trim()})),(!e.site.pagecat||e.site.pagecat&&0===e.site.pagecat.length)&&(e.site.pagecat=e.site.cat)),null!==(i=window._ezaq)&&void 0!==i&&i.first_party_signals_keywords&&(e.site.keywords=null===(s=window._ezaq)||void 0===s?void 0:s.first_party_signals_keywords),null!==(n=window._ezaq)&&void 0!==n&&n.ortb_signals_language&&(e.site.content=e.site.content||{},e.site.content.language=null===(d=window._ezaq)||void 0===d?void 0:d.ortb_signals_language)}},{key:"_addSiteInfo",value:function(e){var t="undefined"!=typeof _ezaq?_ezaq.domain:"";""!=t&&(e.site.domain=t),e.site.mobile=1,e.site.privacypolicy=1}},{key:"_addDeviceInfo",value:function(e){var t,r,i,n,o,a,s,d;e.device=e.device||{},e.device.ua=navigator.userAgent,e.device.dnt="1"===navigator.doNotTrack?1:0,e.device.devicetype=2,e.device.js=1,null!==(t=window._ezaq)&&void 0!==t&&t.ipv4&&(e.device.ip=window._ezaq.ipv4),null!==(r=window._ezaq)&&void 0!==r&&r.ipv6&&(e.device.ipv6=window._ezaq.ipv6),null!==(i=window._ezaq)&&void 0!==i&&i.device_os_name&&(e.device.os=window._ezaq.device_os_name),null!==(n=window._ezaq)&&void 0!==n&&n.device_os_version&&""!=window._ezaq.device_os_version&&(e.device.osv=window._ezaq.device_os_version),null!==(o=window._ezaq)&&void 0!==o&&o.device_make&&(e.device.make=window._ezaq.device_make),null!==(a=window._ezaq)&&void 0!==a&&a.device_model&&(e.device.model=window._ezaq.device_model),2===(null===(s=window._ezaq)||void 0===s?void 0:s.form_factor_id)?e.device.devicetype=4:3===(null===(d=window._ezaq)||void 0===d?void 0:d.form_factor_id)&&(e.device.devicetype=5)}},{key:"_addGeoData",value:function(e){var t;if(null!==(t=window._ezaq)&&void 0!==t&&t.country){var r=window._ezaq,i=r.country,n=r.state,o={country:l(i)||"USA"};if(n){var a=function(e,t){if(e&&t){var r=e.toUpperCase(),i=t.toUpperCase();return"US"===r?i:"".concat(r,"-").concat(i)}}(i,n);a&&(o.region=a)}this._addPreciseGeolocation(o),e.user=e.user||{},e.user.geo=o,e.device=e.device||{},e.device.geo=o}}},{key:"_addPreciseGeolocation",value:function(t){if(void 0!==window.__ezPrebidGeoTargeting){var r=window.__ezPrebidGeoTargeting;"object"===e(r)?!r.lat||!r.lon||"number"==typeof r.lat&&"number"==typeof r.lon?r.zip&&"string"!=typeof r.zip?this.logDebug("Invalid geo targeting config - zip should be a string",r):(r.lat&&r.lon&&(t.lat=r.lat,t.lon=r.lon),r.zip&&(t.zip=r.zip),r.type&&(t.type=r.type),r.ipservice&&(t.ipservice=r.ipservice),r.lastfix&&(t.lastfix=r.lastfix)):this.logDebug("Invalid geo targeting config - lat and lon should be numbers",r):this.logDebug("Invalid geo targeting config - expected object",r)}}},{key:"applyConfig",value:function(e){d("ORTB2 configuration created but applied by MainConfigFactory")}}])}(F);function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}var J=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,$()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"isExtendedCeilingEnabled",value:function(){return void 0!==window.__ez&&void 0!==window.__ez.tf&&"true"===window.__ez.tf.kabf}},{key:"getMaxCeiling",value:function(){return this.isExtendedCeilingEnabled()?4e3:300}},{key:"createVideoBuckets",value:function(){var e=[{precision:2,min:0,max:5,increment:.01},{precision:2,min:5,max:50,increment:.1},{precision:2,min:50,max:110,increment:5},{precision:2,min:110,max:300,increment:10}];return{buckets:this.isExtendedCeilingEnabled()?[].concat(e,[{precision:2,min:300,max:1e3,increment:100},{precision:2,min:1e3,max:2e3,increment:200},{precision:2,min:2e3,max:4e3,increment:500}]):e}}},{key:"createBannerNativeBuckets",value:function(){return{buckets:[{precision:2,min:0,max:this.getMaxCeiling(),increment:.01}]}}},{key:"createConfig",value:function(){return{video:this.createVideoBuckets(),banner:this.createBannerNativeBuckets(),native:this.createBannerNativeBuckets()}}},{key:"createConfigForMediaType",value:function(e){return"video"===e?this.createVideoBuckets():this.createBannerNativeBuckets()}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();e.setConfig({mediaTypePriceGranularity:t}),d("Applied media type price granularity configuration",t)}catch(e){d("Error applying media type price granularity configuration",e)}}}])}(F);function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function Q(e,t){if(e){if("string"==typeof e)return Y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],d=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);d=!0);}catch(e){u=!0,n=e}finally{try{if(!d&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return s}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X=function(){return!!e})()}var ee=function(r){function i(){return t(this,i),e=this,n=arguments,r=O(r=i),S(e,X()?Reflect.construct(r,n||[],O(e).constructor):r.apply(e,n));var e,r,n}return x(i,r),o(i,[{key:"createConfig",value:function(){var e={};return"undefined"!=typeof __s2sbidders&&__s2sbidders.length>0||"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0||"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0?("undefined"!=typeof __s2sbidders&&(__s2sbidders=__s2sbidders.filter((function(e){return e.endsWith("_s2s")}))),e=[this._generateS2SConfig("display"),this._generateS2SConfig("outstream"),this._generateS2SConfig("instream")]):e}},{key:"_generateS2SConfig",value:function(e){var t=[],r={},i=!1;e&&"display"!==e?"outstream"===e?(t="undefined"!=typeof __s2soutstreambidders?__s2soutstreambidders:[],r=this._getOutstreamAliases(),i=!0):"instream"===e&&(t="undefined"!=typeof __s2sinstreambidders?__s2sinstreambidders:[],r=this._getInstreamAliases(),i=!0):(e="display",t="undefined"!=typeof __s2sbidders?__s2sbidders:[],r=this._getDisplayAliases());for(var n={vastxml:{returnCreative:!1}},o={},a=0,s=Object.entries(r);a<s.length;a++){var d=Z(s[a],2),u=d[0],l=d[1];t.includes(u)&&(o[u]=l)}var c={name:e,accountId:"1",enabled:!0,endpoint:"https://pbserver.ezoic.com/openrtb2/auction",syncEndpoint:"https://pbserver.ezoic.com/cookie_sync",bidders:t,timeout:750,extPrebid:{targeting:{pricegranularity:{ranges:[{max:300,increment:.01}]},includewinners:!0,includebidderkeys:!0},aliases:o},defaultTtl:120};return i?c.extPrebid.cache=n:((n={}).bids={returnCreative:!1},c.extPrebid.cache=n,c.extPrebid.floors={enabled:!0,enforcement:{enforcepbs:!1},data:{currency:"USD",floorsschemaversion:2,modelgroups:[{modelversion:"1.0",currency:"USD",default:.01,schema:{delimiter:"|",fields:["mediaType","size"]},values:{"*|*":.01}}]}}),c}},{key:"_getDisplayAliases",value:function(){return{"33across_s2s":"33across",adyoulike_s2s:"adyoulike",amx_s2s:"amx",appnexus_s2s:"appnexus",axonix_s2s:"axonix",blis_s2s:"blis",cadent_aperture_mx_s2s:"cadent_aperture_mx",conversant_s2s:"conversant",criteo_s2s:"criteo",inmobi_s2s:"inmobi",insticator_s2s:"insticator",ix_s2s:"ix",medianet_s2s:"medianet",minutemedia_s2s:"minutemedia",msft_s2s:"msft",nativo_s2s:"nativo",ogury_s2s:"ogury",onetag_s2s:"onetag",openx_s2s:"openx",pubmatic_s2s:"pubmatic",rubicon_s2s:"rubicon",seedtag_s2s:"seedtag",sharethrough_s2s:"sharethrough",smartadserver_s2s:"smartadserver",sonobi_s2s:"sonobi",sovrn_s2s:"sovrn",triplelift_s2s:"triplelift",trustedstack_s2s:"trustedstack",unruly_s2s:"unruly",vidazoo_s2s:"vidazoo",yieldmo_s2s:"yieldmo",zeta_global_ssp_s2s:"zeta_global_ssp"}}},{key:"_getOutstreamAliases",value:function(){return{"33across_o_s2s":"33across",adyoulike_o_s2s:"adyoulike",amx_o_s2s:"amx",appnexus_o_s2s:"appnexus",axonix_o_s2s:"axonix",blis_o_s2s:"blis",cadent_aperture_mx_o_s2s:"cadent_aperture_mx",conversant_o_s2s:"conversant",criteo_o_s2s:"criteo",gumgum_o_s2s:"gumgum",inmobi_o_s2s:"inmobi",insticator_o_s2s:"insticator",ix_o_s2s:"ix",medianet_o_s2s:"medianet",minutemedia_o_s2s:"minutemedia",msft_o_s2s:"msft",nativo_o_s2s:"nativo",onetag_o_s2s:"onetag",openx_o_s2s:"openx",pubmatic_o_s2s:"pubmatic",rubicon_o_s2s:"rubicon",seedtag_o_s2s:"seedtag",sharethrough_o_s2s:"sharethrough",smartadserver_o_s2s:"smartadserver",sonobi_o_s2s:"sonobi",sovrn_o_s2s:"sovrn",triplelift_o_s2s:"triplelift",trustedstack_o_s2s:"trustedstack",unruly_o_s2s:"unruly",vidazoo_o_s2s:"vidazoo",yieldmo_o_s2s:"yieldmo",zeta_global_ssp_o_s2s:"zeta_global_ssp"}}},{key:"_getInstreamAliases",value:function(){return{"33across_i_s2s":"33across",adyoulike_i_s2s:"adyoulike",amx_i_s2s:"amx",appnexus_i_s2s:"appnexus",blis_i_s2s:"blis",cadent_aperture_mx_i_s2s:"cadent_aperture_mx",conversant_i_s2s:"conversant",criteo_i_s2s:"criteo",gumgum_i_s2s:"gumgum",inmobi_i_s2s:"inmobi",insticator_i_s2s:"insticator",ix_i_s2s:"ix",medianet_i_s2s:"medianet",minutemedia_i_s2s:"minutemedia",msft_i_s2s:"msft",nativo_i_s2s:"nativo",onetag_i_s2s:"onetag",openx_i_s2s:"openx",pubmatic_i_s2s:"pubmatic",rubicon_i_s2s:"rubicon",seedtag_i_s2s:"seedtag",sharethrough_i_s2s:"sharethrough",smartadserver_i_s2s:"smartadserver",sonobi_i_s2s:"sonobi",sovrn_i_s2s:"sovrn",triplelift_i_s2s:"triplelift",trustedstack_i_s2s:"trustedstack",unruly_i_s2s:"unruly",vidazoo_i_s2s:"vidazoo",yieldmo_i_s2s:"yieldmo",zeta_global_ssp_i_s2s:"zeta_global_ssp"}}},{key:"_addS2SAliasesToSS",value:function(e){var t=this;void 0!==this.epbjs&&this.epbjs.SS&&(e?e.map((function(e){var t;return null===(t=e.extPrebid)||void 0===t?void 0:t.aliases})).filter(Boolean):[this._getDisplayAliases(),this._getOutstreamAliases(),this._getInstreamAliases()]).forEach((function(e){for(var r in e){var i=e[r];t.epbjs.SS.hasOwnProperty(i)&&(t.epbjs.SS[r]=t.epbjs.SS[i])}}))}},{key:"_filterS2SBiddersToActive",value:function(t){if(t.SS&&"object"===e(t.SS)){var r=function(e){return t.SS.hasOwnProperty(e)},i=function(e){var t;return null==e||null===(t=e.prebidBidders)||void 0===t?void 0:t.map((function(e){return e.bidder}))},n=[];if("undefined"!=typeof __s2sbidders&&(n=n.concat(__s2sbidders.filter((function(e){return!r(e)}))),__s2sbidders=__s2sbidders.filter(r)),"undefined"!=typeof __s2soutstreambidders){var o=i("undefined"!=typeof __ezOutstream?__ezOutstream:null),a=o?function(e){return o.includes(e)}:r;n=n.concat(__s2soutstreambidders.filter((function(e){return!a(e)}))),__s2soutstreambidders=__s2soutstreambidders.filter(a)}if("undefined"!=typeof __s2sinstreambidders){var s=i("undefined"!=typeof __ezInstream?__ezInstream:null),u=s?function(e){return s.includes(e)}:r;n=n.concat(__s2sinstreambidders.filter((function(e){return!u(e)}))),__s2sinstreambidders=__s2sinstreambidders.filter(u)}n.length&&d("Filtered inactive S2S bidders: ".concat(n.join(", ")))}}},{key:"applyConfig",value:function(e){try{this.epbjs=e,this._addS2SAliasesToSS(),this._filterS2SBiddersToActive(e);var t=this.createConfig();Array.isArray(t)&&t.length>0?(e.setConfig({s2sConfig:t}),d("Applied S2S configuration",t)):d("No S2S configuration to apply")}catch(e){d("Error applying S2S configuration",e)}}}])}(F);function te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(te=function(){return!!e})()}var re=function(e){function r(){var e,i,n,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ezoic.ai";return t(this,r),i=this,o=[a],n=O(n=r),(e=S(i,te()?Reflect.construct(n,o||[],O(i).constructor):n.apply(i,o))).schainDomain=s,e}return x(r,e),o(r,[{key:"createConfig",value:function(){var e="";return"undefined"!=typeof __sellerid&&(e=__sellerid),{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:this.schainDomain,sid:e,hp:1}]}}}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();e.setConfig({schain:t}),d("Applied supply chain configuration",t)}catch(e){d("Error applying supply chain configuration",e)}}}])}(F),ie=function(){return o((function e(r){t(this,e),this.epbjs=r,this.factories={},this._initializeFactories()}),[{key:"_initializeFactories",value:function(){this.factories.ortb=new K(this.epbjs),this.factories.consent=new V(this.epbjs),this.factories.priceGranularity=new J(this.epbjs),this.factories.userId=new N(this.epbjs),this.factories.supplyChain=new re(this.epbjs),this.factories.s2s=new ee(this.epbjs),this.factories.analytics=new A(this.epbjs),this.factories.bidderAlias=new R(this.epbjs),this.factories.cache=new D(this.epbjs),this.factories.bidderSettings=new U(this.epbjs),this.factories.auctionOptions=new j(this.epbjs);var e=this.factories.ortb.createConfig(),t=this.factories.userId.createConfig();this.factories.main=new G({ortb2Config:e,userIdConfig:t})}},{key:"applyAllConfigurations",value:function(){try{d("Starting Prebid configuration"),this._applyConfiguration(),d("All Prebid configurations applied successfully")}catch(e){d("Error applying Prebid configurations",e)}}},{key:"_applyConfiguration",value:function(){this.factories.consent.applyConfig(this.epbjs),this.factories.auctionOptions.applyConfig(this.epbjs),this.factories.priceGranularity.applyConfig(this.epbjs),this.factories.userId.applyConfig(this.epbjs),this.factories.supplyChain.applyConfig(this.epbjs),this.factories.s2s.applyConfig(this.epbjs),this.factories.main.applyConfig(this.epbjs),this.factories.bidderAlias.applyConfig(this.epbjs),this.factories.cache.applyConfig(this.epbjs),this.factories.bidderSettings.applyConfig(this.epbjs),this.factories.analytics.applyConfig(this.epbjs)}},{key:"getFactory",value:function(e){return this.factories[e]||null}}])}(),ne="video",oe=ne,ae=function(){return o((function e(r){t(this,e),this.bidderName=r}),[{key:"applyBidParams",value:function(e,t){return e}},{key:"applyAdUnitParams",value:function(e,t){return e}},{key:"applyAbTestParams",value:function(e,t){if(e.bidder.includes("ttd"))return e;if((t.mediaType||oe)===ne){var r,i,n,o,a=t.isOutstream,s=t.player;"true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vappp)&&!a&&null!=s&&s.isCurrentlyFloating()&&3===(null===(n=e.params)||void 0===n||null===(n=n.video)||void 0===n?void 0:n.pos)&&(e.params.video.pos=2),"1"===(null===(i=__ez)||void 0===i||null===(i=i.tf)||void 0===i?void 0:i.vappp)&&(null==e||null===(o=e.params)||void 0===o||null===(o=o.video)||void 0===o?void 0:o.pos)>1&&(e.params.video.pos=1)}return e}},{key:"convertPlcmtToPlacement",value:function(e){return 1==e||2==e?1:5}},{key:"getBidFloor",value:function(e){return 0}},{key:"setBidFloor",value:function(e,t){return e}}])}();function se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(se=function(){return!!e})()}var de=function(e){function r(){return t(this,r),e=this,n=["33across"],i=O(i=r),S(e,se()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.getFloor=function(){return{currency:"USD",floor:i}}),o===ne){var a,s=t.isOutstream,d=t.prebidParams;s&&("instream"===(null===(a=e.params)||void 0===a?void 0:a.productId)&&4===(null==d?void 0:d.plcmt)&&(e.params.productId="siab"),e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.getFloor=function(){return{currency:"USD",floor:t}}),e}},{key:"getBidFloor",value:function(e){return null!=e&&e.getFloor?e.getFloor().floor:0}}])}(ae);function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}var le=function(e){function r(){return t(this,r),e=this,n=["amx"],i=O(i=r),S(e,ue()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;return r&&i>0&&(e.params.floor=i),o===ne&&t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(ae);function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ce=function(){return!!e})()}var pe=function(e){function r(){return t(this,r),e=this,n=["amx"],i=O(i=r),S(e,ce()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;return(void 0===r?oe:r)===ne&&t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(ae);function fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fe=function(){return!!e})()}var ve=function(e){function r(){return t(this,r),e=this,n=["appnexus"],i=O(i=r),S(e,fe()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"getContextParamValue",value:function(e,t){if(t)return"outstream";switch(e){case"start":return"pre_roll";case"end":return"post_roll";default:return"mid_roll"}}},{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.reserve=i),o===ne){var a=t.isOutstream,s=t.minDur,d=t.maxDur,u=t.skippable,l=t.timeOffset,c=this.getContextParamValue(l,a);e.params.video||(e.params.video={}),e.params.video.context=c,e.params.video.playback_method="auto_play_sound_off",e.params.video.protocols=[2,6],e.params.video.minduration=s,e.params.video.maxduration=d,e.params.video.skippable=u,a&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.reserve)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.reserve=t),e}}])}(ae);function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}var me=function(e){function r(){return t(this,r),e=this,n=["appnexus"],i=O(i=r),S(e,he()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"getContextParamValue",value:function(e,t){if(t)return"outstream";switch(e){case"start":return"pre_roll";case"end":return"post_roll";default:return"mid_roll"}}},{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.isOutstream,n=t.minDur,o=t.maxDur,a=t.skippable,s=t.timeOffset,d=this.getContextParamValue(s,i);e.params.video||(e.params.video={}),e.params.video.context=d,e.params.video.playback_method="auto_play_sound_off",e.params.video.protocols=[2,6],e.params.video.minduration=n,e.params.video.maxduration=o,e.params.video.skippable=a,i&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.reserve)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.reserve=t),e}}])}(ae);function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ye=function(){return!!e})()}var be=function(e){function r(){return t(this,r),e=this,n=["cadentaperturemx"],i=O(i=r),S(e,ye()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;return r&&i>0&&(e.params.bidfloor=i.toString()),o===ne&&t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return parseFloat(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t.toString()),e}}])}(ae);function ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ge=function(){return!!e})()}var _e=function(e){function r(){return t(this,r),e=this,n=["cadentaperturemx"],i=O(i=r),S(e,ge()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;return(void 0===r?oe:r)===ne&&t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return parseFloat(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t.toString()),e}}])}(ae);function we(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(e){if(null==e)return e;try{if("function"==typeof structuredClone)return structuredClone(e)}catch(e){}try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Se=function(){return!!e})()}var Oe=function(e){function r(){return t(this,r),e=this,n=["criteo"],i=O(i=r),S(e,Se()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.bidFloor=i,e.params.bidFloorCur="USD"),o===ne){var a=t.prebidParams;e.params.video=Pe(Pe({},Be(a)),{},{placement:this.convertPlcmtToPlacement(a.plcmt)})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t,e.params.bidFloorCur="USD"),e}}])}(ae);function Ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ce=function(){return!!e})()}var xe=function(e){function r(){return t(this,r),e=this,n=["criteo"],i=O(i=r),S(e,Ce()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType,i=void 0===r?oe:r;return e.params.zoneId&&delete e.params.zoneId,i===ne&&t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(ae);function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fe=function(){return!!e})()}var ze=function(e){function r(){return t(this,r),e=this,n=["gumgum"],i=O(i=r),S(e,Fe()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return t.mediaType,r&&i>0&&(e.params.bidfloor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.bidfloor=t),e}}])}(ae);function Ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ae=function(){return!!e})()}var Ie=function(e){function r(){return t(this,r),e=this,n=["inmobi"],i=O(i=r),S(e,Ae()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.bidfloor=i),o===ne){var a=t.isOutstream,s=t.isRewarded;a&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),s&&(e.params.video=e.params.video||{},e.params.video.ext=e.params.video.ext||{},e.params.video.ext.rewarded=!0,e.params.video.ext.videotype="rewarded")}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function je(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(je=function(){return!!e})()}var Te=function(e){function r(){return t(this,r),e=this,n=["inmobi"],i=O(i=r),S(e,je()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.isOutstream,n=t.isRewarded;i&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),n&&(e.params.video=e.params.video||{},e.params.video.ext=e.params.video.ext||{},e.params.video.ext.rewarded=!0,e.params.video.ext.videotype="rewarded")}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function Re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Re=function(){return!!e})()}var Ee=function(e){function r(){return t(this,r),e=this,n=["insticator"],i=O(i=r),S(e,Re()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(ae);function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ue=function(){return!!e})()}var Me=function(e){function r(){return t(this,r),e=this,n=["insticator"],i=O(i=r),S(e,Ue()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType,i=void 0===r?oe:r;return e.params.publisherId||(e.params.publisherId="ezoic"),i===ne&&t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(ae);function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Le=function(){return!!e})()}var Ve=function(e){function r(){return t(this,r),e=this,n=["ix"],i=O(i=r),S(e,Le()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.bidFloor=i,e.params.bidFloorCur="USD"),o===ne){var a=t.prebidParams;e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Be(a)),Array.isArray(e.params.video.api)&&(e.params.video.api=[2])}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t,e.params.bidFloorCur="USD"),e}}])}(ae);function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function He(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(He=function(){return!!e})()}var Ge=function(e){function r(){return t(this,r),e=this,n=["ix"],i=O(i=r),S(e,He()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.prebidParams;e.params.video=Ne(Ne({},Be(i)),{},{placement:this.convertPlcmtToPlacement(i.plcmt)}),Array.isArray(e.params.video.api)&&(e.params.video.api=[2]),Array.isArray(e.params.video.protocols),e.params.video.protocols=[2,3,5,6]}return e}}])}(ae);function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ke=function(){return!!e})()}var $e=function(e){function r(){return t(this,r),e=this,n=["medianet"],i=O(i=r),S(e,Ke()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.bidfloor=i),o===ne){var a=t.prebidParams,s=t.isOutstream;t.isRewarded&&(e.params.crid="706137722",e.params.cid="8CUBCB617"),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Be(a)),s&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}var Qe=function(e){function r(){return t(this,r),e=this,n=["medianet"],i=O(i=r),S(e,Ye()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.prebidParams,n=t.isOutstream;e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Be(i)),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function Ze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ze=function(){return!!e})()}var Xe=function(e){function r(){return t(this,r),e=this,n=["minutemedia"],i=O(i=r),S(e,Ze()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;return(void 0===r?oe:r)===ne&&t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floorPrice)||0}}])}(ae);function et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(et=function(){return!!e})()}var tt=function(e){function r(){return t(this,r),e=this,n=["msft"],i=O(i=r),S(e,et()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"getContextParamValue",value:function(e,t){if(t)return"outstream";switch(e){case"start":return"pre_roll";case"end":return"post_roll";default:return"mid_roll"}}},{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.reserve=i),o===ne){var a=t.isOutstream,s=t.minDur,d=t.maxDur,u=t.skippable,l=t.timeOffset,c=this.getContextParamValue(l,a);e.params.video||(e.params.video={}),e.params.video.context=c,e.params.video.playback_method="auto_play_sound_off",e.params.video.protocols=[2,6],e.params.video.minduration=s,e.params.video.maxduration=d,e.params.video.skippable=u,a&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.reserve)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.reserve=t),e}}])}(ae);function rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rt=function(){return!!e})()}var it=function(e){function r(){return t(this,r),e=this,n=["msft"],i=O(i=r),S(e,rt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"getContextParamValue",value:function(e,t){if(t)return"outstream";switch(e){case"start":return"pre_roll";case"end":return"post_roll";default:return"mid_roll"}}},{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.isOutstream,n=t.minDur,o=t.maxDur,a=t.skippable,s=t.timeOffset,d=this.getContextParamValue(s,i);e.params.video||(e.params.video={}),e.params.video.context=d,e.params.video.playback_method="auto_play_sound_off",e.params.video.protocols=[2,6],e.params.video.minduration=n,e.params.video.maxduration=o,e.params.video.skippable=a,i&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.reserve)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.reserve=t),e}}])}(ae);function nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nt=function(){return!!e})()}var ot=function(e){function r(){return t(this,r),e=this,n=["onetag"],i=O(i=r),S(e,nt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.shouldForceFloors,o=t.mediaType,a=void 0===o?oe:o;return(a===ne&&r&&i>0&&n||a!==ne&&i>0)&&(e.getFloor=function(){return{currency:"USD",floor:i}}),a===ne&&t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){return null!=e&&e.getFloor?e.getFloor().floor:0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.getFloor=function(){return{currency:"USD",floor:t}}),e}}])}(ae);function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}var st=function(e){function r(){return t(this,r),e=this,n=["openx"],i=O(i=r),S(e,at()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.customFloor=i),o===ne){var a=t.isOutstream,s=t.isRewarded;a&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),s&&(e.params.customParams=e.params.customParams||{},e.params.customParams.rewarded=!0,e.params.customParams.videotype="rewarded",e.params.video=e.params.video||{},e.params.video.ext=e.params.video.ext||{},e.params.video.ext.rewarded=!0,e.params.video.ext.videotype="rewarded",e.params.ext=e.params.ext||{},e.params.ext.rewarded=!0,e.params.ext.videotype="rewarded",e.params.unit=564022162)}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.customFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.customFloor=t),e}}])}(ae);function dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dt=function(){return!!e})()}var ut=function(e){function r(){return t(this,r),e=this,n=["openx"],i=O(i=r),S(e,dt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.isOutstream,n=t.isRewarded;i&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),n&&(e.params.customParams=e.params.customParams||{},e.params.customParams.rewarded=!0,e.params.customParams.videotype="rewarded",e.params.video=e.params.video||{},e.params.video.ext=e.params.video.ext||{},e.params.video.ext.rewarded=!0,e.params.video.ext.videotype="rewarded",e.params.ext=e.params.ext||{},e.params.ext.rewarded=!0,e.params.ext.videotype="rewarded",e.params.unit=564022165)}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.customFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.customFloor=t),e}}])}(ae);function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pt=function(){return!!e})()}var ft=function(e){function r(){return t(this,r),e=this,n=["pubmatic"],i=O(i=r),S(e,pt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(e.params=e.params||{},r&&i>0?e.params.kadfloor=i.toString():o===ne&&(e.params.kadfloor="0.02"),o===ne){var a=t.prebidParams,s=t.isOutstream,d=t.isRewarded;s&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e.params.video=ct(ct({},Be(a)),{},{placement:this.convertPlcmtToPlacement(a.plcmt)}),d&&(e.params.adSlot="Ezoic Publishers_0x0_OutstreamRewarded")}return e}},{key:"getBidFloor",value:function(e){var t;return null!=e&&null!==(t=e.params)&&void 0!==t&&t.kadfloor?parseFloat(e.params.kadfloor):0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.kadfloor=t.toString()),e}}])}(ae);function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mt=function(){return!!e})()}var yt=function(e){function r(){return t(this,r),e=this,n=["pubmatic"],i=O(i=r),S(e,mt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType,i=void 0===r?oe:r;if(e.params=e.params||{},i===ne&&null==e.params.kadfloor&&(e.params.kadfloor="0.02"),i===ne){var n=t.prebidParams,o=t.isOutstream,a=t.isRewarded;o&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e.params.video=ht(ht({},Be(n)),{},{placement:this.convertPlcmtToPlacement(n.plcmt)}),a&&(e.params.adSlot="Ezoic Publishers_0x0_OutstreamRewarded")}return e}},{key:"getBidFloor",value:function(e){var t;return null!=e&&null!==(t=e.params)&&void 0!==t&&t.kadfloor?parseFloat(e.params.kadfloor):0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.kadfloor=t.toString()),e}}])}(ae);function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bt=function(){return!!e})()}var gt=function(e){function r(){return t(this,r),e=this,n=["rise"],i=O(i=r),S(e,bt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return t.mediaType,r&&i>0&&(e.params.floorPrice=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floorPrice)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floorPrice=t),e}}])}(ae);function _t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_t=function(){return!!e})()}var wt=function(e){function r(){return t(this,r),e=this,n=["rubicon"],i=O(i=r),S(e,_t()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.floor=i),o===ne){var a=t.isOutstream,s=t.language,d=t.isRewarded;a&&"undefined"!=typeof _ezaq&&"US"!==_ezaq.country&&(e.params.floor=.1),a?e.params.video={playerWidth:400,playerHeight:300}:(e.params.video||(e.params.video={}),s&&(e.params.video.language=s),e.params.video.playerWidth=640,e.params.video.playerHeight=480),d&&(e.params.zoneId=3901587,e.params.siteId=606161)}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(ae);function Bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bt=function(){return!!e})()}var kt=function(e){function r(){return t(this,r),e=this,n=["rubicon"],i=O(i=r),S(e,Bt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.isOutstream,n=t.language,o=t.skippable,a=t.isRewarded;i?(e.params.video={playerWidth:400,playerHeight:300,size_id:203},e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}):(e.params.video||(e.params.video={}),n&&(e.params.video.language=n),e.params.video.playerWidth=640,e.params.video.playerHeight=480,e.params.video.size_id=201,e.params.video.skip=o?1:0,o&&(e.params.video.skipdelay=5)),a&&(e.params.zoneId=3901587,e.params.siteId=606161)}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(ae);function Pt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pt=function(){return!!e})()}var St=function(e){function r(){return t(this,r),e=this,n=["sharethrough"],i=O(i=r),S(e,Pt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.getFloor=function(){return{currency:"USD",floor:i}}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.getFloor)||void 0===t?void 0:t.call(e).floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.getFloor=function(){return{currency:"USD",floor:t}}),e}}])}(ae);function Ot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ot=function(){return!!e})()}var Ct=function(e){function r(){return t(this,r),e=this,n=["sharethrough"],i=O(i=r),S(e,Ot()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(ae);function xt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xt=function(){return!!e})()}var Ft=function(e){function r(){return t(this,r),e=this,n=["smartadserver"],i=O(i=r),S(e,xt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.bidfloor=i),o===ne){var a=t.isOutstream,s=t.timeOffset;a||(e.params.video={protocol:8,startDelay:this.getStartDelayIntFromTimeOffset(s)})}return e}},{key:"getStartDelayIntFromTimeOffset",value:function(e){switch(e){case"start":return 1;case"end":return 3;default:return 2}}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zt=function(){return!!e})()}var At=function(e){function r(){return t(this,r),e=this,n=["smartadserver"],i=O(i=r),S(e,zt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType,i=void 0===r?oe:r;if(e.params&&["networkId","siteId","pageId","formatId"].forEach((function(t){e.params[t]&&"string"==typeof e.params[t]&&(e.params[t]=parseInt(e.params[t],10))})),i===ne){var n=t.isOutstream,o=t.timeOffset;n?e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}:e.params.video={protocol:8,startDelay:this.getStartDelayIntFromTimeOffset(o)}}return e}},{key:"getStartDelayIntFromTimeOffset",value:function(e){switch(e){case"start":return 1;case"end":return 3;default:return 2}}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function It(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(It=function(){return!!e})()}var jt=function(e){function r(){return t(this,r),e=this,n=["sonobi"],i=O(i=r),S(e,It()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(ae);function Tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tt=function(){return!!e})()}var Rt=function(e){function r(){return t(this,r),e=this,n=["sonobi"],i=O(i=r),S(e,Tt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType,i=void 0===r?oe:r;return!e.params.hasOwnProperty("TagID")&&e.params.hasOwnProperty("placement_id")&&(e.params.TagID=e.params.placement_id,delete e.params.placement_id),i===ne&&t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(ae);function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mt=function(){return!!e})()}var Dt=function(e){function r(){return t(this,r),e=this,n=["sovrn"],i=O(i=r),S(e,Mt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.bidfloor=i),o===ne){var a=t.prebidParams;e.params.video=Ut(Ut({},Be(a)),{},{placement:this.convertPlcmtToPlacement(a.placement)})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qt=function(){return!!e})()}var Nt=function(e){function r(){return t(this,r),e=this,n=["sovrn"],i=O(i=r),S(e,qt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.prebidParams;e.params.video=Vt(Vt({},Be(i)),{},{placement:this.convertPlcmtToPlacement(i.placement)})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function Ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ht=function(){return!!e})()}var Gt=function(e){function r(){return t(this,r),e=this,n=["sparteo"],i=O(i=r),S(e,Ht()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return t.mediaType,r&&i>0&&this.attachGetFloorFunction(e,i),e}},{key:"attachGetFloorFunction",value:function(e,t){"function"!=typeof e.getFloor&&(e.getFloor=function(){return{floor:t,currency:"USD"}})}},{key:"getBidFloor",value:function(e){if("function"==typeof e.getFloor){var t=e.getFloor();return(null==t?void 0:t.floor)||0}return 0}},{key:"setBidFloor",value:function(e,t){return t>0&&this.attachGetFloorFunction(e,t),e}}])}(ae);function Wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wt=function(){return!!e})()}var Kt=function(e){function r(){return t(this,r),e=this,n=["triplelift"],i=O(i=r),S(e,Wt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.floor=i),o===ne){var a=t.prebidParams,s=t.isRewarded;a&&1!==a.plcmt&&(e.params||(e.params={}),e.params.inventoryCode="ezoic_RON_outstream"),e.params||(e.params={}),e.params.video||(e.params.video={}),s&&(e.params.video=e.params.video||{},e.params.video.ext=e.params.video.ext||{},e.params.video.ext.videotype="rewarded",e.params.inventoryCode="ezoic_rewarded_pbc2s"),e.params.video.placement=this.convertPlcmtToPlacement(a.plcmt)}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floor=t),e}}])}(ae);function $t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($t=function(){return!!e})()}var Jt=function(e){function r(){return t(this,r),e=this,n=["triplelift"],i=O(i=r),S(e,$t()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.prebidParams,n=t.isOutstream,o=t.isRewarded;i&&1!==i.plcmt&&(e.params.inventoryCode="ezoic_RON_outstream_PbS2S"),e.params||(e.params={}),e.params.video||(e.params.video={}),e.params.video.placement=this.convertPlcmtToPlacement(i.plcmt),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),o&&(e.params.video=e.params.video||{},e.params.video.ext=e.params.video.ext||{},e.params.video.ext.videotype="rewarded",e.params.inventoryCode="ezoic_rewarded_pbs2s")}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floor=t),e}}])}(ae);function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qt=function(){return!!e})()}var Zt=function(e){function r(){return t(this,r),e=this,n=["trustedstack"],i=O(i=r),S(e,Qt()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.bidfloor=i),o===ne){var a=t.prebidParams,s=t.isOutstream;t.isRewarded&&(e.params.crid="847746688"),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Be(a)),s&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(er=function(){return!!e})()}var tr=function(e){function r(){return t(this,r),e=this,n=["trustedstack"],i=O(i=r),S(e,er()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.prebidParams,n=t.isOutstream;t.isRewarded&&(e.params.crid="794868367"),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Be(i)),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(ae);function rr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rr=function(){return!!e})()}var ir=function(e){function r(){return t(this,r),e=this,n=["ttd"],i=O(i=r),S(e,rr()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.floorVal,i=t.mediaType,n=void 0===i?oe:i;return(n===ne&&Math.random()<.2&&r>0||n!==ne&&r>0)&&(e.params.bidfloor=r),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.bidfloor=t),e}}])}(ae);function nr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nr=function(){return!!e})()}var or=function(e){function r(){return t(this,r),e=this,n=["unruly"],i=O(i=r),S(e,nr()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.floor=i),e.params.siteId=parseInt(e.params.siteId,10),e.params.siteid&&(e.params.siteId=parseInt(e.params.siteid,10),delete e.params.siteid),o===ne){var a=t.isOutstream;t.isRewarded&&(e.params.siteId=292819),a&&(e.params.featureOverrides={canRunUnmissable:!0})}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floor=t),e}}])}(ae);function ar(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ar=function(){return!!e})()}var sr=function(e){function r(){return t(this,r),e=this,n=["unruly"],i=O(i=r),S(e,ar()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType,i=void 0===r?oe:r;if(e.params.siteId=parseInt(e.params.siteId,10),e.params.siteid&&(e.params.siteId=parseInt(e.params.siteid,10),delete e.params.siteid),i===ne){var n=t.isOutstream;t.isRewarded&&(e.params.siteId=292819),n&&(e.params.featureOverrides={canRunUnmissable:!0},e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0})}return e}}])}(ae);function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ur(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ur=function(){return!!e})()}var lr=function(e){function r(){return t(this,r),e=this,n=["vidazoo"],i=O(i=r),S(e,ur()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&"number"==typeof i&&i>0&&(e.params.bidFloor=i),o===ne){var a=t.prebidParams,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({sizes:[[t.playerWidth||400,t.playerHeight||300]]},a);e.params.ext={customParameters:{mediaTypes:{video:s}}}}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return"number"==typeof t&&t>0&&(e.params||(e.params={}),e.params.bidFloor=t),e}}])}(ae);function cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function pr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pr=function(){return!!e})()}var fr=function(e){function r(){return t(this,r),e=this,n=["vidazoo"],i=O(i=r),S(e,pr()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.prebidParams,n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({sizes:[[t.playerWidth||400,t.playerHeight||300]]},i);e.params.ext={customParameters:{mediaTypes:{video:n}}}}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return"number"==typeof t&&t>0&&(e.params||(e.params={}),e.params.bidFloor=t),e}}])}(ae);function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function hr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hr=function(){return!!e})()}var mr=function(e){function r(){return t(this,r),e=this,n=["yieldmo"],i=O(i=r),S(e,hr()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.mediaType,o=void 0===n?oe:n;if(r&&i>0&&(e.params.bidFloor=i),o===ne){var a=t.prebidParams,s=t.isRewarded;e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Be(a)),Array.isArray(e.params.video.api)?e.params.video.api=e.params.video.api.filter((function(e){return e>=1&&e<=6})):e.params.video.api=[2],s&&(e.params.placementId="3911348071467786791")}return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t),e}}])}(ae);function yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gr=function(){return!!e})()}var _r=function(e){function r(){return t(this,r),e=this,n=["yieldmo"],i=O(i=r),S(e,gr()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.mediaType;if((void 0===r?oe:r)===ne){var i=t.prebidParams,n=t.isRewarded;e.params.video=br(br({},Be(i)),{},{placement:this.convertPlcmtToPlacement(i.plcmt)}),Array.isArray(e.params.video.api)?e.params.video.api=e.params.video.api.filter((function(e){return e>=1&&e<=6})):e.params.video.api=[2],n&&(e.params.placementId="3911348071467786791")}return e}}])}(ae);function wr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wr=function(){return!!e})()}var Br=function(e){function r(){return t(this,r),e=this,n=["noop"],i=O(i=r),S(e,wr()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"applyBidParams",value:function(e,t){return e}},{key:"applyAdUnitParams",value:function(e,t){return e}},{key:"getBidFloor",value:function(e){return 0}}])}(ae),kr=function(){function e(){t(this,e)}return o(e,null,[{key:"getStrategy",value:function(t){var r,i=null!==(r=function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(e,this,Pr)._.get(t))&&void 0!==r?r:Br;return new i}}])}(),Pr={_:new Map([["33across",de],["33across_i_s2s",de],["33across_o_s2s",de],["amx",le],["amx_s2s",pe],["amx_i_s2s",pe],["amx_o_s2s",pe],["appnexus",ve],["appnexus_s2s",me],["appnexus_i_s2s",me],["appnexus_o_s2s",me],["cadent_aperture_mx",be],["cadent_aperture_mx_s2s",_e],["cadent_aperture_mx_i_s2s",_e],["cadent_aperture_mx_o_s2s",_e],["criteo",Oe],["criteo_s2s",xe],["criteo_i_s2s",xe],["criteo_o_s2s",xe],["gumgum",ze],["inmobi",Ie],["inmobi_s2s",Te],["inmobi_i_s2s",Te],["inmobi_o_s2s",Te],["insticator",Ee],["insticator_s2s",Me],["insticator_i_s2s",Me],["insticator_o_s2s",Me],["ix",Ve],["ix_s2s",Ge],["ix_i_s2s",Ge],["ix_o_s2s",Ge],["medianet",$e],["medianet_s2s",Qe],["medianet_i_s2s",Qe],["medianet_o_s2s",Qe],["minutemedia",Xe],["msft",tt],["msft_s2s",it],["msft_i_s2s",it],["msft_o_s2s",it],["onetag",ot],["onetag_i_s2s",ot],["onetag_o_s2s",ot],["openx",st],["openx_s2s",ut],["openx_i_s2s",ut],["openx_o_s2s",ut],["pubmatic",ft],["pubmatic_s2s",yt],["pubmatic_i_s2s",yt],["pubmatic_o_s2s",yt],["rise",gt],["rubicon",wt],["rubicon_s2s",kt],["rubicon_i_s2s",kt],["rubicon_o_s2s",kt],["sharethrough",St],["sharethrough_s2s",Ct],["sharethrough_i_s2s",Ct],["sharethrough_o_s2s",Ct],["smartadserver",Ft],["smartadserver_s2s",At],["smartadserver_i_s2s",At],["smartadserver_o_s2s",At],["sonobi",jt],["sonobi_s2s",Rt],["sonobi_i_s2s",Rt],["sonobi_o_s2s",Rt],["sovrn",Dt],["sovrn_s2s",Nt],["sovrn_i_s2s",Nt],["sovrn_o_s2s",Nt],["sparteo",Gt],["triplelift",Kt],["triplelift_s2s",Jt],["triplelift_i_s2s",Jt],["triplelift_o_s2s",Jt],["trustedstack",Zt],["trustedstack_s2s",tr],["trustedstack_i_s2s",tr],["trustedstack_o_s2s",tr],["ttd",ir],["unruly",or],["unruly_s2s",sr],["unruly_i_s2s",sr],["unruly_o_s2s",sr],["vidazoo",lr],["vidazoo_s2s",fr],["vidazoo_i_s2s",fr],["vidazoo_o_s2s",fr],["yieldmo",mr],["yieldmo_s2s",_r],["yieldmo_i_s2s",_r],["yieldmo_o_s2s",_r]])};void 0!==window.ezptlog&&!0===window.ezptlog&&(window.epbjs=window.epbjs||{},window.epbjs.que=window.epbjs.que||[]);const Sr=function(){return o((function e(){t(this,e),window.epbjs=window.epbjs||{},epbjs=window.epbjs||{},epbjs.que=epbjs.que||[],epbjs.ezAdUnits=epbjs.ezAdUnits||[],epbjs.ezdss=epbjs.ezdss||[],epbjs.ezas=epbjs.ezas||[],epbjs.ezobid=epbjs.ezobid||[],window.ezoptbid=window.ezoptbid||[],epbjs.bidderFactory=kr,this.videoHBEnabled="undefined"!=typeof __ezInstream||"undefined"!=typeof __ezOutstream}),[{key:"init",value:function(){var e,t=this;if(a((function(){f(),t.setUpGlobalFunctions(),t.setUpConfigs(),void 0!==__ez.fads&&1!=__ez.fads.isJIT&&t.setUpEventListeners()}),"EpbjsController.init")(),window.__epbjsReady=!0,null!==(e=window.__ez)&&void 0!==e&&null!==(e=e.ce)&&void 0!==e&&e.AddPageviewEvent){var r,i=null!==(r=window.__ez)&&void 0!==r&&r.stms?Date.now()-window.__ez.stms:-1;window.__ez.ce.AddPageviewEvent("epbjs_ready",String(i))}var n=function(){function e(e){return!(null==e||!e.adUnits||!Array.isArray(e.adUnits))&&e.adUnits.some((function(e){return e&&5===e.pt}))}epbjs.onEvent("auctionInit",(function e(t){var r;if(null!==(r=window.__ez)&&void 0!==r&&null!==(r=r.ce)&&void 0!==r&&r.AddPageviewEvent){var i,n=null!==(i=window.__ez)&&void 0!==i&&i.stms?t.timestamp-window.__ez.stms:-1;window.__ez.ce.AddPageviewEvent("first_auction_init",String(n))}epbjs.offEvent("auctionInit",e)})),epbjs.onEvent("auctionEnd",(function e(t){var r;if(null!==(r=window.__ez)&&void 0!==r&&null!==(r=r.ce)&&void 0!==r&&r.AddPageviewEvent){var i,n=null!==(i=window.__ez)&&void 0!==i&&i.stms?t.auctionEnd-window.__ez.stms:-1;window.__ez.ce.AddPageviewEvent("first_auction_end",String(n))}epbjs.offEvent("auctionEnd",e)})),epbjs.onEvent("auctionInit",(function t(r){var i;if(e(r)){if(null!==(i=window.__ez)&&void 0!==i&&null!==(i=i.ce)&&void 0!==i&&i.AddPageviewEvent){var n,o=null!==(n=window.__ez)&&void 0!==n&&n.stms?r.timestamp-window.__ez.stms:-1;window.__ez.ce.AddPageviewEvent("first_anchor_auction_init",String(o))}epbjs.offEvent("auctionInit",t)}})),epbjs.onEvent("auctionEnd",(function t(r){var i;if(e(r)){if(null!==(i=window.__ez)&&void 0!==i&&null!==(i=i.ce)&&void 0!==i&&i.AddPageviewEvent){var n,o=null!==(n=window.__ez)&&void 0!==n&&n.stms?r.auctionEnd-window.__ez.stms:-1;window.__ez.ce.AddPageviewEvent("first_anchor_auction_end",String(o))}epbjs.offEvent("auctionEnd",t)}}))};Array.isArray(epbjs.que)&&epbjs.que.push===Array.prototype.push?epbjs.que.unshift(n):epbjs.que.push(n);var o=new CustomEvent("ezoicDependencyLoaded",{detail:{key:"epbjs"}});document.dispatchEvent(o)}},{key:"setUpGlobalFunctions",value:function(){(function(t,r){if(t&&"object"===e(t)){var i=Object.assign({},r||{});t.shouldHydrateBidCreative=function(e){return k(e,i.getCacheUrl)},t.hydrateBidCreative=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){return P.apply(this,arguments)}(e,Object.assign({},i,t||{}))}}})(epbjs,{getCacheUrl:c}),window.getSlotForhb=a((function(e){for(var t in window.ezslots)if(window[window.ezslots[t]].getSlotElementId()==e)return window[window.ezslots[t]]}),"getSlotForhb"),window.epbjsRequestAdUnits=a((function(e){if(void 0!==window.ezoResponsiveSizes)for(var t=0;t<e.length;t++)e[t]=window.epbjsApplyResponsiveSizes(e[t]);void 0!==window.ezstandalone?epbjs.que.push(a((function(){for(var t=0;t<e.length;t++){var r=e[t];epbjs.removeAdUnit(r.code);for(var i=!1,n=0;n<epbjs.ezAdUnits.length;n++)epbjs.ezAdUnits[n].code==r.code&&(epbjs.ezAdUnits[n]=JSON.parse(JSON.stringify(r)),i=!0);i||epbjs.ezAdUnits.push(JSON.parse(JSON.stringify(r)))}epbjs.addAdUnits(e)}),"epbjsRequestAdUnits.1")):epbjs.que.push(a((function(){epbjs.ezAdUnits=JSON.parse(JSON.stringify(e)),epbjs.addAdUnits(e)}),"epbjsRequestAdUnits.2")),epbjsBidRequest(e)}),"epbjsRequestAdUnits"),window.epbjsBidRequest=a((function(e){epbjs.que.push(a((function(){for(var t={},r=0;r<e.length;r++){if(void 0!==epbjs.ezBidCache&&epbjs.ezBidCache.hasBidForAdUnit(e[r].code)){var i=epbjs.ezBidCache.getTopBidEventForAdUnit(e[r].code);null!==i&&(t[e[r].code]={bids:i})}window.setAuctionActive(e[r].code)}t.length>0&&("function"==typeof window.ezosethbbids?window.ezosethbbids(t):window.ezosethbbidsInterval=setInterval((function(e){"function"==typeof ezosethbbids&&ezosethbbids(e)}),130,t)),epbjs.requestBids({adUnits:e,bidsBackHandler:function(e){"function"==typeof window.ezosethbbids?window.ezosethbbids(e):window.ezosethbbidsInterval=setInterval((function(e){"function"==typeof ezosethbbids&&ezosethbbids(e)}),130,e)}})}),"epbjsBidRequest.1"))}),"epbjsBidRequest"),window.epbjsApplyResponsiveSizes=a((function(e){if(void 0===window.ezoResponsiveSizes||void 0===window.ezoResponsiveSizes[e.code])return e;for(var t=!1,r=[],i=0;i<ezoResponsiveSizes[e.code].responsiveSizes.length;i++){var n=ezoResponsiveSizes[e.code].responsiveSizes[i];0===n.minWidth&&0===n.minHeight&&(t=!0);var o=n.sizes;n.altSizes&&(o=o.concat(n.altSizes)),r.push({minViewPort:[n.minWidth,n.minHeight],sizes:o})}return t||(r=[{minViewPort:[0,0],sizes:[]}].concat(r)),e.mediaTypes={banner:{sizeConfig:r}},e}),"epbjsApplyResponsiveSizes"),window.epbjsRefreshSlot=a((function(e){epbjs.que.push(a((function(){window.setAuctionActive(e.getSlotElementId()),epbjs.requestBids({adUnitCodes:[e.getSlotElementId()],bidsBackHandler:function(t){if(epbjs.setPAAPIConfigForGPT(),epbjs.fastLoadAuctionEnd=!0,window.ezosethbbids(t),void 0!==epbjs.ezBidCache){var r=epbjs.ezBidCache.getTopBidEventForAdUnit(e.getSlotElementId());null!==r&&(r.from_cache=!0,window.ezosethbbid(r))}}})}),"epbjsRefreshSlot.1"))}),"epbjsRefreshSlot"),window.setAuctionActive=a((function(e){window.activeAuctions=window.activeAuctions||{},window.activeAuctions[e]=!0}),"setAuctionActive"),window.setAuctionFinished=a((function(e){window.activeAuctions&&delete window.activeAuctions[e],window.isHbFinished=!0}),"setAuctionFinished"),window.isValid256Hash=a((function(e){return null!==e.match(/^[a-fA-F0-9]{64}$/g)}),"isValid256Hash")}},{key:"setUpCriteoUserIds",value:function(e){var t,r,i=this;if("undefined"!=typeof ez__sspDomain){var n;if(null!==(t=window.ezoicIdentity)&&void 0!==t&&t.getUID){if(!(n=window.ezoicIdentity.getUID())&&e&&Date.now()-e<=2e3)return void setTimeout((function(){i.setUpCriteoUserIds(e)}),50)}else if(e&&Date.now()-e<=2e3)return void setTimeout((function(){i.setUpCriteoUserIds(e)}),50);var o=[];null!==(r=n)&&void 0!==r&&null!==(r=r.email)&&void 0!==r&&r.sha256?(o.push({id:n.email.sha256,atype:3,ext:{stype:"hemsha256"}}),n.email.md5&&o.push({id:n.email.md5,atype:3,ext:{stype:"hemmd5"}})):"undefined"!=typeof ez__uIdHash&&o.push({id:ez__uIdHash,atype:1,ext:{stype:"ppuid",persistence:"js"}}),o.length>0&&epbjs.setBidderConfig({bidders:["criteo"],config:{ortb2:{user:{ext:{data:{eids:[{source:ez__sspDomain,uids:o}]}}}}},fledgeEnabled:!0,defaultForSlots:1},!0)}}},{key:"setUpConfigs",value:function(){var e=this;epbjs.que.push(a((function(){new ie(epbjs).applyAllConfigurations(),setTimeout((function(){var e,t;__ez&&__ez.ce&&"function"==typeof __ez.ce.AddPageviewEvent&&(__ez.ce.AddPageviewEvent("has_page_iab_cats",((null===(e=window._ezaq)||void 0===e||null===(e=e.first_party_signals_page_categories)||void 0===e?void 0:e.length)||0)>0?1:0),__ez.ce.AddPageviewEvent("has_domain_iab_cats",((null===(t=window._ezaq)||void 0===t||null===(t=t.first_party_signals_domain_categories)||void 0===t?void 0:t.length)||0)>0?1:0))}),1e3),e.setUpCriteoUserIds(Date.now()),h(Date.now()),window.__allBidders.includes("yahooAds")&&epbjs.setConfig({yahooAds:{mode:"all"}}),d("Prebid configuration completed successfully")}),"setUpConfigs"))}},{key:"getAllVideoProviders",value:function(){var e=[];return videojs&&videojs.getAllPlayers().forEach((function(t){var r={divId:t.id_,vendorCode:2,playerConfig:{params:{adPluginConfig:{numRedirects:10},vendorConfig:{controls:!1,autoplay:!0,preload:"auto"}}}};e.push(r)})),e}},{key:"setUpEventListeners",value:function(){epbjs.que.push((function(){epbjs.onEvent("bidResponse",(function(t){if("object"==e(epbjs.bidderSettings)&&t.bidder in epbjs.bidderSettings&&"function"==typeof epbjs.bidderSettings[t.bidder].bidCpmAdjustment){var r=Math.floor(100*epbjs.bidderSettings[t.bidder].bidCpmAdjustment(t.cpm,t))/100;void 0===r||isNaN(r)||(t.cpm=r,t.pbCg=r,t.adserverTargeting.epp=r)}if(void 0!==epbjs.ezBidCache){epbjs.ezBidCache.setHigherBidForAdUnit(t);var i=epbjs.ezBidCache.getTopBidEventForAdUnit(t.adUnitCode);null!==i&&(t=i)}window.ezosethbbid(t)})),epbjs.onEvent("auctionEnd",(function(e){for(var t,r=function(r){window.setAuctionFinished(e.adUnitCodes[r]),void 0!==window.nbabt&&!0===window.nbabt&&(t=window.ezslots.filter((function(t){return window[t].getSlotElementId()===e.adUnitCodes[r]}))).length>0&&""!=window[t[0]].getTargeting("hb_opt")[0]&&window.adjustHbValues&&window.adjustHbValues(window[t[0]])},i=0;i<e.adUnitCodes.length;i++)r(i);window.PrebidImpressionController&&(window.PrebidImpressionController.recordAuctionEndImpressions(e),window.PrebidImpressionController.batchFireAll())})),epbjs.onEvent("bidWon",(function(e){window.triggerPbjsAdWin(e),window.PrebidImpressionController&&window.PrebidImpressionController.recordAndFireImpressionWonEvent(e)})),window.triggerPbjsAdWin=function(e){var t=e.bidder;epbjs.ezas[e.adUnitCode]=e.size,"ehb"==t?epbjs.ezdss[e.adUnitCode]=e.ss:void 0!==epbjs.SS[t.toLowerCase()]?(epbjs.ezdss[e.adUnitCode]=epbjs.SS[t.toLowerCase()],1==epbjs.useAdj&&epbjs.bidders.indexOf(e.bidder)>-1&&(epbjs.ezobid[e.adUnitCode]=e.cpm/epbjs.gadj)):void 0!==epbjs.SS[t.toLowerCase()]?(epbjs.ezdss[e.adUnitCode]=epbjs.SS[t.toLowerCase()],1==epbjs.useAdj&&epbjs.bidders.indexOf(t.toLowerCase())>-1&&(epbjs.ezobid[e.adUnitCode]=e.cpm/epbjs.gadj)):console.error("epbjs: NO MATCH",e.bidder,epbjs.SS),void 0!==epbjs.ezBidCache&&epbjs.ezBidCache.clearBidForUnit(e.adUnitCode,e.bidderCode)}}))}}])}();function Or(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Cr={epb:"hb_bidder",epa:"hb_adid",epp:"hb_pb",epf:"hb_format",eps:"hb_ssid"},xr="https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&sz=640x480&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=",Fr="prebid",zr="aps",Ar="-octx",Ir="https://vastproxy.ezoic.net",jr={UNIFORM:"uniform",EXPONENTIAL:"exponential",GEOMETRIC:"geometric",HIGH_END:"highEnd",LOW_END:"lowEnd",HISTORICAL:"historical",HISTORICAL_BIDDER:"historicalBidder",RAMP_UP:"rampUp"};function Tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"undefined"!=typeof __ez&&__ez.tf&&"3"===__ez.tf.vabmf&&t&&"undefined"!=typeof __ezOutstream&&__ezOutstream.leastStatSourceFloors?null!==e&&__ezOutstream.leastStatSourceFloors.hasOwnProperty(e.ssid)?__ezOutstream.leastStatSourceFloors[e.ssid]:.02:0}function Rr(e,t,r){return new Promise((function(i,n){var o=function(){window.hasOwnProperty(e)&&(clearTimeout(a),clearInterval(s),i(window[e]))},a=setTimeout((function(){n("Variable not found.")}),t),s=setInterval(o,r);o()}))}function Er(){if(Ur()){var e=Array.from(arguments);e.unshift("[Video HB]"),console.log.apply(console,e)}}function Ur(){return"1"===new URLSearchParams(window.location.search).get("ez_vhb_debug")}function Mr(){return"1"===new URLSearchParams(window.location.search).get("ez_fake_instream")}function Dr(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===r)return Er("No key specified for VAST Tag custom targeting, returning VAST URL: "+e),e;try{t=new URL(e)}catch(t){return Er("Invalid/Cannot parse VAST Tag URL: "+e),e}var n=t.searchParams;if(!n.has("cust_params"))return e;var o=new URLSearchParams(n.get("cust_params"));return null===i||i.length<1?o.has(r)?(Er("Empty or null value specified for targeting key: ".concat(r,", val: ").concat(i,". Removing ").concat(r," from cust_params")),o.delete(r),n.set("cust_params",o.toString()),Er("VAST Custom Targeting Params: ",Array.from(o.entries())),t.toString()):(Er("No targeting key to remove because it is not in cust_params or the key is null here"),t.toString()):(Array.isArray(i)&&(i=i.join(",")),Er("Setting VAST Custom Targeting Params with key: ".concat(r,", val: ").concat(i)),o.set(r,i),n.set("cust_params",o.toString()),Er("VAST Custom Targeting Params: ",Array.from(o.entries())),t.toString())}function Lr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e;return"undefined"==typeof __ez||void 0===__ez.tf||"true"!==__ez.tf.kabf?r>300&&(r=300):r>4e3&&(r=4e3),t?(r>=0&&r<=5?Math.floor(100*r)/100:r>5&&r<=50?Math.floor(10*r)/10:r>50&&r<=110?5*Math.floor(r/5):r>110&&r<=300?10*Math.floor(r/10):r>300&&r<=1e3?100*Math.floor(r/100):r>1e3&&r<=2e3?200*Math.floor(r/200):500*Math.floor(r/500)).toFixed(2):((r=r<=0?0:r<=1?10*Math.floor(10*r+.5):r<=3?20*Math.floor(100*r/20+.5):r<=10?50*Math.floor(100*r/50+.5):r<=30?100*Math.floor(100*r/100+.5):r<=50?200*Math.floor(100*r/200+.5):r<=120?500*Math.floor(100*r/500+.5):1e3*Math.floor(100*r/1e3+.5))/100>e&&r>2&&(r-=r<=100?10:r<=300?20:r<=1e3?50:r<=3e3?100:r<=5e3?200:r<=12e3?500:1e3),(r/100).toFixed(2))}function Vr(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?window.__ezOutstream:window.__ezInstream;return void 0!==e&&void 0!==e.monetizationApproval&&e.monetizationApproval.MCMApproved}function qr(e){var t;return null===(t=window.ezVideoAdConductor)||void 0===t||null===(t=t.getVideoAdConductor())||void 0===t?void 0:t.getPlayerById(e)}function Nr(e){if(epbjs&&epbjs.SS&&epbjs.SS.hasOwnProperty(e))return epbjs.SS[e];var t={};return"undefined"!=typeof __ezInstream&&__ezInstream.prebidBidders&&Array.isArray(__ezInstream.prebidBidders)&&__ezInstream.prebidBidders.forEach((function(e){void 0!==e.ssid&&(t[e.bidder]=parseInt(e.ssid))})),"undefined"!=typeof __ezOutstream&&__ezOutstream.prebidBidders&&Array.isArray(__ezOutstream.prebidBidders)&&__ezOutstream.prebidBidders.forEach((function(e){void 0!==e.ssid&&(t[e.bidder]=parseInt(e.ssid))})),t[e]}Tr();var Hr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Gr(e){return"string"==typeof e&&Hr.test(e)}function Wr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Kr(e,t,r){var i,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=window.epbjs;if(!e||null==d||null===(i=d.adServers)||void 0===i||null===(i=i.gam)||void 0===i||!i.buildVideoUrl||!r)return e;var u=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return null;var r=Be(e),i=null==r?void 0:r.adserverTargeting;if(!i)return r;if(i.hasOwnProperty("epp")&&(i.epp=Lr(i.epp,t),i.epp<=0))return null;var n=window.epbjs;if(!i.hasOwnProperty("eps")&&r.bidder&&null!=n&&n.SS){var o=r.bidder.replace(/_[io]_s2s$/,"").toLowerCase(),a=n.SS[o];a&&(i.eps=a)}return r.adserverTargeting=Object.entries(i).reduce((function(e,t){var r=Z(t,2),i=r[0],n=r[1];return e[Cr[i]||i]=n,e}),{}),r}(r,s);if(!u)return e;var l=d.adServers.gam.buildVideoUrl({adUnit:t,url:e,bid:u});if(null!=r&&r.ezCacheUrl)try{l=Dr(l,"origVastUrl",Wr(r.ezCacheUrl))}catch(e){l=Dr(l,"origVastUrl",r.ezCacheUrl)}return null!=o&&(l=Dr(l,"eb_br",o)),a&&Array.isArray(n)&&n.length>0&&(l=function(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!Array.isArray(t)||0===t.length)return Er("No prebid bids provided for VAST URL targeting. Returning original URL."),e;t.length>6&&(Er("Too many prebid bids (".concat(t.length,"), only first 6 will be used.")),t=t.slice(0,6));try{r=new URL(e)}catch(t){return Er("Invalid/Cannot parse VAST Tag URL: "+e),e}var n=r.searchParams;if(!n.has("cust_params"))return Er("No cust_params found in VAST URL. Returning original URL."),e;var o=new URLSearchParams(n.get("cust_params"));return t.forEach((function(e,t){if(e){var r=t+i;if(void 0!==e.cpm&&null!==e.cpm&&o.set("hb_pb_".concat(r),e.cpm),e.ezVideoCacheKey&&o.set("hb_uuid_".concat(r),e.ezVideoCacheKey),e.bidder){o.set("hb_bidder_".concat(r),e.bidder);var n=Nr(e.bidder);null!=n&&o.set("hb_ssid_".concat(r),n)}if(e.ezCacheUrl)try{var a=Wr(e.ezCacheUrl);o.set("origVastUrl".concat(r),a)}catch(t){o.set("origVastUrl".concat(r),e.ezCacheUrl)}}})),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")&&o.set("bra",_ezaq.ab_test_id),n.set("cust_params",o.toString()),r.toString()}(l,n,1)),l=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{t=new URL(e)}catch(t){return e}var n=t.searchParams;if(!n.has("cust_params"))return e;for(var o=new URLSearchParams(n.get("cust_params")),a=Array.isArray(r)?r:[],s=1;s<=6;s++){var d=0;if(i){var u=a[s-1],l=Number(null==u?void 0:u.cpm);Number.isFinite(l)&&(d=l)}o.set("hb_pb_".concat(s),String(d))}return n.set("cust_params",o.toString()),t.toString()}(l,n,a),function(e,t){if(!e||!Number.isFinite(t)||t<=0)return e;var r;try{r=new URL(e)}catch(t){return e}var i=r.searchParams;if("1"===i.get("ad_rule"))return e;if(!(i.has("pmnd")||i.has("pmxd")||i.has("pmad")))return e;var n=Math.max(1,3e4*Math.round(t));if(i.has("pmxd")){var o=parseInt(i.get("pmxd"),10);!Number.isNaN(o)&&o>0&&(n=Math.min(n,o))}return i.set("pmnd",String(n)),r.toString()}(l,1+(a&&(null==n?void 0:n.length)||0))}function $r(e){if(!e)return 1;try{var t=new URL(e).searchParams,r=t.has("pmnd"),i=t.has("pmxd"),n=t.has("pmad");if(!r&&!i&&!n)return 1;if(n){var o=parseInt(t.get("pmad"));if(!isNaN(o)&&o>0)return Math.min(o,6)}var a=1;if(i){var s=parseInt(t.get("pmxd"));!isNaN(s)&&s>0&&(a=Math.floor(s/3e4))}return Math.max(1,Math.min(a,6))}catch(e){return Er("Error parsing VAST URL for max ads:",e),1}}var Jr=function(){return o((function e(){t(this,e),this.shouldSendPlacement={"33across_i_s2s":!0,"33across_o_s2s":!0,amx:!0,amx_i_s2s:!0,amx_o_s2s:!0,conversant_i_s2s:!0,conversant_o_s2s:!0,criteo:!0,criteo_i_s2s:!0,criteo_o_s2s:!0,gumgum_i_s2s:!0,gumgum_o_s2s:!0,insticator_i_s2s:!0,insticator_o_s2s:!0,ix_i_s2s:!0,ix_o_s2s:!0,medianet:!0,medianet_i_s2s:!0,medianet_o_s2s:!0,pubmatic:!0,pubmatic_i_s2s:!0,pubmatic_o_s2s:!0,rise:!0,rise_i_s2s:!0,rise_o_s2s:!0,sovrn:!0,sovrn_i_s2s:!0,sovrn_o_s2s:!0,triplelift_o_s2s:!0,triplelift_i_s2s:!0,trustedstack:!0,trustedstack_i_s2s:!0,trustedstack_o_s2s:!0,vidazoo:!0,vidazoo_i_s2s:!0,vidazoo_o_s2s:!0,yieldmo:!0,yieldmo_i_s2s:!0,yieldmo_o_s2s:!0},this.shouldSendMultipleFloorsInstream={appnexus:!0,medianet:!0,onetag:!0,openx:!0,msft:!0,rubicon:!0,sharethrough:!0,yieldmo:!0},this.shouldSendMultipleFloorsOutstream={onetag:!0,openx:!0,rubicon:!0,sharethrough:!0},this.shouldAlwaysSendOutstreamContext={},this.willBidOnMultiFormat={"33across":!0,appnexus:!0,criteo:!0,criteo_o_s2s:!0,insticator:!0,ix:!0,ix_o_s2s:!0,medianet:!0,medianet_i_s2s:!0,medianet_o_s2s:!0,msft:!0,smartadserver:!0,smartadserver_o_s2s:!0,yieldmo:!0,yieldmo_o_s2s:!0},this.willBidOnMultiFormatBannerOnly={"33across_o_s2s":!0,insticator_o_s2s:!0},this.TTD_BIDDERS={ttd:!0,ttd_i_s2s:!0,ttd_o_s2s:!0},this.s2sBidderSets=new Map}),[{key:"hasS2SBidders",value:function(e){return e?"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0:"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0}},{key:"isS2SBidder",value:function(e,t){if("string"!=typeof e||!e)return!1;var r=t?"outstream":"instream";if(!this.s2sBidderSets.has(r)){var i=t?"undefined"!=typeof __s2soutstreambidders?__s2soutstreambidders:[]:"undefined"!=typeof __s2sinstreambidders?__s2sinstreambidders:[],n=Array.isArray(i)?i.filter((function(e){return"string"==typeof e})):[];this.s2sBidderSets.set(r,new Set(n))}return this.s2sBidderSets.get(r).has(e)}},{key:"getS2SBidderSet",value:function(e){var t=e?"outstream":"instream";if(!this.s2sBidderSets.has(t)){var r=e?"undefined"!=typeof __s2soutstreambidders?__s2soutstreambidders:[]:"undefined"!=typeof __s2sinstreambidders?__s2sinstreambidders:[],i=Array.isArray(r)?r.filter((function(e){return"string"==typeof e})):[];this.s2sBidderSets.set(t,new Set(i))}return this.s2sBidderSets.get(t)}},{key:"shouldBidderSendPlacement",value:function(e){return!!this.shouldSendPlacement[e]}},{key:"shouldBidderSendMultipleFloors",value:function(e,t){return!!(t?this.shouldSendMultipleFloorsOutstream:this.shouldSendMultipleFloorsInstream)[e]}},{key:"shouldBidderAlwaysSendOutstreamContext",value:function(e,t){return!t&&!!this.shouldAlwaysSendOutstreamContext[e]}},{key:"willBidderBidOnMultiFormat",value:function(e){return!!this.willBidOnMultiFormat[e]}},{key:"willBidderBidOnMultiFormatBannerOnly",value:function(e){return!!this.willBidOnMultiFormatBannerOnly[e]}},{key:"isTTDBidder",value:function(e){return!!this.TTD_BIDDERS[e]}},{key:"getBidderProfile",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||this.getS2SBidderSet(t);return{isMultiformat:this.willBidderBidOnMultiFormat(e),isMultiformatBannerOnly:this.willBidderBidOnMultiFormatBannerOnly(e),isMultifloor:this.shouldBidderSendMultipleFloors(e,t),isS2S:r.has(e),needsPlacement:this.shouldBidderSendPlacement(e),needsOutstream:this.shouldBidderAlwaysSendOutstreamContext(e,t),isTTD:this.isTTDBidder(e)}}}])}();function Yr(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Qr=new WeakSet;function Zr(){var e;return!(this.isOutstream||this.isAdBreakFrontloaded()&&this.isMultiAuction&&!0!==(null===(e=window.__ezInstream)||void 0===e?void 0:e.dgeb))}function Xr(e){if(null!==e&&"undefined"!==e&&void 0!==e){if(void 0!==e.cpm&&e.cpm>this.maxHBBid)return e.cpm;if(void 0!==e.originalCpm&&e.originalCpm>this.maxHBBid)return e.originalCpm}return this.maxHBBid>0?this.maxHBBid:0}function ei(e){var t,r,i=window.epbjs;if(!i||!i.markWinningBidAsUsed||!i.adServers)return this.vastURL;if(this.isTrueInstreamPodRequest())return this.podPricePriorityMode=!1,this.podPrimaryBid=null,this.podBackfillBids=[],this.podPrimaryBidCpm=0,null!==(t=this.podWaterfallResult)&&void 0!==t&&t.filled&&null!==(r=this.podWaterfallResult)&&void 0!==r&&r.url?this.podWaterfallResult.url:this.vastURL;if(this.podPricePriorityMode=!1,this.podPrimaryBid=null,this.podBackfillBids=[],this.podPrimaryBidCpm=0,e.adserverTargeting){if(e.adserverTargeting.hasOwnProperty("epp")&&(e.adserverTargeting.epp=Lr(e.adserverTargeting.epp,this.isOutstream?__ezOutstream.IsEzDfpAccount:__ezInstream.IsEzDfpAccount),e.adserverTargeting.epp<=0))return this.vastURL;if(!e.adserverTargeting.hasOwnProperty("eps")&&e.bidder&&i.SS){var n=e.bidder.replace(/_[io]_s2s$/,"").toLowerCase(),o=i.SS[n];o&&(e.adserverTargeting.eps=o)}e.adserverTargeting=Object.entries(e.adserverTargeting).reduce((function(e,t){var r=Z(t,2),i=r[0],n=r[1];return e[Cr[i]||i]=n,e}),{})}var a=i.adServers.gam.buildVideoUrl({adUnit:this.prebidAdUnits,url:this.origVastURL,bid:e});if(null!=e&&e.ezCacheUrl)try{a=Dr(a,"origVastUrl",Wr(e.ezCacheUrl))}catch(t){a=Dr(a,"origVastUrl",e.ezCacheUrl)}return a}function ti(e){var t=this,r=e.filter((function(e){return!t.bidders.includes(e)}));this.bidders=this.bidders.concat(r)}function ri(e){this.receivedBidders.includes(e)||this.receivedBidders.push(e)}const ii=function(){return o((function e(r){var i,n,o=this;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=Qr),n.add(i),we(this,"addedAPSToVAST",void 0),we(this,"addedPrebidToVAST",void 0),we(this,"apsBidCount",void 0),we(this,"apsBid",void 0),we(this,"bidFloorActions",void 0),we(this,"bidFloorActionsTS",void 0),we(this,"bidFloorGen",void 0),we(this,"bidFloorIndex",void 0),we(this,"bidFloorType",void 0),we(this,"bidders",void 0),we(this,"bidRetries",void 0),we(this,"breakID",void 0),we(this,"didS2SBidderWin",void 0),we(this,"gpid",void 0),we(this,"hadAPSBid",void 0),we(this,"impressionCnt",void 0),we(this,"impressionId",void 0),we(this,"initialBidFloor",void 0),we(this,"isBackfillMode",void 0),we(this,"isComplete",void 0),we(this,"isFloating",void 0),we(this,"isMultiAuction",void 0),we(this,"isOutstream",void 0),we(this,"IsSkipped",void 0),we(this,"isTriggered",void 0),we(this,"key",void 0),we(this,"lastBidHash",void 0),we(this,"maxHBBid",void 0),we(this,"maxHBBidder",void 0),we(this,"multiplier",void 0),we(this,"noFill",void 0),we(this,"origVastURL",void 0),we(this,"params",void 0),we(this,"played",void 0),we(this,"pmpDealsToConsider",void 0),we(this,"positionGen",void 0),we(this,"prebidBidderRequests",void 0),we(this,"prebidBids",void 0),we(this,"prebidCPM",void 0),we(this,"prebidAdUnits",void 0),we(this,"prebidParams",void 0),we(this,"queryType",void 0),we(this,"receivedBidders",void 0),we(this,"retryCount",void 0),we(this,"startingBidFloorIndex",void 0),we(this,"statSourceId",void 0),we(this,"timeOffset",void 0),we(this,"timeOffsetSeconds",void 0),we(this,"vastURL",void 0),we(this,"videoAdBidFloor",void 0),we(this,"videoAdBidFloorAmazon",void 0),we(this,"videoAdBidHash",void 0),we(this,"videoAdBidFloorUnmodified",void 0),we(this,"videoFallbackFloors",void 0),we(this,"videoFallbackHashes",void 0),we(this,"videoFallbackType",void 0),we(this,"videoPmpDeal",void 0),we(this,"statSourceFloors",void 0),we(this,"multiFloorStatSourceFloors",void 0),we(this,"googleBid",void 0),we(this,"podWaterfallResult",void 0),we(this,"podPrimaryBid",void 0),we(this,"podBackfillBids",void 0),we(this,"podPrimaryBidCpm",void 0),we(this,"podPricePriorityMode",void 0),we(this,"isGoogleGamPod",void 0),we(this,"expectedDuration",void 0),we(this,"durationTier",void 0),Object.keys(r).forEach((function(e){o[e]=r[e]})),this.origVastURL||(this.origVastURL=this.vastURL),this.retryCount||(this.retryCount=0,null==r.startingBidFloorIndex&&(this.bidFloorIndex=0),this.lastBidHash=this.videoAdBidHash,this.maxHBBid=0,this.maxHBBidder=void 0,this.initialBidFloor=this.videoAdBidFloor),this.hasOwnProperty("apsBidCount")||(this.apsBidCount=0),this.isComplete=!1,this.isTriggered=!1,this.bidders=[],this.receivedBidders=[],this.statSourceId=void 0,this.prebidCPM=void 0,this.played=!1,this.hadAPSBid=!1,this.addedAPSToVAST=!1,this.addedPrebidToVAST=!1,this.pmpDealsToConsider=[],this.isMultiAuction=0,this.didS2SBidderWin=!1,this.isBackfillMode=!1,this.bidderConfig=new Jr,this.googleBid=null,this.podWaterfallResult=null,this.podPrimaryBid=null,this.podBackfillBids=[],this.podPrimaryBidCpm=0,this.podPricePriorityMode=!1,this.isGoogleGamPod=!1,this.expectedDuration=null,this.durationTier=null,this.isCacheRecovery=!1,this.hasOwnProperty("gpid")||(this.gpid=this.breakID)}),[{key:"getAPSStatSourceId",value:function(){return"undefined"!=typeof __ezInstream&&!this.isOutstream&&__ezInstream.apsSlot.slotID?11324:"undefined"!=typeof __ezOutstream&&this.isOutstream&&__ezOutstream.apsSlot.slotID?11337:""}},{key:"processGoogleBid",value:function(e){if(!e)return Er("Google did not fill"),void(this.googleBid=null);this.googleBid=e,this.updatePmpTargetingDealsForFloor(e.floor),Er("Google filled at floor ".concat(e.floor," (").concat(e.hash,")"))}},{key:"processPodWaterfallResult",value:function(e){this.podWaterfallResult=e||null,this.isGoogleGamPod=!(null==e||!e.filled),e&&e.filled&&(e.url&&(this.vastURL=e.url),e.hash&&(this.lastBidHash=e.hash),this.processGoogleBid(e))}},{key:"isTrueInstreamPodRequest",value:function(){var e=this.vastURL&&this.vastURL.includes("/23057404840"),t=this.prebidParams&&1===this.prebidParams.plcmt,r=this.vastURL&&(this.vastURL.includes("pmnd=")||this.vastURL.includes("pmxd=")||this.vastURL.includes("pmad=")),i=$r(this.vastURL);return!!(e&&t&&r&&i>1)}},{key:"isPodWaterfallEligible",value:function(){return this.isTrueInstreamPodRequest()}},{key:"isPodPricePriorityModeEnabled",value:function(){return!!(this.podPricePriorityMode&&this.podPrimaryBid&&this.isTrueInstreamPodRequest())}},{key:"refreshPodTargetingForCurrentFloor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastBidHash,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.videoAdBidFloor;if(!this.isPodPricePriorityModeEnabled())return!1;var r=t<=this.podPrimaryBidCpm,i=this.isOutstream?"undefined"==typeof __ezOutstream||__ezOutstream.IsEzDfpAccount:"undefined"==typeof __ezInstream||__ezInstream.IsEzDfpAccount,n=this.origVastURL||this.vastURL;return this.vastURL=Kr(n,this.prebidAdUnits,this.podPrimaryBid,this.podBackfillBids,e,r,i),this.lastBidHash=e,!0}},{key:"updatePmpTargetingDealsForFloor",value:function(e){if(this.videoPmpDeal&&Array.isArray(this.videoPmpDeal)&&0!==this.videoPmpDeal.length){var t=[];e>.2&&this.videoPmpDeal.forEach((function(r){void 0!==r.adjustedDealFloor&&(r.adjustedDealFloor>=99999||e>r.adjustedLowerDealFloor&&e<r.adjustedUpperDealFloor)&&t.push(r.dealId)})),this.pmpDealsToConsider=t}}},{key:"assembleTagURL",value:function(e){if(e||this.onlyUseVastProxy())return this.chooseHighestBidForPrebidRenderer();var t=this.addBidsToVAST(),r=t.prebidBid,i=t.apsBid;return this.updatePmpTargetingDeals(),this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak(),Er(this.key+"\nVAST URL: ",this.vastURL+"\nPrebid:",r,"\nAPS:",i),!!r||!!i}},{key:"chooseHighestBidForPrebidRenderer",value:function(){Er("Choosing highest bid for prebid renderer");var e=this.getHighestBidWithSource(),t=(e.source===Fr?e.bid:null)||this.getWinningPrebidBid(),r=this.apsBid||null;this.maxHBBidder=t,this.maxHBBid=Yr(Qr,this,Xr).call(this,t);var i,n,o=!1,a=!1;if(Er("Prebid bid: ",t," APS bid: ",r," Google bid: ",this.googleBid," Max HB bid: ",this.maxHBBid),"google"===e.source&&this.googleBid&&this.googleBid.adsManager)Er("[AdBreak] Google WON auction at $".concat(this.googleBid.floor," (Prebid: $").concat(this.maxHBBid||0,", APS: $").concat((null==r?void 0:r.bidVal)||0,")")),null===(i=window.__ezDevtools)||void 0===i||null===(n=i.recordWinningBid)||void 0===n||n.call(i,this.impressionId,"google",this.googleBid.floor),a=!0;else if(e.source===zr&&r){var s,d;this.vastURL=this.getVastProxyAPSUrl(r),null===(s=window.__ezDevtools)||void 0===s||null===(d=s.recordWinningBid)||void 0===d||d.call(s,this.impressionId,"amzn",r.bidVal),o=!0}else if(e.source===Fr&&t){var u,l;this.vastURL=this.getVastProxyPrebidUrl(t),null===(u=window.__ezDevtools)||void 0===u||null===(l=u.recordWinningBid)||void 0===l||l.call(u,this.impressionId,t.bidder,t.cpm)}else if(r&&(!t||r.bidVal>this.maxHBBid)){var c,p;this.vastURL=this.getVastProxyAPSUrl(r),null===(c=window.__ezDevtools)||void 0===c||null===(p=c.recordWinningBid)||void 0===p||p.call(c,this.impressionId,"amzn",r.bidVal),o=!0}else if(t){var f,v;this.vastURL=this.getVastProxyPrebidUrl(t),null===(f=window.__ezDevtools)||void 0===f||null===(v=f.recordWinningBid)||void 0===v||v.call(f,this.impressionId,t.bidder,t.cpm)}if(this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak(),this.noFill=!t&&!r&&!this.googleBid,!this.noFill&&"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")&&!a){this.vastURL+="&mod="+_ezaq.ab_test_id;var h=o?this.getAPSStatSourceId():Nr(t.bidder);""!=h&&(this.vastURL+="&ssid="+h)}return!!t||!!r||!!this.googleBid}},{key:"getMultiformatProxyUrl",value:function(){var e,t=this.maxHBBidder||this.getWinningPrebidBid()||{},r=t.adId||t.requestId||this.impressionId||"multiformat",i=(null==t||null===(e=t.adserverTargeting)||void 0===e?void 0:e.hb_format)||(null==t?void 0:t.mediaType),n="banner"===i||"native"===i?i:"",o=t.bidder?Nr(t.bidder):"",a="".concat(Ir,"/vast?adId=").concat(encodeURIComponent(r),"&vpmute=1&vastUrl=").concat(encodeURIComponent("about:blank"));return n&&(a+="&mf=".concat(encodeURIComponent(n))),o&&(a+="&ssid=".concat(o)),a}},{key:"getVastProxyAPSUrl",value:function(e){var t=encodeURIComponent("https://aax.amazon-adsystem.com/e/dtb/vast?b="+e.amzniid+"&rnd="+Math.random().toString(36).substring(2,15)+"&pp="+e.amznbid);return"".concat(Ir,"/vast?adId=aps&vpmute=1&vastUrl=").concat(t)}},{key:"getVastProxyPrebidUrl",value:function(e){var t=null;if(Gr(null==e?void 0:e.ezVideoCacheKey))t=e.ezVideoCacheKey;else if(Gr(null==e?void 0:e.videoCacheKey))t=e.videoCacheKey;else if(null!=e&&e.ezCacheUrl)try{var r=new URL(e.ezCacheUrl).searchParams.get("uuid");Gr(r)&&(t=r)}catch(e){}if(!t)return Er("Skipping invalid prebid cache uuid",{bidder:null==e?void 0:e.bidder,videoCacheKey:null==e?void 0:e.videoCacheKey,ezVideoCacheKey:null==e?void 0:e.ezVideoCacheKey}),this.getMultiformatProxyUrl();var i=null!=e&&e.ezCacheUrl?"&origVastUrl=".concat(encodeURIComponent(e.ezCacheUrl)):"",n=encodeURIComponent("https://prebid.adnxs.com/pbc/v1/cache?uuid=".concat(t));return"".concat(Ir,"/vast?adId=").concat(t,"&vpmute=1&vastUrl=").concat(n).concat(i)}},{key:"getHighestBidWithSource",value:function(){var e,t,r,i,n,o=-1,a="",s=null,d=null,u=this.getWinningPrebidBid(),l=this.apsBid||null,c="true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vcpmsec);if(null===(t=window._ezaq)||void 0===t?void 0:t.ab_test_id,this.isOutstream&&c&&this.expectedDuration){var p,f,v,h,m,y,b,g,_,w=(null===(p=u=this.getVideoBidCacheTopBid({useCpmPerSec:!0,durationTier:this.durationTier,duration:this.expectedDuration}))||void 0===p||null===(p=p.adserverTargeting)||void 0===p?void 0:p.hb_format)||(null===(f=u)||void 0===f?void 0:f.mediaType)||"video",B="video"!==w&&"vast"!==w?30:(null===(v=u)||void 0===v?void 0:v.duration)||(null===(h=u)||void 0===h||null===(h=h.video)||void 0===h?void 0:h.durationSeconds)||(null===(m=u)||void 0===m||null===(m=m.meta)||void 0===m?void 0:m.durationSeconds)||this.expectedDuration,k=u?u.cpm/B:-1,P=(null==l?void 0:l.duration)||(null==l||null===(y=l.video)||void 0===y?void 0:y.durationSeconds)||this.expectedDuration,S=l?l.bidVal/P:-1,O=(null===(b=this.googleBid)||void 0===b?void 0:b.duration)||this.expectedDuration,C=this.googleBid?this.googleBid.floor/O:-1;u&&(u.bidder,u.cpm),l&&l.bidVal,this.googleBid&&this.googleBid.floor;var x=-1;return u&&k>x&&(x=k,o=u.cpm,a=Fr,s=u,d=w),l&&S>x&&(x=S,o=l.bidVal,a=zr,s=l,d="video"),this.googleBid&&C>x&&(x=C,o=this.googleBid.floor,a="google",s=this.googleBid,d="video"),{cpm:o,cpmPerSec:x,duration:a===Fr?B:a===zr?P:"google"===a?O:this.expectedDuration,source:a,bid:s,format:d,adId:(null===(g=s)||void 0===g?void 0:g.adId)||(null===(_=s)||void 0===_?void 0:_.amzniid)||("google"===a?"google":null)}}return u&&(o=u.cpm,a=Fr,s=u,d=(null===(n=u.adserverTargeting)||void 0===n?void 0:n.hb_format)||u.mediaType||"video"),l&&l.bidVal>o&&(o=l.bidVal,a=zr,s=l,d="video"),this.googleBid&&this.googleBid.floor>o&&(o=this.googleBid.floor,a="google",s=this.googleBid,d="video"),{cpm:o,source:a,bid:s,format:d,adId:(null===(r=s)||void 0===r?void 0:r.adId)||(null===(i=s)||void 0===i?void 0:i.amzniid)||("google"===a?"google":null)}}},{key:"shouldAddBidToVAST",value:function(e,t,r){return e?!t:(Er("shouldAddBidToVAST: falsy bid floor received"),!0)}},{key:"addBidsToVAST",value:function(){var e=this.getWinningPrebidBid(),t=this.apsBid||null;if(this.addedAPSToVAST&&this.addedPrebidToVAST)return{prebidBid:e,apsBid:t};this.maxHBBidder=e,this.maxHBBid=Yr(Qr,this,Xr).call(this,e),e&&this.shouldAddBidToVAST(e.cpm,this.addedPrebidToVAST,Fr)&&(this.vastURL=Yr(Qr,this,ei).call(this,e),this.addedPrebidToVAST=!0);var r=!1;return(window.__ezInstream&&window.__ezInstream.PreferPrebidOverAmzn>0||window.__ezOutstream&&window.__ezOutstream.PreferPrebidOverAmzn>0)&&(r=!0),""==this.getAPSStatSourceId()||e&&r||(t?void 0!==t.encodedQsParams&&this.shouldAddBidToVAST(t.bidVal,this.addedAPSToVAST,zr)&&(this.vastURL+=t.encodedQsParams,this.addedAPSToVAST=!0,"undefined"!=typeof __ezOutstream&&(this.hadAPSBid=!0)):"undefined"!=typeof __ezOutstream&&(this.hadAPSBid=!1)),{prebidBid:e,apsBid:t}}},{key:"resetPrebidBid",value:function(){this.maxHBBid=0,this.maxHBBidder=void 0,this.addedPrebidToVAST=!1,this.podWaterfallResult=null,this.podPricePriorityMode=!1,this.isGoogleGamPod=!1;var e=this.vastURL.startsWith(Ir);this.vastURL=this.origVastURL,this.addedAPSToVAST=!1,this.assembleTagURL(e)}},{key:"recordBiddersForBreak",value:function(){var e=[];if("undefined"!=typeof __ezInstream&&!this.isOutstream&&__ezInstream.prebidBidders&&0!=__ezInstream.prebidBidders.length){var t=__ezInstream.prebidBidders.map((function(e){return"string"==typeof e.ssid?parseInt(e.ssid):e.ssid}));e=e.concat(t)}if("undefined"!=typeof __ezOutstream&&this.isOutstream&&__ezOutstream.prebidBidders&&0!=__ezOutstream.prebidBidders.length){var r=__ezOutstream.prebidBidders.map((function(e){return"string"==typeof e.ssid?parseInt(e.ssid):e.ssid}));e=e.concat(r)}var i=this.getAPSStatSourceId();""!=i&&(e.push(i),this.apsBid&&Yr(Qr,this,ri).call(this,i)),Yr(Qr,this,ti).call(this,e)}},{key:"getVideoBidCacheTopBid",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null,i=this.getPlayerId();if("function"==typeof(null===(e=__ez)||void 0===e||null===(e=e.vbf)||void 0===e?void 0:e.getCache)){var n=__ez.vbf.getCache();n&&((r=n.getTopBid(i,{useCpmPerSec:t.useCpmPerSec,durationTier:t.durationTier,duration:t.duration}))?(Er("Top bid from videoBidCache:",r),!r._gamCpmAdjusted&&Yr(Qr,this,Zr).call(this)&&(r.originalCpm=r.originalCpm||r.cpm,r.cpm=Math.max(0,r.cpm-.18),r._gamCpmAdjusted=!0)):Er("No valid bids found in videoBidCache for player:",i))}return r}},{key:"getVideoBidCacheTopNBids",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],n=this.getPlayerId();if("function"==typeof(null===(t=__ez)||void 0===t||null===(t=t.vbf)||void 0===t?void 0:t.getCache)){var o=__ez.vbf.getCache();o&&((i=o.getTopNBids(n,e,{useCpmPerSec:r.useCpmPerSec,durationTier:r.durationTier,duration:r.duration}))&&i.length>0?(Yr(Qr,this,Zr).call(this)&&i.forEach((function(e){e&&!e._gamCpmAdjusted&&(e.originalCpm=e.originalCpm||e.cpm,e.cpm=Math.max(0,e.cpm-.18),e._gamCpmAdjusted=!0)})),Er("Top bids from videoBidCache:",i)):Er("No valid bids found in videoBidCache for player:",n))}return i}},{key:"getWinningPrebidBid",value:function(){var e;if(this.maxHBBidder)return Er("Using previous set top bid:",this.maxHBBidder),this.maxHBBidder;var t="true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vcpmsec);return this.isOutstream&&t&&this.expectedDuration?this.getVideoBidCacheTopBid({useCpmPerSec:!0,durationTier:this.durationTier,duration:this.expectedDuration}):this.getVideoBidCacheTopBid()}},{key:"isBidCacheLoaded",value:function(){var e;return void 0!==(null===(e=__ez)||void 0===e||null===(e=e.vbf)||void 0===e?void 0:e.getCache())}},{key:"updatePrebidBidCacheWithBids",value:function(e){var t=this;Er("bids already cached in bidResponse event, only updating received bidders"),e.forEach((function(e){var r=Nr(e.bidder);r&&Yr(Qr,t,ri).call(t,r)}))}},{key:"handleWinningAdIdOrHbUUId",value:function(e){if(Er("winning ad id",e),this.apsBid&&(this.apsBid.adId===e||"aps"==e))return Er("found ad id or hbUUId: ",e," in aps bid: ",this.apsBid),this.statSourceId=this.getAPSStatSourceId(),{source:"aps",bid:this.apsBid,statSourceId:this.getAPSStatSourceId()};if("google"===e&&this.googleBid)return Er("found ad id or hbUUId:",e," in google bid:",this.googleBid),{source:"google",bid:this.googleBid,statSourceId:0};var t=__ez.vbf.getCache();if(t){Er("Checking videoBidCache for ad id or hbUUId:",e);var r=t.getBidByVideoCacheKey(e);if(r){Er("Found ad id or hbUUId:",e," in videoBidCache:",r);var i=this.getPlayerId(),n=t.getStats();Er("[Cache State BEFORE removal] Player ".concat(i,":"),n.playerStats[i]);var o=t.removeBid(e),a=t.getStats();return Er("[Cache State AFTER removal] Player ".concat(i,":"),a.playerStats[i]),Er("[Cache Eviction] Removed: ".concat(o,", Total bids in cache: ").concat(a.totalBids)),this.recordWinAndFirePrebidImpression(r),{source:"prebid",bid:r,statSourceId:Nr(r.bidder)}}}return Er("neither aps nor prebid won the ad id or hbUUId: ",e),null}},{key:"setStatSourceIdFromAdIdOrHbUUId",value:function(e){if(this.apsBid&&(this.apsBid.adId===e||"aps"==e))return Er("found ad id or hbUUId: ",e," in aps bid: ",this.apsBid),void(this.statSourceId=this.getAPSStatSourceId());if("google"===e&&this.googleBid)Er("found ad id or hbUUId:",e," in google bid:",this.googleBid);else{var t=__ez.vbf.getCache();if(t){Er("Checking videoBidCache for ad id or hbUUId:",e);var r=t.getBidByVideoCacheKey(e);if(r)return void(this.statSourceId=Nr(r.bidder))}}}},{key:"recordWinAndFirePrebidImpression",value:function(e){var t,r;e&&(this.statSourceId=Nr(e.bidder),this.prebidCPM=e.cpm,__ez.vhb.recordWinForBidder(e.bidder,e.cpm),null===(t=window.__ezDevtools)||void 0===t||null===(r=t.recordWinningBid)||void 0===r||r.call(t,this.impressionId,e.bidder,e.cpm),window.PrebidImpressionController&&window.PrebidImpressionController.recordAndFireImpressionWonEvent(e),void 0!==e&&"string"==typeof e.bidder&&this.bidderConfig.isS2SBidder(e.bidder,this.isOutstream)&&(this.didS2SBidderWin=!0),"video"===e.mediaType&&epbjs.markWinningBidAsUsed({adUnitCode:this.breakID,adId:e.adId,events:!0}))}},{key:"getAdBreakPosition",value:function(e){var t=e.split("-");if(t.length<3)return console.error("Failed to parse ad break position - malformed breakId: "+e),"";var r=t[t.length-2];return"preroll"!==r&&"midroll"!==r&&"postroll"!==r&&"outstream"!==r?(console.error("Failed to parse ad break position - unknown position on breakId: "+e),""):"-"+r}},{key:"getPlayerId",value:function(){return this.key.split("$")[0]}},{key:"getStatSourceFloors",value:function(){return this.statSourceFloors}},{key:"getMultiFloorStatSourceFloors",value:function(){return this.multiFloorStatSourceFloors}},{key:"getIsPlayerCurrentlyFloating",value:function(){var e;return null===(e=qr(this.getPlayerId()))||void 0===e?void 0:e.isCurrentlyFloating()}},{key:"setFallbackPosition",value:function(e){Er("bid: getting highest floor below",e);for(var t=0,r=-1,i=0;i<this.videoFallbackFloors.length;i++)this.videoFallbackFloors[i]<=e&&this.videoFallbackFloors[i]>t&&(t=this.videoFallbackFloors[i],r=i);if(r>-1){if(this.bidFloorIndex>=r)return;this.videoAdBidFloor=t,this.videoAdBidHash=this.videoFallbackHashes[r],this.bidFloorIndex=r,this.startingBidFloorIndex=this.bidFloorIndex}else this.videoAdBidFloor=0,this.videoAdBidHash="zero",this.bidFloorIndex=this.videoFallbackFloors.length,this.startingBidFloorIndex=this.bidFloorIndex;Er("bid: setting fallback position to",this.videoAdBidFloor,this.videoAdBidHash)}},{key:"setStartingBidFloor",value:function(e){var t=e;Er("bid: previous floor",t),t>0&&(t*=3),Er("bid: getting highest floor below",t);var r=0,i=-1;if(t>0){for(var n=0;n<this.videoFallbackFloors.length;n++)if(this.videoFallbackFloors[n]<=t&&this.videoFallbackFloors[n]>r){i=n,(r=this.videoFallbackFloors[n])===e&&n>0?(i=n-1,Er("bid: set floor up one step from last fill",r=this.videoFallbackFloors[n-1])):Er("bid: set floor below 3x last fill",r);break}}else if(0===t){Er("bid: finding floor ".concat(3," above ").concat(t));var o=this.videoFallbackFloors.indexOf(0);-1===o&&(o=this.videoFallbackFloors.length-1);var a=o-3;a<0&&(a=0),i=a,r=this.videoFallbackFloors[a]}i>-1?(this.videoAdBidFloor=r,this.videoAdBidHash=this.videoFallbackHashes[i],this.bidFloorIndex=i,this.startingBidFloorIndex=this.bidFloorIndex):(this.videoAdBidFloor=0,this.videoAdBidHash="zero",this.bidFloorIndex=this.videoFallbackFloors.length,this.startingBidFloorIndex=this.bidFloorIndex),Er("bid: updated ".concat(this.isOutstream?"outstream":"in-content"," fallback floor to ").concat(this.videoAdBidFloor," ").concat(this.videoAdBidHash))}},{key:"updatePmpTargetingDeals",value:function(){var e=this;if(void 0!==this.videoPmpDeal&&Array.isArray(this.videoPmpDeal)&&0!==this.videoPmpDeal.length){var t=[];this.videoAdBidFloor>.2&&this.videoPmpDeal.forEach((function(r){"undefined"!==r.adjustedDealFloor&&(r.adjustedDealFloor>=99999||e.videoAdBidFloor>r.adjustedLowerDealFloor&&e.videoAdBidFloor<r.adjustedUpperDealFloor)&&t.push(r.dealId)})),this.pmpDealsToConsider=t,this.vastURL=Dr(this.vastURL,"deal1",t)}}},{key:"markBreakAsComplete",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];__ez&&__ez.vhb&&__ez.vhb.breaks&&t&&"object"==e(__ez.vhb.breaks[t])&&!r?__ez.vhb.breaks[t].isComplete=!0:__ez&&__ez.vhb&&__ez.vhb.floatingBreaks&&t&&"object"==e(__ez.vhb.floatingBreaks[t])&&(__ez.vhb.floatingBreaks[t].isComplete=!0)}},{key:"onlyUseVastProxy",value:function(){return!!this.isOutstream}},{key:"getVideoLanguage",value:function(t){if(void 0!==window.ezVideo&&"object"===e(window.ezVideo.playerLanguage)&&"string"==typeof t){var r=window.ezVideo.playerLanguage[t];if(r&&"string"==typeof r&&2===r.length)return r}return null}},{key:"isAdBreakFrontloaded",value:function(){return"FrontLoad"===this.positionGen||"FrontLoadOverridden"===this.positionGen}},{key:"isAdBreakCustomPosition",value:function(){return"pub-midroll"===this.positionGen||"pub-midrollOverridden"===this.positionGen}},{key:"getNextBid",value:function(){var e=this.videoFallbackFloors[this.bidFloorIndex];if(void 0===this.videoFallbackHashes||this.bidFloorIndex>=this.videoFallbackHashes.length)return{hash:"zero",bidValue:0};var t=Tr();return e=Math.max(t,e),{hash:this.videoFallbackHashes[this.bidFloorIndex],bidValue:e}}},{key:"updateBidHash",value:function(e){this.lastBidHash.includes(",")&&(this.lastBidHash=encodeURIComponent(this.lastBidHash)),e.includes(",")&&(e=encodeURIComponent(e));var t=this.vastURL.replace(/(eb_br%3D)[^%&]+/,"$1".concat(e));if(this.lastBidHash!==e&&t===this.vastURL)throw new Error("failed to replace old bid hash (".concat(this.lastBidHash,") with new hash (").concat(e,") in VAST ").concat(this.vastURL));this.vastURL=t,this.lastBidHash=e}},{key:"getMaxPrebidBidCpm",value:function(){var e;return(null===(e=this.prebidBids)||void 0===e?void 0:e.reduce((function(e,t){var r,i;return Math.max(e,null!==(r=null!==(i=t.cpm)&&void 0!==i?i:t.originalCpm)&&void 0!==r?r:0)}),0))||0}},{key:"getIsBackfillMode",value:function(){var e,t;return"1"===new URLSearchParams(window.location.search).get("test_enhanced_vastproxy")||!!this.isBackfillMode||(this.isOutstream?"undefined"!=typeof __ezOutstream&&(null===(e=__ezOutstream)||void 0===e||null===(e=e.vatc)||void 0===e?void 0:e.ibm):"undefined"!=typeof __ezInstream&&(null===(t=__ezInstream)||void 0===t||null===(t=t.vatc)||void 0===t?void 0:t.ibm))}},{key:"getWinningBidFloorAction",value:function(){var e;if(null===(e=this.bidFloorActions)||void 0===e||!e.length)return null;if(this.prebidBids){var t=this.prebidBids.reduce((function(e,t){return((null==t?void 0:t.cpm)||0)>((null==e?void 0:e.cpm)||0)?t:e})),r=(this.prebidBidderRequests||[]).flatMap((function(e){return e.bids})).find((function(e){return e.bidId===t.requestId}));if(r){var i=kr.getStrategy(r.bidder).getBidFloor(r);if(i){var n=this.bidFloorActions.find((function(e){return e.prebidFloor===i}));if(n)return n}}}return this.bidFloorActions[0]}},{key:"getWinningBidFloorActionTS",value:function(){var e,t=this;if(null===(e=this.bidFloorActionsTS)||void 0===e||!e.length)return null;if(this.prebidBids){var r=this.prebidBids.reduce((function(e,t){return((null==t?void 0:t.cpm)||0)>((null==e?void 0:e.cpm)||0)?t:e})),i=(this.prebidBidderRequests||[]).flatMap((function(e){return e.bids})),n=i.find((function(e){return e.bidId===r.requestId})),o=null;if(null!=n&&n.bidder&&this.bidderConfig.isS2SBidder(n.bidder,this.isOutstream)){var a=this.prebidBids.filter((function(e){var r=i.find((function(t){return t.bidId===e.requestId}));return r&&!t.bidderConfig.isS2SBidder(r.bidder,t.isOutstream)}));if(a.length>0){var s=a.reduce((function(e,t){return((null==t?void 0:t.cpm)||0)>((null==e?void 0:e.cpm)||0)?t:e}));o=i.find((function(e){return e.bidId===s.requestId}))}}else o=n;if(o){var d=kr.getStrategy(o.bidder).getBidFloor(o);if(d){var u=this.bidFloorActionsTS.find((function(e){return e.prebidFloor===d}));if(u)return u}}}return this.bidFloorActionsTS[0]}}])}();var ni=function(e,t){return e||("number"==typeof t&&t>0?"".concat(Math.round(t),"s"):"default")},oi=function(){return o((function e(r){var i,n,o;t(this,e),this.id=r.bidId||r.adId||Math.random().toString(36).substr(2,9),this.adId=r.adId||this.id,this.adUnitCode=r.adUnitCode,this.bidder=r.bidder,this.bidderCode=r.bidderCode||r.bidder,this.cpm=r.cpm,this.originalCpm=r.originalCpm,this.mediaType=r.mediaType,this.videoCacheKey=r.videoCacheKey||null,this.ezVideoCacheKey=r.ezVideoCacheKey||this.videoCacheKey,this.cacheRegion=r.cacheRegion,this.vastUrl=r.vastUrl,this.ezCacheUrl=r.ezCacheUrl,this.mediaTypes=r.mediaTypes,this.adserverTargeting=r.adserverTargeting,this.requestId=r.requestId,this.responseTimestamp=r.responseTimestamp||Date.now(),this.ttl=r.ttl||300,this.source=r.source,this.appliedFloor=r.appliedFloor,this.nurl=r.nurl,this.durationTier=r.durationTier||null;var a="15s"===this.durationTier?15:30;this.duration=(null===(i=r.video)||void 0===i?void 0:i.durationSeconds)||(null===(n=r.meta)||void 0===n?void 0:n.durationSeconds)||r.duration||(null===(o=r.meta)||void 0===o?void 0:o.duration)||r.expectedDuration||a,this.playerId=null}),[{key:"cpmPerSec",get:function(){return this.duration>0?this.cpm/this.duration:this.cpm/30}},{key:"isExpired",value:function(){return Date.now()>this.responseTimestamp+1e3*this.ttl-3e3}},{key:"timeRemaining",value:function(){var e=Date.now(),t=this.responseTimestamp+1e3*this.ttl;return Math.floor((t-e)/1e3)}},{key:"isBetterThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(e&&(this.isExpired()&&!e.isExpired()||(this.isExpired()||!e.isExpired())&&!(t?this.cpmPerSec>e.cpmPerSec:this.cpm>e.cpm)))}}])}(),ai=function(){return o((function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t(this,e),this.items=[],this.maxSize=r,this._needsExpiredCheck=!0,this.useCpmPerSec=i}),[{key:"size",value:function(){return this._needsExpiredCheck&&this.removeExpired(),this.items.length}},{key:"isEmpty",value:function(){return this._needsExpiredCheck&&this.removeExpired(),0===this.items.length}},{key:"dequeue",value:function(){return this.isEmpty()?null:this.items.shift()}},{key:"peek",value:function(){return this.isEmpty()?null:this.items[0]}},{key:"enqueue",value:function(e){this._needsExpiredCheck&&this.removeExpired();var t=0;if(this.useCpmPerSec)for(;t<this.items.length&&this.items[t].cpmPerSec>e.cpmPerSec;)t++;else for(;t<this.items.length&&this.items[t].cpm>e.cpm;)t++;if(this.size()>=this.maxSize&&t>=this.maxSize)return{added:!1,removedBid:null};this.items.splice(t,0,e);var r=null;return this.size()>this.maxSize&&(r=this.items.pop()),{added:!0,removedBid:r}}},{key:"removeExpired",value:function(){var e=this,t=Or(this.items);return this.items=this.items.filter((function(e){return!e.isExpired()})),this._needsExpiredCheck=!1,t.filter((function(t){return!e.items.includes(t)}))}},{key:"markForExpiredCheck",value:function(){this._needsExpiredCheck=!0}},{key:"getHighestCPM",value:function(){return this.isEmpty()?0:this.items[0].cpm}},{key:"getLowestCPM",value:function(){return this.isEmpty()?0:this.items[this.size()-1].cpm}},{key:"getHighestCPMPerSec",value:function(){return this.isEmpty()?0:this.items[0].cpmPerSec}},{key:"getLowestCPMPerSec",value:function(){return this.isEmpty()?0:this.items[this.size()-1].cpmPerSec}},{key:"isWorthCaching",value:function(e){return this._needsExpiredCheck&&this.removeExpired(),this.size()<this.maxSize||(this.useCpmPerSec?(e.duration>0?e.cpm/e.duration:e.cpm/30)>this.getLowestCPMPerSec():e.cpm>this.getLowestCPM())}},{key:"getAllBids",value:function(){return this._needsExpiredCheck&&this.removeExpired(),Or(this.items)}},{key:"findBidByVideoCacheKey",value:function(e){return this._needsExpiredCheck&&this.removeExpired(),this.items.find((function(t){return t.videoCacheKey===e||t.ezVideoCacheKey===e||t.adId===e||t.id===e}))||null}},{key:"removeBid",value:function(e){this._needsExpiredCheck&&this.removeExpired();var t=this.items.findIndex((function(t){return t.videoCacheKey===e||t.ezVideoCacheKey===e||t.adId===e||t.id===e}));return-1===t?null:this.items.splice(t,1)[0]}}])}();const si=new(function(){return o((function e(){t(this,e),this.playerCaches={},this.bidIndex={},this.defaultMaxQueueSize=12,this.lastCleanup=Date.now(),this.cleanupInterval=15e3}),[{key:"normalizeCacheOptions",value:function(t,r,i){return"object"===e(t)&&null!==t?{useCpmPerSec:!!t.useCpmPerSec,durationTier:t.durationTier||null,duration:t.duration||null,maxSize:t.maxSize}:{useCpmPerSec:!!t,durationTier:r||null,duration:i||null,maxSize:void 0}}},{key:"getCacheKey",value:function(e,t){if(null==t||!t.useCpmPerSec)return e;var r=ni(t.durationTier,t.duration);return"".concat(e,"::").concat(r)}},{key:"getBidLookupKeys",value:function(e){if(!e)return[];var t=[e.videoCacheKey,e.ezVideoCacheKey,e.adId,e.id].filter(Boolean);return Or(new Set(t))}},{key:"indexBid",value:function(e,t){var r=this;this.getBidLookupKeys(e).forEach((function(e){r.bidIndex[e]=t}))}},{key:"deindexBid",value:function(e){var t=this;this.getBidLookupKeys(e).forEach((function(e){delete t.bidIndex[e]}))}},{key:"getPlayerCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultMaxQueueSize,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=this.normalizeCacheOptions(r,i,n),a=this.getCacheKey(e,o),s="number"==typeof t?t:this.defaultMaxQueueSize;if(!this.playerCaches[a]){var d=new ai(s,o.useCpmPerSec);return d.playerId=e,d.durationTier=o.useCpmPerSec?ni(o.durationTier,o.duration):null,d.useCpmPerSec=o.useCpmPerSec,this.playerCaches[a]=d,d}var u=this.playerCaches[a];if(u.useCpmPerSec!==o.useCpmPerSec){var l=new ai(u.maxSize,o.useCpmPerSec);return l.playerId=u.playerId,l.durationTier=o.useCpmPerSec?ni(o.durationTier,o.duration):null,l.useCpmPerSec=o.useCpmPerSec,u.getAllBids().forEach((function(e){return l.enqueue(e)})),this.playerCaches[a]=l,l}return u}},{key:"addBid",value:function(t,r){var i,n,o,a,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=new oi(r);d.playerId=t,this.maybeCleanup();var u,l="true"===(null===(i=__ez)||void 0===i||null===(i=i.tf)||void 0===i?void 0:i.vcpmsec),c=null;u="object"===e(s)&&null!==s?!!(c=s).isOutstream:!!s;var p=void 0!==(null===(n=c)||void 0===n?void 0:n.useCpmPerSec)?!!c.useCpmPerSec:u&&l,f=(null===(o=c)||void 0===o?void 0:o.durationTier)||d.durationTier||null,v=(null===(a=c)||void 0===a?void 0:a.duration)||d.duration||null,h=this.getCacheKey(t,{useCpmPerSec:p,durationTier:f,duration:v}),m=this.getPlayerCache(t,this.defaultMaxQueueSize,p,f,v);if(!m.isWorthCaching(d)){var y=p?"CPM/sec $".concat(d.cpmPerSec.toFixed(4)):"CPM $".concat(d.cpm);return Er("Bid ".concat(d.videoCacheKey," from ").concat(d.bidder," with ").concat(y," not worth caching for player ").concat(t)),!1}var b=m.enqueue(d);if(b.added){var g={playerId:t,cacheKey:h,bid:d};this.indexBid(d,g),b.removedBid&&this.deindexBid(b.removedBid);var _,w=p?"CPM/sec $".concat(d.cpmPerSec.toFixed(4)," (CPM $").concat(d.cpm,", ").concat(d.duration,"s)"):"CPM $".concat(d.cpm);if(Er("Cached ".concat(d.mediaType," bid ").concat(d.videoCacheKey," from ").concat(d.bidder," with ").concat(w," for player ").concat(t)),p)null===(_=window._ezaq)||void 0===_?void 0:_.ab_test_id}return b.added}},{key:"isWorthCaching",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getPlayerCache(e,this.defaultMaxQueueSize,r.useCpmPerSec,r.durationTier,r.duration).isWorthCaching(t)}},{key:"getTopBid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.maybeCleanup(!0),this.getPlayerCache(e,this.defaultMaxQueueSize,t.useCpmPerSec,t.durationTier,t.duration).peek()||null}},{key:"getTopNBids",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.maybeCleanup(!0),this.getPlayerCache(e,this.defaultMaxQueueSize,r.useCpmPerSec,r.durationTier,r.duration).getAllBids().slice(0,t)}},{key:"getBidByVideoCacheKey",value:function(e){var t=this.bidIndex[e];return t?t.bid.isExpired()?(this.removeBid(e),null):t.bid:null}},{key:"removeBid",value:function(e){var t=this.bidIndex[e];if(!t)return!1;var r=t.playerId,i=(t.cacheKey?this.playerCaches[t.cacheKey]:this.getPlayerCache(r)).removeBid(e);if(i){var n,o;if(this.deindexBid(i),"true"===(null===(n=__ez)||void 0===n||null===(n=n.tf)||void 0===n?void 0:n.vcpmsec)&&i.durationTier)null===(o=window._ezaq)||void 0===o?void 0:o.ab_test_id;return Er("Removed bid ".concat(e," from cache for player ").concat(r)),!0}return!1}},{key:"maybeCleanup",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Date.now();if(!(r-this.lastCleanup<this.cleanupInterval)||t){Er("Cleaning up expired bids from video bid cache"),this.lastCleanup=r,Object.values(this.playerCaches).forEach((function(e){e.markForExpiredCheck()}));var i=0;Object.entries(this.playerCaches).forEach((function(t){var r=Z(t,2),n=r[0],o=r[1].removeExpired();o.length>0&&(o.forEach((function(t){e.deindexBid(t)})),Er("Removed ".concat(o.length," expired bids from player ").concat(n)),i+=o.length)})),i>0&&Er("Total of ".concat(i," expired bids removed from cache"))}}},{key:"getStats",value:function(){var e=new Set(Object.values(this.bidIndex).map((function(e){return null==e?void 0:e.bid})).filter(Boolean)).size,t={totalPlayers:Object.keys(this.playerCaches).length,totalBids:e,playerStats:{}};return Object.entries(this.playerCaches).forEach((function(e){var r=Z(e,2),i=r[0],n=r[1],o=n.playerId||i,a="ez-o"===o||o.includes("outstream"),s=n.getAllBids();t.playerStats[i]={playerId:o,durationTier:n.durationTier||null,useCpmPerSec:!!n.useCpmPerSec,bidCount:n.size(),highestCPM:n.getHighestCPM(),lowestCPM:n.getLowestCPM(),highestCPMPerSec:a?n.getHighestCPMPerSec():void 0,lowestCPMPerSec:a?n.getLowestCPMPerSec():void 0,bids:s.map((function(e){return{bidder:e.bidder,cpm:e.cpm,cpmPerSec:e.cpmPerSec,duration:e.duration,durationTier:e.durationTier,videoCacheKey:e.videoCacheKey}}))}})),t}},{key:"setDefaultMaxQueueSize",value:function(e){"number"==typeof e&&e>0&&(this.defaultMaxQueueSize=e)}},{key:"setPlayerMaxQueueSize",value:function(e,t){if(!("number"!=typeof t||t<=0)){var r=this.getPlayerCache(e),i=r.maxSize;if(r.maxSize=t,i>t)for(;r.size()>t;){var n=r.items.pop();n&&this.deindexBid(n)}}}},{key:"getPlayerCacheCapacityPercentage",value:function(e){var t=this.getPlayerCache(e);return t&&0!==t.maxSize?Math.round(t.size()/t.maxSize*100):0}},{key:"getPlayerBidCount",value:function(e){var t=0,r=!1;return Object.values(this.playerCaches).forEach((function(i){i.playerId===e&&(r=!0,t+=i.size())})),r?t:this.getPlayerCache(e).size()}},{key:"isAnyCacheAtCapacityThreshold",value:function(){for(var e=0,t=Object.keys(this.playerCaches);e<t.length;e++){var r=t[e],i=this.playerCaches[r];if(Math.round(i.size()/i.maxSize*100)>=55)return!0}return!1}},{key:"isPlayerCacheAtCapacityThreshold",value:function(e){for(var t=!1,r=0,i=Object.values(this.playerCaches);r<i.length;r++){var n=i[r];if(n.playerId===e&&(t=!0,Math.round(n.size()/n.maxSize*100)>=55))return!0}return!t&&this.getPlayerCacheCapacityPercentage(e)>=55}}])}());function di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ui(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?di(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function li(){var e;"1"===new URLSearchParams(window.location.search).get("ez_vbf_debug")&&(e=console).log.apply(e,["[VideoBidFilter]"].concat(Array.prototype.slice.call(arguments)))}var ci=c(),pi="pbcache.ezoic.com";ci&&(pi=new URL(ci).host);var fi=new Map;function vi(e,t){if(!e||!t||"function"!=typeof t.then)return Promise.resolve(t);var r=fi.get(e);r||(r=new Set,fi.set(e,r));var i=Promise.resolve(t).finally((function(){var t=fi.get(e);t&&(t.delete(i),0===t.size&&fi.delete(e))}));return r.add(i),i}function hi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],r=new Set;return e.forEach((function(e){var i=fi.get(e);i&&i.forEach((function(e){r.has(e)||(r.add(e),t.push(e))}))})),t}function mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e)||0===e.length){var t=0;return fi.forEach((function(e){t+=e.size})),t}return hi(e).length}function yi(){return bi.apply(this,arguments)}function bi(){return bi=y(g().mark((function e(){var t,r,i,n,o,a,s=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:1200,0!==(r=hi(s.length>0&&void 0!==s[0]?s[0]:[])).length){e.next=5;break}return e.abrupt("return",{awaited:0,timedOut:!1});case 5:if(i=Promise.allSettled(r),t>0){e.next=10;break}return e.next=9,i;case 9:return e.abrupt("return",{awaited:r.length,timedOut:!1});case 10:return o=new Promise((function(e){n=setTimeout((function(){return e("timeout")}),t)})),e.next=13,Promise.race([i.then((function(){return"settled"})),o]);case 13:return a=e.sent,clearTimeout(n),e.abrupt("return",{awaited:r.length,timedOut:"timeout"===a});case 16:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function gi(e){return e?Gr(e.ezVideoCacheKey)?e.ezVideoCacheKey:Gr(e.videoCacheKey)?e.videoCacheKey:null:null}function _i(e,t,r){return wi.apply(this,arguments)}function wi(){return(wi=y(g().mark((function e(t,r,i){var n,o,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,o=setTimeout((function(){return n.abort()}),i),e.prev=2,e.next=5,fetch(t,ui(ui({},r),{},{signal:n.signal}));case 5:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,clearTimeout(o),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[2,,7,10]])})))).apply(this,arguments)}function Bi(e){var t=e.adserverTargeting||{},r=t.hb_cache_host||null,i=t.hb_cache_path||null,n=null,o=null;for(var a in Gr(t.hb_uuid)?n=t.hb_uuid:Gr(t.hb_cache_id)?n=t.hb_cache_id:o=t.hb_uuid||t.hb_cache_id||null,t)if(!r&&a.startsWith("hb_cache_host"))r=t[a];else if(!i&&a.startsWith("hb_cache_path"))i=t[a];else if(!n&&(a.startsWith("hb_uuid")||"hb_cache_id"===a)){var s=t[a];Gr(s)?n=s:!o&&s&&(o=s)}return n||(n=gi(e)),!n&&o&&li("Ignoring non-UUID S2S cache key: ".concat(o)),{s2sCacheHost:r,s2sCachePath:i,s2sCacheUuid:n}}function ki(e){try{if(!e||"string"!=typeof e)return!1;if(!e.startsWith("data:text/xml;base64,"))return!1;var t=e.split(",")[1],r=atob(t.split("?")[0]);return r.trim().startsWith("<")&&(r.includes("<VAST")||r.includes("<vast")||r.includes("<Vast")||r.includes("<?xml"))}catch(e){return!1}}function Pi(e){if(!e)return{vastXml:null,contentFound:!1};if(e.vastXml)return{vastXml:e.vastXml,contentFound:!0};if(e.vastUrl){if(ki(e.vastUrl))try{li("Found base64 encoded VAST XML in vastUrl for bid from ".concat(e.bidder));var t=atob(e.vastUrl.split(",")[1].split("?")[0]);return e.vastXml=t,{vastXml:t,contentFound:!0}}catch(e){li("Error decoding base64 vastUrl: ".concat(e.message))}li("Creating VAST wrapper for bid from ".concat(e.bidder," with vastUrl"));var r=(i=e.vastUrl,o=(n=(n=e.vastImpUrl)&&(Array.isArray(n)?n:[n]))?n.map((function(e){return"<Impression><![CDATA[".concat(e,"]]></Impression>")})).join(""):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(i,"]]></VASTAdTagURI>\n        ").concat(o,"\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>"));return e.vastXml=r,{vastXml:r,contentFound:!0}}var i,n,o;return{vastXml:null,contentFound:!1}}function Si(e){return Oi.apply(this,arguments)}function Oi(){return(Oi=y(g().mark((function e(t){var r,i,n,o,a,s,d;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return li("Cannot cache bid externally, missing required data (bid is null or undefined)"),e.abrupt("return",null);case 3:if(r=Pi(t),i=r.vastXml,r.contentFound){e.next=7;break}return li("Cannot cache bid externally, no VAST content found",t),e.abrupt("return",null);case 7:return e.prev=7,n={puts:[{type:"xml",value:i,ttlseconds:Number(t.ttl)+15}]},e.next=11,_i(ci,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},5e3);case 11:if((o=e.sent).ok){e.next=14;break}throw new Error("HTTP error ".concat(o.status));case 14:return e.next=16,o.json();case 16:if((a=e.sent)&&a.responses&&a.responses.length){e.next=19;break}throw new Error("Invalid response from cache server");case 19:if(Gr(s=a.responses[0].uuid)){e.next=22;break}throw new Error("Invalid cache uuid returned by cache server: ".concat(s));case 22:return d={cacheKey:s},a.region?(d.cacheRegion=a.region,li("Successfully cached bid externally, cache key: ".concat(s,", region: ").concat(a.region))):li("Successfully cached bid externally, cache key: ".concat(s)),e.abrupt("return",d);case 27:return e.prev=27,e.t0=e.catch(7),"AbortError"===e.t0.name?li("Cache request timed out for bid from ".concat(t.bidder)):li("Error caching bid externally: ".concat(e.t0.message)),e.abrupt("return",null);case 31:case"end":return e.stop()}}),e,null,[[7,27]])})))).apply(this,arguments)}function Ci(e,t,r){if(!e||!Gr(t))return t&&li("Skipping targeting update due to invalid cache uuid: ".concat(t)),e;if(e.videoCacheKey=t,e.ezVideoCacheKey=t,r){e.cacheRegion=r;var i=new URL(ci),n="".concat(r,"-").concat(i.host);e.ezCacheUrl="".concat(i.protocol,"//").concat(n).concat(i.pathname,"?uuid=").concat(t)}if(e.adserverTargeting){e.adserverTargeting.hb_cache_id=t,e.adserverTargeting.hb_uuid=t;var o=new URL(ci);e.adserverTargeting.hb_cache_host=o.host,e.adserverTargeting.hb_cache_path=o.pathname}return e}function xi(e){return Fi.apply(this,arguments)}function Fi(){return(Fi=y(g().mark((function t(r){var i;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Si(r);case 2:return(i=t.sent)&&"object"===e(i)?Ci(r,i.cacheKey,i.cacheRegion):Ci(r,i),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zi(e){return function(e){return!e.vastUrl||!!e.vastUrl.startsWith("blob:")||!!ki(e.vastUrl)}(e)||function(e){return"s2s"!==e.source&&e.vastXml&&e.vastUrl}(e)}function Ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return e?e.length>t?"".concat(e.substring(0,t),"..."):e:""}function Ii(e){return ji.apply(this,arguments)}function ji(){return(ji=y(g().mark((function e(t){var r,i,n,o,a,s,d;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.vastUrl||!t.vastUrl.includes(pi)){e.next=11;break}if(r=new URL(t.vastUrl),(i=r.searchParams.get("uuid"))&&Gr(i)){e.next=6;break}return li("Could not extract valid cache key from pbcache URL for ".concat(t.bidder)),e.abrupt("return",!1);case 6:return Ci(t,i),t.ezCacheUrl=t.vastUrl,t.ezVideoCacheKey=i,li("Using existing pbcache URL as ezCacheUrl for ".concat(t.bidder)),e.abrupt("return",!0);case 11:if(!t.ezCacheUrl){e.next=14;break}return li("ezCacheUrl already set for ".concat(t.bidder,": ").concat(Ai(t.ezCacheUrl))),e.abrupt("return",!0);case 14:if("s2s"!==t.source){e.next=23;break}if(n=Bi(t),o=n.s2sCacheHost,a=n.s2sCachePath,s=n.s2sCacheUuid,o&&a&&s){e.next=19;break}return li("S2S bid from ".concat(t.bidder," missing cache targeting keys (host=").concat(o,", path=").concat(a,", uuid=").concat(s,") - cannot use this bid")),e.abrupt("return",!1);case 19:return t.ezCacheUrl="https://".concat(o).concat(a,"?uuid=").concat(s),t.ezVideoCacheKey=s,li("S2S bid from ".concat(t.bidder,", constructed ezCacheUrl from targeting: ").concat(Ai(t.ezCacheUrl))),e.abrupt("return",!0);case 23:if(!zi(t)){e.next=35;break}return e.next=26,xi(t);case 26:if(d=gi(t)){e.next=30;break}return li("External caching failed for ".concat(t.bidder,"; no valid cache uuid")),e.abrupt("return",!1);case 30:return t.ezVideoCacheKey=d,t.videoCacheKey=d,t.ezCacheUrl||(t.ezCacheUrl="".concat(ci,"?uuid=").concat(d)),li("Cached externally, set ezCacheUrl for ".concat(t.bidder,": ").concat(Ai(t.ezCacheUrl))),e.abrupt("return",!0);case 35:return t.ezCacheUrl=t.vastUrl,li("Using bidder vastUrl as ezCacheUrl for ".concat(t.bidder,": ").concat(Ai(t.ezCacheUrl))),e.abrupt("return",!0);case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ti(){return(Ti=y(g().mark((function e(t){var r,i,n,o,a,s,d,u,l,c,p,f,v,h;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return li("bid is null or undefined"),e.abrupt("return",t);case 3:if(a=Ri(t.adUnitCode)){e.next=6;break}return e.abrupt("return",t);case 6:if((s=(null===(r=__ez)||void 0===r||null===(r=r.vhb)||void 0===r?void 0:r.breaks[t.adUnitCode])||(null===(i=__ez)||void 0===i||null===(i=i.vhb)||void 0===i?void 0:i.floatingBreaks[t.adUnitCode]))&&!t.mediaTypes&&"video"===t.mediaType&&(t.mediaTypes={},t.mediaTypes.video=s.prebidParams),d=function(){var e,r,i,n=null===(e=t.mediaTypes)||void 0===e?void 0:e.video,o="number"==typeof(null==n?void 0:n.maxduration)?n.maxduration:null,a="number"==typeof(null==n?void 0:n.minduration)?n.minduration:null,s=(null===(r=t.video)||void 0===r?void 0:r.durationSeconds)||(null===(i=t.meta)||void 0===i?void 0:i.durationSeconds)||o||a||null;!t.duration&&s&&(t.duration=s),!t.expectedDuration&&s&&(t.expectedDuration=s),!t.durationTier&&s&&(t.durationTier="".concat(Math.round(s),"s"))},!Ei(t)){e.next=12;break}return li("Bid from ".concat(t.bidder," with CPM $").concat(t.cpm," is excluded due to advertiser rule for player ").concat(a)),e.abrupt("return",t);case 12:if(u="true"===(null===(n=__ez)||void 0===n||null===(n=n.tf)||void 0===n?void 0:n.vcpmsec),l="boolean"==typeof(null==s?void 0:s.isOutstream)?s.isOutstream:"ez-o"===a||a.includes("outstream")||(null===(o=t.adUnitCode)||void 0===o?void 0:o.includes("outstream")),u&&l&&"video"===t.mediaType&&(d(),t.duration=t.duration||(null===(c=t.meta)||void 0===c?void 0:c.duration)||t.expectedDuration||(null==s?void 0:s.expectedDuration)||30,null!=s&&s.durationTier&&(t.durationTier=s.durationTier)),p={useCpmPerSec:u&&l,durationTier:t.durationTier,duration:t.duration},!(si.isWorthCaching(a,t,p)&&t.cpm>0)){e.next=36;break}if(u&&l&&t.duration?(f=t.cpm/t.duration,li("Adding high value bid from ".concat(t.bidder," with CPM $").concat(t.cpm," (").concat(t.duration,"s, $").concat(f.toFixed(4),"/sec) to priority queue for player ").concat(a))):li("Adding high value bid from ".concat(t.bidder," with CPM $").concat(t.cpm," to priority queue for player ").concat(a)),"video"!==t.mediaType){e.next=32;break}return e.next=21,Ii(t);case 21:if(e.sent){e.next=24;break}return e.abrupt("return",t);case 24:if(v=gi(t)){e.next=28;break}return li("Skipping video bid cache insert for ".concat(t.bidder,"; invalid cache uuid (videoCacheKey=").concat(t.videoCacheKey,", ezVideoCacheKey=").concat(t.ezVideoCacheKey,")")),e.abrupt("return",t);case 28:t.videoCacheKey=v,t.ezVideoCacheKey=v,e.next=33;break;case 32:"banner"===t.mediaType?("s2s"!==t.source||t.ad||t.adUrl||(null!=t&&null!==(h=t.adserverTargeting)&&void 0!==h&&h.hb_adurl?(t.adUrl=t.adserverTargeting.hb_adurl,li("Set adUrl for multiformat banner bid from ".concat(t.bidder,": ").concat(Ai(t.adUrl)))):li("S2S banner bid from ".concat(t.bidder," missing cache targeting keys - cannot set adUrl"))),li("Received ".concat(t.mediaType," bid for player ").concat(a))):li("Received ".concat(t.mediaType," bid for player ").concat(a));case 33:si.addBid(a,t,{isOutstream:l,useCpmPerSec:u&&l,durationTier:t.durationTier,duration:t.duration}),e.next=40;break;case 36:__ez.vbf.filteredBidCount||(__ez.vbf.filteredBidCount={}),__ez.vbf.filteredBidCount[a]||(__ez.vbf.filteredBidCount[a]=0),__ez.vbf.filteredBidCount[a]++,li("Skipping bid from ".concat(t.bidder," with CPM $").concat(t.cpm," for player ").concat(a,", total bids filtered: ").concat(__ez.vbf.filteredBidCount[a]));case 40:return e.abrupt("return",t);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(e){if(!e)return null;if(e.startsWith("ez-"))return e.split("$")[0];if(e.includes("prebid-video-")){var t=e.match(/prebid-video-(instream|outstream)([^_]*)/);if(t)return"outstream"===t[1]?"ez-o":"ez-i"}return e}function Ei(e){if(!e||!e.meta)return!1;var t=[];if("undefined"!=typeof __advertiserRule&&(t=__advertiserRule),void 0!==e.meta.advertiserDomains&&t.length>0){var r=e.meta.advertiserDomains,i=function(e,t,r){for(var i=0;i<e;i++)if(t[i].length>0)for(var n=0;n<r.length;n++)if(t[i].includes(r[n]))return!0;return!1}(t.length,t,r);if(!0===i)return!0}return!1}const Ui={initVideoBidFilter:function(){return li("Initializing video bid filter with VideoBidCache integration"),{getCache:function(){return si},registerPendingCachePromise:vi,awaitPendingForAdUnitCodes:yi,getPendingCacheCount:mi}},videoBidCache:si,cacheExternally:Si,getVastToCache:Pi,cacheExternallyAndUpdateTargeting:xi,cacheOrFilterBid:function(e){return Ti.apply(this,arguments)}};function Mi(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Di(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Di(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Di(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function Li(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Vi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Li(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qi(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Ni=new WeakSet,Hi=function(){return o((function e(){var r,i,n,o;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,o=Ni),o.add(n),(null!==(r=window.__ezInstream)&&void 0!==r&&null!==(r=r.apsSlot)&&void 0!==r&&r.slotID||null!==(i=window.__ezOutstream)&&void 0!==i&&null!==(i=i.apsSlot)&&void 0!==i&&i.slotID)&&qi(Ni,this,$i).call(this),this.videoGPIDDefined=[]}),[{key:"fetchBids",value:function(e,t,r){return e.hadAPSBid?Promise.resolve():qi(Ni,this,Gi).call(this,e,t)}}])}();function Gi(e,t){var r,i,n=this,o=e.videoAdBidFloor;if((null===(r=e.bidFloorActions)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.apsFloor)>0&&(o=e.bidFloorActions[0].apsFloor),(null===(i=e.bidFloorActionsTS)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.apsFloor)>0&&(o=e.bidFloorActionsTS[0].apsFloor),void 0!==e.videoAdBidFloorAmazon&&e.videoAdBidFloorAmazon>0&&(o=e.videoAdBidFloorAmazon),Er("unmodified bid floor"+e.videoAdBidFloorUnmodified+"vid floor"+o+" bidcount "+e.apsBidCount),e.apsBidCount>0)return Er("Already requested APS bid for this adBreak, returning"),Promise.reject();var a=30;e&&e.prebidParams&&e.prebidParams.hasOwnProperty("maxduration")&&(a=e.prebidParams.maxduration);var s=e.isOutstream?__ezOutstream:__ezInstream;return s.apsSlot.slotID?(qi(Ni,this,$i).call(this),Er("Setting up APS"),new Promise(function(){var r=y(g().mark((function r(i,d){var u,l,c,p,f,v,h,m,y,b,_;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Rr("ez_aps",2e3,100).then((function(){return!0})).catch((function(){return!1}));case 2:if(r.sent){r.next=6;break}return d("APS timed out"),r.abrupt("return");case 6:if(u=function(t){return Vi({id:t.slotID,video:Vi(Vi({startdelay:e.prebidParams.startdelay,plcmt:e.prebidParams.plcmt,pos:e.prebidParams.pos,w:e.prebidParams.w,h:e.prebidParams.h},e.prebidParams.minduration&&{minduration:e.prebidParams.minduration}),e.prebidParams.maxduration&&{maxduration:e.prebidParams.maxduration}),sizes:t.sizes},o>0&&{bidfloor:Math.round(100*o),bidfloorcur:"USD"})},(l=s.apsSlot).slotID){r.next=12;break}return Er("No APS slot ID"),d("No APS slot ID"),r.abrupt("return");case 12:if(c=[],void 0!==s.allApsSlots&&s.allApsSlots.length>0){for(p=0;p<s.allApsSlots.length;p++)(f=s.allApsSlots[p]).Duration<=a&&c.push(u(f.Slot));0===c.length&&c.push(u(l))}else c.push(u(l));r.prev=15,ez_aps.record("ad/slot/define",{imp:c}),Er("APS requesting bids for key =",e.key),h=c.map((function(e){return e.id})),m={},y=Mi(h);try{for(y.s();!(b=y.n()).done;)_=b.value,n.videoGPIDDefined.includes(_)||(m[_]=e.gpid)}catch(e){y.e(e)}finally{y.f()}return ez_aps.record("ad/gpid/define",{map:m}),(v=n.videoGPIDDefined).push.apply(v,Or(Object.keys(m))),r.next=26,qi(Ni,n,Wi).call(n,c,h,e,t,true);case 26:if(!r.sent.success){r.next=31;break}return Er("APS bid successful at floor:",o),i(),r.abrupt("return");case 31:Er("No APS bids received for adBreak"),i(),r.next=39;break;case 35:r.prev=35,r.t0=r.catch(15),Er("Error during APS bidding:",r.t0),i();case 39:case"end":return r.stop()}}),r,null,[[15,35]])})));return function(e,t){return r.apply(this,arguments)}}())):(Er("No APS slots"),Promise.reject())}function Wi(e,t,r,i,n){return Ki.apply(this,arguments)}function Ki(){return(Ki=y(g().mark((function e(t,r,i,n,o){var a,s,d,u,l,c,p,f,v,h,m,y,b,_,w,B,k,P,S,O;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){if("string"!=typeof e)return 30;var t=e.match(/(\d+)-(\d+)seconds/);return t?parseInt(t[2],10):30},e.prev=1,e.next=4,ez_aps.record("ad/slot/define",{imp:t});case 4:return l=new Promise((function(e,t){u=setTimeout((function(){t(new Error("APS bid timeout"))}),n)})),e.prev=5,e.next=8,Promise.race([ez_aps.record("ad/targeting/fetch",{itemIds:r,params:{iid1:i.impressionId}}),l]);case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(5),Er("APS request failed:",e.t0.message||String(e.t0)),clearTimeout(u),e.abrupt("return",{success:!1});case 16:clearTimeout(u),Er("APS fetch completed"),c=ez_aps.read("ad/targeting"),p=Or(c.keys()).filter((function(e){return r.includes(e)})),null===(s=window.__ezDevtools)||void 0===s||null===(d=s.addAmazonImpression)||void 0===d||d.call(s,{impressionId:i.impressionId,items:t.map((function(e){return{slot:e,targetingData:Object.fromEntries((null==c?void 0:c.get(e.id))||[])}}))}),f=Mi(p),e.prev=22,f.s();case 24:if((v=f.n()).done){e.next=65;break}if(h=v.value,!o){e.next=57;break}if(m=void 0,y=[],!(b=c.get(h))||!b.has("amznbid")){e.next=49;break}if(e.prev=31,_=.01,"undefined"==typeof __ez||void 0===__ez.fads||"function"!=typeof __ez.fads.getAmazonBidFromHash){e.next=37;break}return e.next=36,__ez.fads.getAmazonBidFromHash(b.get("amznbid"));case 36:_=e.sent;case 37:"undefined"!=typeof __ez&&void 0!==__ez.orca&&"function"==typeof __ez.orca.getAmazonBid&&(_=__ez.orca.getAmazonBid(b.get("amznbid"))),w="",B=Mi(b);try{for(B.s();!(k=B.n()).done;)P=k.value,w+="&".concat(P[0],"=").concat(P[1])}catch(e){B.e(e)}finally{B.f()}S={slotID:h,amzniid:b.get("amzniid"),amznbid:b.get("amznbid"),bidVal:_,bps:_/a(h),encodedQsParams:encodeURIComponent(w)},y.push(S),(!m||S.bps>m.bps)&&(m=S),e.next=49;break;case 46:e.prev=46,e.t1=e.catch(31),Er("Error processing APS bid",e.t1);case 49:if(!m){e.next=55;break}return Er("Highest APS bid returned: ",m),i.apsBid=m,i.apsBidCount=1,i.hadAPSBid=!0,e.abrupt("return",{success:!0});case 55:e.next=63;break;case 57:if(!(O=c.get(h))||!O.has("amznbid")){e.next=63;break}return i.apsBid={slotID:h,amznbid:O.get("amznbid")},i.apsBidCount=1,i.hadAPSBid=!0,e.abrupt("return",{success:!0});case 63:e.next=24;break;case 65:e.next=70;break;case 67:e.prev=67,e.t2=e.catch(22),f.e(e.t2);case 70:return e.prev=70,f.f(),e.finish(70);case 73:return e.abrupt("return",{success:!1});case 76:return e.prev=76,e.t3=e.catch(1),Er("Error in fetchAPSBids:",e.t3),e.abrupt("return",{success:!1});case 80:case"end":return e.stop()}}),e,null,[[1,76],[5,10],[22,67,70,73],[31,46]])})))).apply(this,arguments)}function $i(){"undefined"==typeof __ez||void 0===__ez.fads||void 0===__ez.fads.amznH2Bid||__ez.fads.amznH2Bid.loaded||"function"==typeof __ez.fads.loadLibrary&&__ez.fads.loadLibrary(__ez.fads.amznH2Bid.url,"amznH2Bid")}function Ji(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Yi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ji(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qi(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Zi=new WeakSet,Xi=function(){return o((function e(r){var i,n;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=Zi),n.add(i),this.key=r.key,this.gpid=r.gpid,this.breakID=r.breakID,this.prebidParams=r.prebidParams,this.videoAdBidFloor=r.videoAdBidFloor,this.isOutstream=r.isOutstream,this.isRewarded=r.isRewarded,this.params=r.params,this.timeOffset=r.timeOffset,this.adBreakPosition=r.adBreakPosition,this.playerId=r.playerId,this.videoLanguage=r.videoLanguage,this.isRewarded&&(this.prebidParams=this.prebidParams||{},this.prebidParams.ext=this.prebidParams.ext||{},this.prebidParams.ext.rewarded=1,this.prebidParams.ext.videotype="rewarded",this.gpid&&!this.gpid.includes("-rewarded")&&(this.gpid+="-rewarded")),this.reset()}),[{key:"withTTDConfiguration",value:function(){return delete this.adUnit.mediaTypes.video.placement,this}},{key:"withPlacement",value:function(){return this.adUnit.mediaTypes.video.placement=Qi(Zi,this,tn).call(this,this.prebidParams.plcmt),this}},{key:"withOutstreamContext",value:function(){return 1!==this.prebidParams.plcmt&&(this.adUnit.mediaTypes.video.context="outstream"),this}},{key:"withMultiFormat",value:function(){return this.adUnit.mediaTypes=Yi(Yi({},this.adUnit.mediaTypes),{},{banner:{sizes:[[300,250]],renderer:{url:"https://cdn.jsdelivr.net/npm/in-renderer-js@1/dist/in-renderer.umd.min.js",render:function(e){(new window.InRenderer).render("ez-video-container",e,{onImpressionViewable:function(){window.dispatchEvent(new CustomEvent("ezVideoAdRendered",{detail:{adId:e.adId,bid:e}}))}})}}}}),this}},{key:"withNative",value:function(){var e=[300,250];return this.adUnit.mediaTypes=Yi(Yi({},this.adUnit.mediaTypes),{},{native:{adTemplate:'<div style="width: 300px; height:250px; background-image: url(##hb_native_asset_id_1##);"></div>',ortb:{assets:[{id:1,required:1,img:{type:3,w:e[0],h:e[1]}}]},renderer:{url:"https://cdn.jsdelivr.net/npm/in-renderer-js@1/dist/in-renderer.umd.min.js",render:function(e){(new window.InRenderer).render("ez-video-container",e,{onImpressionViewable:function(){window.dispatchEvent(new CustomEvent("ezVideoAdRendered",{detail:{adId:e.adId,bid:e}}))}})}}}}),this}},{key:"withFloor",value:function(e){return e>0&&(this.adUnit.floors={currency:"USD",schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":e}},this.adUnit.mediaTypes.banner&&(this.adUnit.floors.values["banner|*"]=e),this.adUnit.mediaTypes.native&&(this.adUnit.floors.values["native|*"]=e)),this}},{key:"withS2SFloor",value:function(e,t){if(e&&e.length>0){var r=this.adUnit.ortb2Imp||{};r.ext=r.ext||{},r.ext.prebid=r.ext.prebid||{},t&&(r.ext.prebid.is_rewarded_inventory=1),1===e.length?(r.bidfloor=e[0],r.bidfloorcur="USD",r.ext.prebid.floors={floormin:e[0],floormincur:"USD"}):r.ext.prebid.floors={tfl:e},this.adUnit.ortb2Imp=r}return this}},{key:"withBidders",value:function(e){return this.adUnit.bids=e,this}},{key:"withBidPoolId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.adUnit.bidPoolId=Qi(Zi,this,en).call(this,e,t,r,i),this}},{key:"build",value:function(){return this.cloneAdUnit(this.adUnit)}},{key:"cloneAdUnit",value:function(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(null===t||"object"!==e(t))return t;if(i.has(t))return i.get(t);if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t)){var n=[];return i.set(t,n),t.forEach((function(e,t){n[t]=r.cloneAdUnit(e,i)})),n}var o={};return i.set(t,o),Object.keys(t).forEach((function(e){o[e]=r.cloneAdUnit(t[e],i)})),o}},{key:"updateAdUnitForAbTests",value:function(){var e,t;if("true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vappp)&&!this.isOutstream){var r=getPlayerById(this.playerId);null!=r&&r.isCurrentlyFloating()&&3===this.adUnit.mediaTypes.video.pos&&(this.adUnit.mediaTypes.video.pos=2)}"1"===(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vappp)&&(this.adUnit.mediaTypes.video.pos=1)}},{key:"reset",value:function(){return this.adUnit={code:this.key,ortb2Imp:{ext:{gpid:this.gpid},rwdd:this.isRewarded?1:0},mediaTypes:{video:Be(this.prebidParams)},bids:[]},this}}])}();function en(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.isOutstream?"prebid-video-outstream":"prebid-video-instream"+this.adBreakPosition,o=t?"-placement":"",a=i?"-s2s":"";return"".concat(n).concat(o).concat(r).concat(a,"_").concat(e)}function tn(e){return we(we(we({},1,1),2,1),4,5)[e]||5}var rn=function(){return o((function e(){t(this,e)}),[{key:"calculate",value:function(e,t,r){throw new Error("calculate method must be implemented")}},{key:"getMinFloorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==e.minFloor?e.minFloor:Tr()}},{key:"roundByTier",value:function(e){return e<=Tr()?Tr():e<.5?.01*Math.ceil(e/.01):e<1?.1*Math.round((e+1e-6)/.1):e<5?.25*Math.round((e+1e-6)/.25):e<10?.5*Math.round((e+1e-6)/.5):Math.round(e+1e-6)}}])}();function nn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nn=function(){return!!e})()}var on=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,nn()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return Math.max(n,e);var o=(t-1)/2,a=e+e/o*(r-o);return Math.max(n,a)}}])}(rn);function an(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(an=function(){return!!e})()}var sn=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,an()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i),o=e/Math.pow(2,(t-1)/2)*Math.pow(2,r);return Math.max(n,o)}}])}(rn);function dn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dn=function(){return!!e})()}var un=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,dn()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i),o=Math.floor(t/2),a=e/Math.pow(1.5,o)*Math.pow(1.5,r);return Math.max(n,a)}}])}(rn);function ln(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ln=function(){return!!e})()}var cn=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,ln()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return Math.max(n,e);var o=.5*e,a=o+(3*e-o)*Math.pow(r/(t-1),.5);return Math.max(n,a)}}])}(rn);function pn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pn=function(){return!!e})()}var fn=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,pn()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return Math.max(n,e);var o=.5*e,a=o+(3*e-o)*Math.pow(r/(t-1),2);return Math.max(n,a)}}])}(rn);function vn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vn=function(){return!!e})()}var hn=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,vn()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i.bidHistory,o=i.bidder,a=i.strategyName,s=this.getMinFloorValue(i);if(!n||0===Object.keys(n).length)return Math.max(s,e);var d=36e5,u=Date.now();if(o&&n[o]&&a===jr.HISTORICAL_BIDDER)return this.calculateBidderSpecificFloor(o,n[o],e,t,r,u,d,i);var l=0,c=0;Object.values(n).forEach((function(e){e.bids.forEach((function(e){if(u-e.timestamp<=d){var t=e.wasWinner?2:1;c+=e.cpm*t,l+=t}}))}));var p=l>0?c/l:e,f=Math.floor(t/2);if(r===f)return Math.max(s,p);var v=1.5*p/(t-1);return Math.max(s,Math.max(.5*p,p+(r-f)*v))}},{key:"calculateBidderSpecificFloor",value:function(e,t,r,i,n,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},d=0,u=0,l=0,c=this.getMinFloorValue(s),p=t.bids.filter((function(e){return o-e.timestamp<=a}));if(0===p.length)return Math.max(c,r);p.forEach((function(e){var t=e.wasWinner?2:1;u+=e.cpm*t,d+=t,e.wasWinner&&l++}));var f,v=u/d;f=(l/=p.length)>.7?.9*v:l>.3?.75*v:.6*v,f=Math.max(.8*r,f);var h=Math.floor(i/2);if(n===h)return Math.max(c,f);var m=1.5*f/(i-1);return Math.max(c,Math.max(.5*f,f+(n-h)*m))}}])}(rn);function mn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mn=function(){return!!e})()}var yn=function(e){function r(){return t(this,r),e=this,n=arguments,i=O(i=r),S(e,mn()?Reflect.construct(i,n||[],O(e).constructor):i.apply(e,n));var e,i,n}return x(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return this.roundByTier(Math.max(n,e));if(0===r)return this.roundByTier(n);if(r>=t-1)return this.roundByTier(Math.max(n,e));var o=r/(t-1),a=e*Math.pow(o,3),s=Math.max(n,a);return this.roundByTier(s)}}])}(rn);function bn(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var gn,_n=function(){function e(){t(this,e)}return o(e,null,[{key:"getStrategy",value:function(t){return bn(e,this,wn)._[t]||new on}},{key:"hasStrategy",value:function(t){return t in bn(e,this,wn)._}}])}(),wn={_:we(we(we(we(we(we(we(we({},jr.UNIFORM,new on),jr.EXPONENTIAL,new sn),jr.GEOMETRIC,new un),jr.HIGH_END,new cn),jr.LOW_END,new fn),jr.HISTORICAL,new hn),jr.HISTORICAL_BIDDER,new hn),jr.RAMP_UP,new yn)},Bn=function(){function e(){t(this,e)}return o(e,null,[{key:"determineFloorSendingLogic",value:function(t,r,i){var n,o,a,s,d,u,l,c,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h="ez-o"===i,m="undefined"!=typeof __ez&&__ez.tf&&__ez.tf.vafsl;if(m){var y=Cn.call(e,m,i,h,p,f,r);if(y)return y}if(null!=t&&null!==(n=t.bidFloorActions)&&void 0!==n&&null!==(n=n[0])&&void 0!==n&&n.prebidFloor)return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0};if(null!=t&&null!==(o=t.bidFloorActionsTS)&&void 0!==o&&null!==(o=o[0])&&void 0!==o&&o.prebidFloor)return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0};if(h&&null!==(a=window.__ezOutstream)&&void 0!==a&&null!==(a=a.vatc)&&void 0!==a&&a.afaf)return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0};if(!h&&null!==(s=window.__ezInstream)&&void 0!==s&&null!==(s=s.vatc)&&void 0!==s&&s.afaf)return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0};if(!h&&"true"===(null===(d=window.__ez)||void 0===d||null===(d=d.tf)||void 0===d?void 0:d.vaffa))return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0};if(h&&null!==(u=window.__ez)&&void 0!==u&&null!==(u=u.tf)&&void 0!==u&&u.vassf)return p&&v?v.isS2SBidder(p,h)?(Er("[VASSF TEST] Not sending floors to S2S bidder ".concat(p," for outstream")),{shouldActuallySendBidFloor:!1,shouldForceFloors:!1}):(Er("[VASSF TEST] Sending floors to non-S2S bidder ".concat(p," for outstream")),{shouldActuallySendBidFloor:!0,shouldForceFloors:!0}):{shouldActuallySendBidFloor:!0,shouldForceFloors:!0};var b="undefined"!=typeof __ez&&("1"===(null===(l=__ez)||void 0===l||null===(l=l.tf)||void 0===l?void 0:l.vabmf)||"2"===(null===(c=__ez)||void 0===c||null===(c=c.tf)||void 0===c?void 0:c.vabmf)),g=!1;g=g||b;var _=si.isPlayerCacheAtCapacityThreshold(i)||g;return{shouldActuallySendBidFloor:!(!window.is_humix_app&&!_)||r,shouldForceFloors:_}}},{key:"getBidFloor",value:function(t,r){var i,n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((null===(i=t.adBreak)||void 0===i||null===(i=i.bidFloorActions)||void 0===i?void 0:i.length)>0){var u=r.shouldBidderSendMultipleFloors(d,t.isOutstream);if(u&&a>0){var l,c=t.adBreak.bidFloorActions.filter((function(e){return e.prebidFloor}));if(null!==(l=c[a-1])&&void 0!==l&&l.prebidFloor)return c[a-1].prebidFloor}else if(!u&&t.adBreak.bidFloorActions[0].prebidFloor)return t.adBreak.bidFloorActions[0].prebidFloor}if((null===(n=t.adBreak)||void 0===n||null===(n=n.bidFloorActionsTS)||void 0===n?void 0:n.length)>0){var p=r.shouldBidderSendMultipleFloors(d,t.isOutstream);if(p&&a>0){var f,v=t.adBreak.bidFloorActionsTS.filter((function(e){return e.prebidFloor}));if(null!==(f=v[a-1])&&void 0!==f&&f.prebidFloor)return v[a-1].prebidFloor}else if(!p&&t.adBreak.bidFloorActionsTS[0].prebidFloor)return t.adBreak.bidFloorActionsTS[0].prebidFloor}var h=function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(e,this,xn).call(this,t,d);h=h>=0?h:0,h=On.call(e,h,t.playerId,t.isOutstream,d);var m=jr.UNIFORM,y=zn.call(e,t.isOutstream);y&&jr[y]&&(m=jr[y]),m||(m=jr.UNIFORM),window.is_humix_app&&(h*=.3,m=jr.RAMP_UP);var b=_n.getStrategy(m),g={bidHistory:"undefined"!=typeof __ez&&__ez.vhb&&__ez.vhb.globalBidHistory?__ez.vhb.globalBidHistory:{},bidder:d,strategyName:m,minFloor:Tr(d,t.isOutstream)},_=s>0?s:1,w=a>=0?a:0,B=b.calculate(h,_,w,g);if(null!==(o=window.__ez)&&void 0!==o&&null!==(o=o.tf)&&void 0!==o&&o.vassf){var k=Fn.call(e,t,a,d);k&&(B=k)}return Math.max(Tr(d,t.isOutstream),B)}},{key:"getMultifloorFloors",value:function(t,r,i){for(var n,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=[],l={adBreak:t,playerId:i,videoAdBidFloor:arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,isOutstream:"ez-o"===i,shouldSendBidFloor:r,statSourceFloors:null!==(n=window.__ez)&&void 0!==n&&null!==(n=n.tf)&&void 0!==n&&n.vassf&&window.__ezStatSourceFloors||{},multiFloorStatSourceFloors:null!==(o=window.__ez)&&void 0!==o&&null!==(o=o.tf)&&void 0!==o&&o.vassf&&window.__ezMultiFloorStatSourceFloors||{}},c=0;c<d;c++){var p=e.getBidFloor(l,s,c,d,a);p<=0&&(p=.01),u.push(p)}return u}}])}();function kn(e){var t,r,i=e?null===(t=__ezOutstream)||void 0===t?void 0:t.vatc:null===(r=__ezInstream)||void 0===r?void 0:r.vatc;return(null==i?void 0:i.bcds)||"d"}function Pn(e,t,r,i){var n=si.getPlayerBidCount(t),o=An.call(gn,r),a=Mn.call(gn,i,r);if(n<=(o="core"!==a?Math.max(3,o-1):7))return e;var s=Dn.call(gn,a),d=s.inc,u=s.cap,l=1+d*(n-o);return e*Math.min(l,u)}function Sn(e,t,r,i,n){var o=si.getPlayerBidCount(t),a=7;"conservative"===n?"t"!==kn.call(gn,r)&&(a-=1):a=En.call(gn,i,r,e);var s=e;if(o>a){var d=Tn.call(gn,r),u=d.curve,l=d.inc,c=d.max;s=e*Rn.call(gn,u,l,o-a,c)}return s}function On(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n="undefined"!=typeof __ez&&__ez.tf&&__ez.tf.vafsl;if(n)return"split"===n&&i?Pn.call(gn,e,t,r,i):Sn.call(gn,e,t,r,i,n);var o=si.getPlayerBidCount(t);return o>=7?e*Math.min(1+.1*(o-7),1.75):e}function Cn(e,t,r,i,n,o){if("split"===e){var a=si.getPlayerBidCount(t),s=An.call(gn,r),d=a>=(s="core"!==Mn.call(gn,i,r)?Math.max(3,s-1):7);return{shouldActuallySendBidFloor:!!d||o,shouldForceFloors:d}}if("conservative"===e){var u=7;if("t"!==kn.call(gn,r)&&(u-=1),si.getPlayerBidCount(t)>=u)return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0}}else if(e){var l=En.call(gn,i,r,n);if(si.getPlayerBidCount(t)>l)return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0}}return null}function xn(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==r)return Er("No bidder specified, returning default floor: ".concat(e.videoAdBidFloor)),e.videoAdBidFloor;var i=Nr(r);return null!==(t=window.__ez)&&void 0!==t&&null!==(t=t.tf)&&void 0!==t&&t.vassf&&void 0!==e.statSourceFloors[i]?(Er("Using stat source floor for ".concat(r," (").concat(i,"): ").concat(e.statSourceFloors[i])),e.statSourceFloors[i]):(Er("No specific stat source floor found for ".concat(r," (").concat(i,"), returning default floor: ").concat(e.videoAdBidFloor)),e.videoAdBidFloor)}function Fn(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==i)return Er("No bidder specified, returning default floor: ".concat(e.videoAdBidFloor)),null;var n=Nr(i);if(null!==(r=window.__ez)&&void 0!==r&&null!==(r=r.tf)&&void 0!==r&&r.vassf&&void 0!==e.multiFloorStatSourceFloors[n]){Er("Using multi-floor stat source for ".concat(i," (").concat(n,"): ").concat(e.multiFloorStatSourceFloors[n]));var o=t%e.multiFloorStatSourceFloors[n].length;return e.multiFloorStatSourceFloors[n][o]}return Er("No specific multi-floor stat source found for ".concat(i," (").concat(n,"), returning default floor: ").concat(e.videoAdBidFloor)),null}function zn(e){return e?"undefined"!=typeof __ezOutstream&&__ezOutstream.vatc&&__ezOutstream.vatc.fs?__ezOutstream.vatc.fs:null:"undefined"!=typeof __ezInstream&&__ezInstream.vatc&&__ezInstream.vatc.fs?__ezInstream.vatc.fs:null}function An(e){var t,r,i=e?null===(t=__ezOutstream)||void 0===t?void 0:t.vatc:null===(r=__ezInstream)||void 0===r?void 0:r.vatc,n=7;switch(kn.call(gn,e)){case"v":n=4;break;case"r":n=5;break;case"m":n=6;break;default:n=7}return"d"!==((null==i?void 0:i.bcdsds)||"g")&&n<7&&n++,n}function In(e,t,r){var i;if(!e)return t;var n=__ez.vhb,o=Un.call(gn,r);if(!n||o<=3)return t;var a=null===(i=n.bidders)||void 0===i?void 0:i[e];return(a?a.bidsResponded/o:0)>=.6?Math.max(3,t-1):t}function jn(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,i=__ez.vhb;if(!i)return null;var n=null===(t=i.globalBidHistory)||void 0===t?void 0:t[e];if(!n||n.totalBids<6)return null;var o=n.winCount/n.totalBids,a=n.avgBid/r;return.6*o+.4*Math.min(a,2)}function Tn(e){return{curve:"lin",inc:.12,max:1.85}}function Rn(e,t,r,i){var n;return n="exp"===e?1+t*Math.pow(r,1.2):"log"===e?1+t*Math.log(r+1):1+t*r,Math.min(n,i)}function En(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,i=An.call(gn,t);i=In.call(gn,e,i,t);var n=kn.call(gn,t),o=e?jn.call(gn,e,r):null;return"t"===n&&null!==o&&o<.15&&(i+=1),i}function Un(e){var t,r,i,n;return e?null!==(t=null===(r=__ezOutstream)||void 0===r?void 0:r.AdIndex)&&void 0!==t?t:0:null!==(i=null===(n=__ezInstream)||void 0===n?void 0:n.AdIndex)&&void 0!==i?i:0}function Mn(e,t){var r,i=__ez.vhb;if(!i||!e)return"core";var n=null===(r=i.bidders)||void 0===r?void 0:r[e],o=Un.call(gn,t);if(!o||o<=3)return"core";var a=n?n.bidsResponded:0,s=o>0?a/o:0;return s<.05?"rare":s<.1?"peripheral":"core"}function Dn(e){return{core:{inc:.1,cap:1.75},peripheral:{inc:.125,cap:2},rare:{inc:.2,cap:2}}[e]||{inc:.1,cap:1.75}}function Ln(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}gn=Bn;var Vn=new WeakSet,qn=function(){return o((function e(r){var i,n;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=Vn),n.add(i),this.config=r,this.bidderConfig=new Jr,this.builder=new Xi(r),this.videoOnlyAdUnitConfigurations=[{type:"non-ttd",method:Ln(Vn,this,Kn),suffix:""},{type:"ttd",method:Ln(Vn,this,$n),suffix:"_ttd"},{type:"placement",method:Ln(Vn,this,Jn),suffix:""},{type:"outstream",method:Ln(Vn,this,Yn),suffix:Ar},{type:"outstream-placement",method:Ln(Vn,this,Qn),suffix:Ar}],this.multiformatAdUnitConfigurations=[{type:"multiformat-nonnative",method:Ln(Vn,this,Zn),suffix:""},{type:"multiformat-nonnative-placement",method:Ln(Vn,this,Xn),suffix:""},{type:"multiformat-allformats",method:Ln(Vn,this,eo),suffix:""},{type:"multiformat-allformats-placement",method:Ln(Vn,this,to),suffix:""}]}),[{key:"createAdUnitsForBidders",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;this.config.shouldSendBidFloor=i;try{if(!t||"object"!==e(t))return console.warn("No categorized bidders provided for ad unit creation"),[];var n=[],o=Bn.getMultifloorFloors(this.config.adBreak,this.config.shouldSendBidFloor,this.config.playerId,null,this.config.videoAdBidFloor,this.bidderConfig,3);if(t.nonMultifloor&&n.push.apply(n,Or(Ln(Vn,this,Nn).call(this,t.nonMultifloor,0,1,!1,o))),t.multifloor)for(var a=0;a<r;a++)n.push.apply(n,Or(Ln(Vn,this,Nn).call(this,t.multifloor,a,r,!0)));return n}catch(e){return console.error("Error creating ad units for categorized bidders:",e),[]}}}])}();function Nn(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=[];return e.videoOnly&&o.push.apply(o,Or(Ln(Vn,this,Hn).call(this,e.videoOnly,this.videoOnlyAdUnitConfigurations,t,r,i,!1))),e.s2s&&e.s2s.videoOnly&&o.push.apply(o,Or(Ln(Vn,this,Hn).call(this,e.s2s.videoOnly,this.videoOnlyAdUnitConfigurations,t,r,i,!0,n))),this.config.isOutstream&&e.multiformat&&o.push.apply(o,Or(Ln(Vn,this,Hn).call(this,e.multiformat,this.multiformatAdUnitConfigurations,t,r,i,!1))),this.config.isOutstream&&e.s2s&&e.s2s.multiformat&&o.push.apply(o,Or(Ln(Vn,this,Hn).call(this,e.s2s.multiformat,this.multiformatAdUnitConfigurations,t,r,i,!0,n))),o}function Hn(e,t,r,i,n){var o=this,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],d=[];return t.forEach((function(t){var u=Ln(Vn,o,Gn).call(o,Ln(Vn,o,Wn).call(o,e,t.type),n,r,i);if(u.length>0){t.method.call(o,o.builder);var l,c=t.type.includes("placement");o.builder.withBidPoolId(r,c,t.suffix,a),a&&!(null===(l=window.__ez)||void 0===l||null===(l=l.tf)||void 0===l?void 0:l.vassf)&&a&&a&&o.builder.withS2SFloor(s,o.config.isRewarded),"ttd"!==t.type&&o.builder.updateAdUnitForAbTests(),o.builder.withBidders(u);var p=o.builder.build();d.push(p),o.builder.reset()}})),d}function Gn(e,t,r,i){var n=this;if(!e||!Array.isArray(e)||0===e.length)return[];var o={mediaType:ne,minDur:this.config.params.min/1e3,maxDur:this.config.params.max/1e3,skippable:this.config.params.skip,shouldSendBidFloor:t,prebidParams:this.config.prebidParams,isOutstream:this.config.isOutstream,language:this.config.videoLanguage,timeOffset:this.config.timeOffset||0,playerId:this.config.playerId,player:qr(this.config.playerId),isRewarded:this.config.isRewarded||!1};return e.map((function(e){var a=Be(e),s=a.bidder,d=kr.getStrategy(s),u=Bn.determineFloorSendingLogic(n.config.adBreak,t,n.config.playerId,a.bidder,n.config.videoAdBidFloor,n.bidderConfig),l=u.shouldActuallySendBidFloor,c=u.shouldForceFloors;if(o.shouldSendBidFloor=l,o.shouldForceFloors=c,d){var p=Bn.getBidFloor(n.config,n.bidderConfig,r,i,s);o.floorVal=0,o.shouldSendBidFloor&&(o.floorVal=p),a=d.applyBidParams(a,o),a=d.applyAbTestParams(a,o)}return a}))}function Wn(e,t){switch(t){case"ttd":return e.ttd||[];case"non-ttd":return e.nonTtd||[];case"placement":return e.placement||[];case"outstream":return e.outstream||[];case"outstream-placement":return e.outstreamPlacement||[];case"multiformat-nonnative":return e.nonNative||[];case"multiformat-nonnative-placement":return e.nonNativePlacement||[];case"multiformat-allformats":return e.allFormats||[];case"multiformat-allformats-placement":return e.allFormatsPlacement||[];default:return[]}}function Kn(e){return e}function $n(e){return e.withTTDConfiguration()}function Jn(e){return e.withPlacement()}function Yn(e){return e.withOutstreamContext()}function Qn(e){return e.withOutstreamContext().withPlacement()}function Zn(e){return e.withOutstreamContext().withMultiFormat()}function Xn(e){return e.withOutstreamContext().withPlacement().withMultiFormat()}function eo(e){return e.withOutstreamContext().withMultiFormat().withNative()}function to(e){return e.withOutstreamContext().withPlacement().withMultiFormat().withNative()}function ro(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var io=new WeakSet,no=function(){return o((function e(r){var i,n;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=io),n.add(i),this.config=r,this.director=new qn(r),this.bidderConfig=new Jr}),[{key:"createAdUnits",value:function(e,t){try{var r=ro(io,this,lo).call(this),i=ro(io,this,oo).call(this,r);return this.director.createAdUnitsForBidders(i,e,t)}catch(e){return console.error("Error creating ad units for auction:",e),[]}}}])}();function oo(e){var t=this,r={nonMultifloor:{videoOnly:{ttd:[],nonTtd:[],placement:[],outstream:[],outstreamPlacement:[]},multiformat:{nonNative:[],nonNativePlacement:[],allFormats:[],allFormatsPlacement:[]},s2s:{videoOnly:{nonTtd:[],placement:[],outstream:[],outstreamPlacement:[]},multiformat:{nonNative:[],nonNativePlacement:[],allFormats:[],allFormatsPlacement:[]}}},multifloor:{videoOnly:{ttd:[],nonTtd:[],placement:[],outstream:[],outstreamPlacement:[]},multiformat:{nonNative:[],nonNativePlacement:[],allFormats:[],allFormatsPlacement:[]},s2s:{videoOnly:{nonTtd:[],placement:[],outstream:[],outstreamPlacement:[]},multiformat:{nonNative:[],nonNativePlacement:[],allFormats:[],allFormatsPlacement:[]}}}},i=this.bidderConfig.getS2SBidderSet(this.config.isOutstream);return e.forEach((function(e){var n=t.bidderConfig.getBidderProfile(e.bidder,t.config.isOutstream,i);ro(io,t,ao).call(t,e,n,r)})),r}function ao(e,t,r){var i=t.isMultifloor?"multifloor":"nonMultifloor";this.config.isOutstream&&(t.isMultiformat||t.isMultiformatBannerOnly)&&this.config.isMultiformatEnabled?ro(io,this,so).call(this,e,t,r[i]):ro(io,this,uo).call(this,e,t,r[i])}function so(e,t,r){var i=t.isS2S?r.s2s.multiformat:r.multiformat,n="allFormats";t.isMultiformatBannerOnly&&(n="nonNative");var o=n+(t.needsPlacement?"Placement":"");i[o]&&i[o].push(e)}function uo(e,t,r){if(t.isTTD)r.videoOnly.ttd.push(e);else{var i=t.isS2S?r.s2s.videoOnly:r.videoOnly;t.needsOutstream&&t.needsPlacement?i.outstreamPlacement.push(e):t.needsOutstream?i.outstream.push(e):t.needsPlacement?i.placement.push(e):i.nonTtd.push(e)}}function lo(){var e=this.config.isOutstream?__ezOutstream:__ezInstream;if(!e||!Array.isArray(e.prebidBidders)){var t=this.config.isOutstream?"outstream":"instream";throw new Error("Prebid bidders not found or invalid in ".concat(t," global"))}return e.prebidBidders}var co={};function po(e){var t,r;if(!co[e]){var i=Date.now()-((null===(t=window.__ez)||void 0===t?void 0:t.stms)||Date.now());co[e]=i,null===(r=window.__ez)||void 0===r||null===(r=r.ce)||void 0===r||r.AddPageviewEvent(e,String(i))}}function fo(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var vo=["-preroll-","-midroll-","-postroll-","-outstream-"],ho=new WeakSet,mo=function(){return o((function e(){var r,i;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=ho),i.add(r),Ur()&&epbjs.que.push((function(){epbjs.setConfig({debug:!1})}))}),[{key:"fetchBids",value:function(e,t,r){var i=this;Er("startPrebidBidding"),e.isOutstream&&po("ot_fetch_bids_start");var n=e.isOutstream?__ezOutstream.prebidBidders:__ezInstream.prebidBidders;if(null==n||!n.length)return Er("No Prebid bidders"),Promise.reject();epbjs&&epbjs.requestBids&&epbjs.que||(Er("epbjs not ready, ensuring queue exists"),"undefined"!=typeof __ez&&__ez.ce&&"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")&&__ez.ce.AddPageviewEvent("video_prebid_not_ready",_ezaq.ab_test_id),window.epbjs=window.epbjs||{},window.epbjs.que=window.epbjs.que||[]),fo(ho,this,_o).call(this),(e.getIsBackfillMode()||e.isRewarded)&&(e.isMultiformatEnabled=!1);var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));return new Promise((function(r,n){var a=!1,s=null,d=null,u=null,l=!1,c=function(){var e;l&&u&&"function"==typeof(null===(e=epbjs)||void 0===e?void 0:e.offEvent)&&epbjs.offEvent("auctionEnd",u),l=!1,u=null},p=function(e,t,r){a||(a=!0,function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).detachAuctionEndListener,t=void 0!==e&&e;null!==s&&(clearTimeout(s),s=null),null!==d&&(clearTimeout(d),d=null),t&&c()}(r),e(t))},f=function(e){return p(r,e)};s=setTimeout((function(){Er("Prebid safety timeout"),p(n,"Prebid timed out",{detachAuctionEndListener:!0})}),12e4),epbjs.que.push((function(){var r,n;if(a)Er("Prebid queue callback skipped - auction already settled");else{e.isOutstream&&po("ot_fetch_bids_queued"),fo(ho,i,go).call(i);var s=!(null!==(r=window.__ezInstream)&&void 0!==r&&r.DoNotPassBidFloorToPreBid),p=_ezaq.country||"US",v=1;"US"===p?v=5:{PR:!0,CA:!0,GB:!0,ES:!0,FR:!0,AU:!0,DE:!0,CH:!0,IE:!0,NL:!0,AE:!0,ZA:!0}[p]&&(v=2);var h=fo(ho,i,yo).call(i,e,v,s);fo(ho,i,wo).call(i,e),fo(ho,i,ko).call(i,e),u=function(t){if(t.auctionId===o){if(e.prebidBidderRequests=t.bidderRequests,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&e.bidderRequests&&t&&t.adUnit&&t.impressionId&&window.__ez&&window.__ez.ce&&"function"==typeof window.__ez.ce.AddImpressionEvent){var r="undefined"!=typeof ez__sspDomain?ez__sspDomain:null,i=window.location.hostname.replace(/^www\./,""),n={};e.bidderRequests.forEach((function(e){e.bids&&e.bids.forEach((function(e){e.userIdAsEids&&e.userIdAsEids.length>0&&e.userIdAsEids.forEach((function(e){var t=e.source+(e.matcher||"");if(!n[t]){var o=Object.assign({},e);delete o.uids;var a=e.source.replace(/^www\./,""),s=a===i||a.endsWith("."+i),d=r&&e.source===r;(s||d)&&(o.source="pubProvidedId"),n[t]=o}}))}))}));var o=Object.values(n);if(0!==o.length){var a=function(e){var t,r=null===(t=window._ezaq)||void 0===t?void 0:t.t_epoch;if(!r||null==e||!e.adUnit||null==e||!e.impressionId)return null;var i=new Date(1e3*r).toLocaleDateString("en-CA",{timeZone:"America/Chicago",year:"numeric",month:"2-digit",day:"2-digit"});return e.adUnit+"/"+i+"/"+e.impressionId}(t);a&&(window.ezoicEvent=window.ezoicEvent||{},window.ezoicEvent.queue=window.ezoicEvent.queue||[],window.ezoicEvent.queue.push((function(){__ez.ce.AddImpressionEvent(a,"user_eids",JSON.stringify(o)),__ez.ce.AddPageviewEidsEvent(o)})),void 0!==window.__ezLiveIntent&&"function"==typeof window.__ezLiveIntent.sendInternalTrackingForImpression&&window.__ezLiveIntent.sendInternalTrackingForImpression(a,o))}}}(t,e),c(),a)return void Er("auctionEnd fired after race already settled");Er("Race resolved by auctionEnd"),f({bids:[],timedOut:!1})}},"function"==typeof(null===(n=epbjs)||void 0===n?void 0:n.onEvent)&&(epbjs.onEvent("auctionEnd",u),l=!0),d=setTimeout((function(){Er("Race resolved by outer timeout"),f({bids:[],timedOut:!0})}),t),Er("Prebid.js requesting bids",h,"timeout",t),e.isOutstream&&po("ot_request_bids_called");var m={auctionId:o,timeout:1e4,adUnits:h,bidsBackHandler:function(t,r,i){e.isOutstream&&po("ot_bids_received");var n=null==t?void 0:t[e.key];n&&(e.prebidBids=n.bids,e.updatePrebidBidCacheWithBids(n.bids)),f({bids:(null==n?void 0:n.bids)||[],timedOut:r})},labels:["iid1:".concat(e.impressionId)],ortb2:fo(ho,i,bo).call(i,e)};epbjs.requestBids(m)}}))}))}}])}();function yo(e,t,r){var i={adBreak:e,key:e.key,gpid:e.gpid,breakID:e.breakID,prebidParams:e.prebidParams,videoAdBidFloor:e.videoAdBidFloor,isOutstream:e.isOutstream,isRewarded:e.isRewarded,params:e.params,timeOffset:e.timeOffset,isMultiformatEnabled:e.isMultiformatEnabled,adBreakPosition:e.isOutstream?void 0:e.getAdBreakPosition(e.breakID),playerId:e.getPlayerId(),videoLanguage:e.getVideoLanguage(e.getPlayerId()),statSourceFloors:e.getStatSourceFloors(),multiFloorStatSourceFloors:e.getMultiFloorStatSourceFloors()},n=new no(i).createAdUnits(t,r);return e.prebidAdUnits=n,n}function bo(e){var t={};try{var r=qr(e.getPlayerId());if(r){var i,n,o=r.adRenderer.videoPlayer_.player.player;if(o.videos){var a=o.playlist.currentIndex();i=o.videos[a]}else i=r.adRenderer.videoPlayer_.videoObject.Video;i&&(t.site={content:{id:i.VideoContentId,title:i.Title,cattax:6,cat:(null===(n=i.IABCategoryIds)||void 0===n?void 0:n.split(","))||[],keywords:i.Keywords,len:Math.round(i.VideoDurationMs/1e3),language:i.Language}})}}catch(e){Er("Error setting ORTB2",e)}return t}function go(){this._bidResponseListenerSetup||(this._bidResponseListenerSetup=!0,epbjs.onEvent("bidResponse",(function(e){var t;if((r=e.adUnitCode)&&vo.some((function(e){return r.includes(e)}))){var r;Er("[bidResponse] ".concat(e.bidder," for ").concat(e.adUnitCode," at $").concat(e.cpm));var i=y(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ui.cacheOrFilterBid(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Er("[bidResponse] Error caching bid: ".concat(t.t0));case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))(),n=null===(t=__ez)||void 0===t||null===(t=t.vbf)||void 0===t?void 0:t.registerPendingCachePromise;"function"==typeof n&&e.adUnitCode&&n(e.adUnitCode,i)}})))}function _o(){var e,t,r,i;"undefined"!=typeof __ez&&!0===(null===(e=__ez)||void 0===e||null===(e=e.fads)||void 0===e||null===(e=e.adLoadHB)||void 0===e?void 0:e.loaded)&&!0===(null===(t=__ez)||void 0===t||null===(t=t.fads)||void 0===t?void 0:t.isJIT)&&!1===(null===(r=__ez)||void 0===r||null===(r=r.fads)||void 0===r||null===(r=r.adLoadHB)||void 0===r?void 0:r.preBidEventsSetup)&&"function"==typeof(null===(i=__ez)||void 0===i||null===(i=i.fads)||void 0===i||null===(i=i.adLoadHB)||void 0===i?void 0:i.setUpGlobalEvents)&&__ez.fads.adLoadHB.setUpGlobalEvents()}function wo(e){e.prebidNumBidsInCache=si.getPlayerBidCount(e.getPlayerId())}function Bo(e){var t=e||.02;return{currency:"USD",floorsschemaversion:2,modelgroups:[{modelversion:"1.0",currency:"USD",default:t,schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":t,"*|*":t}}]}}function ko(e){var t=this;if(e.isOutstream?"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0:"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0){var r=epbjs.getConfig("s2sConfig");r.forEach((function(r){e.isOutstream&&"outstream"===r.name?r.extPrebid.floors={enabled:!0,enforcement:{enforcepbs:!1},data:fo(ho,t,Bo).call(t)}:e.isOutstream||"instream"!==r.name||(r.extPrebid.floors={enabled:!0,enforcement:{enforcepbs:!1},data:fo(ho,t,Bo).call(t)})})),epbjs.setConfig({s2sConfig:r})}}function Po(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var So=new WeakSet,Oo=function(){return o((function e(){var r,i;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=So),i.add(r),this.name="VideoBidderGam",this.activeFetches=new Map}),[{key:"cancelFetch",value:function(e){var t=this.activeFetches.get(e);t&&(Er("[VideoBidderGam] Aborting Google fetch for impression ".concat(e)),t.aborted=!0)}},{key:"fetchBids",value:(e=y(g().mark((function e(t,r,i){var n,o,a,s,d,u,l,c,p,f,v,h,m,y,b,_,w,B,k,P,S,O,C,x,F;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vr(t.isOutstream)){e.next=2;break}return e.abrupt("return");case 2:if(l=15e3,c=t.getPlayerId(),p=t.impressionId,f={aborted:!1},this.activeFetches.set(p,f),v=qr(c)){e.next=12;break}return Er("[VideoBidderGam] No player found for ID:",c),t.processGoogleBid(null),e.abrupt("return");case 12:if(h=v.adRenderer){e.next=17;break}return Er("[VideoBidderGam] No adRenderer on player"),t.processGoogleBid(null),e.abrupt("return");case 17:if(m=null===(n=h.renderer)||void 0===n?void 0:n.adsLoader_,y=null===(o=h.videoPlayer_)||void 0===o?void 0:o.getVideoElement(),m&&y){e.next=23;break}return Er("[VideoBidderGam] Missing adsLoader or videoElement"),t.processGoogleBid(null),e.abrupt("return");case 23:if(b=Date.now(),Er("[VideoBidderGam] Starting Google floor waterfall auction"),_=t.origVastURL||t.vastURL){e.next=30;break}return Er("[VideoBidderGam] No VAST URL available for Google auction"),t.processGoogleBid(null),e.abrupt("return");case 30:w=0,B=null!==(a=null===(s=t.videoFallbackFloors)||void 0===s?void 0:s[0])&&void 0!==a?a:t.videoAdBidFloor,k=null!==(d=null===(u=t.videoFallbackHashes)||void 0===u?void 0:u[0])&&void 0!==d?d:t.videoAdBidHash,P=Po(So,this,To).call(this,_,B,k),S=Po(So,this,jo).call(this,t,B),P=Dr(P,"deal1",S),O=Po(So,this,Co).call(this,m,y),e.prev=37;case 38:if(!(Date.now()-b<l)||f.aborted){e.next=57;break}return Er("[VideoBidderGam] Trying floor $".concat(B,"...")),e.next=42,Po(So,this,xo).call(this,m,y,P,B,k,w,h);case 42:if(!(C=e.sent).filled){e.next=47;break}return Er("[VideoBidderGam] GOOGLE FILLED at floor $".concat(B," - AdsManager stored!")),t.processGoogleBid(C),e.abrupt("return");case 47:if(t.videoFallbackFloors&&!(w>=t.videoFallbackFloors.length-1)){e.next=49;break}return e.abrupt("break",57);case 49:w++,B=t.videoFallbackFloors[w],k=t.videoFallbackHashes[w],P=Po(So,this,Io).call(this,P,k),x=Po(So,this,jo).call(this,t,B),P=Dr(P,"deal1",x),e.next=38;break;case 57:f.aborted?Er("[VideoBidderGam] Google fetch aborted (rendering started)"):(F=Date.now()-b,Er("[VideoBidderGam] Google no-fill after ".concat(w+1," floors (").concat(F,"ms)"))),t.processGoogleBid(null);case 59:return e.prev=59,O(),this.activeFetches.delete(p),e.finish(59);case 63:case"end":return e.stop()}}),e,this,[[37,,59,63]])}))),function(t,r,i){return e.apply(this,arguments)})}]);var e}();function Co(e,t){var r=this,i=function(e){Po(So,r,Fo).call(r,e,t)},n=function(e){Po(So,r,zo).call(r,e)};return e.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,i,!1),e.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n,!1),function(){e.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,i),e.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n)}}function xo(e,t,r,i,n,o,a){return new Promise((function(t){var s,d,u,l,c,p,f,v,h=setTimeout((function(){Er("[VideoBidderGam] Timeout waiting for floor response"),t({filled:!1})}),8e3),m={type:"google_early_bang",floor:i,hash:n,floorIndex:o,vastURL:r,resolve:t,timeoutId:h},y=new google.ima.AdsRequest;y.adTagUrl=r,y.vastLoadTimeout=7e3;var b=(null===(s=a.videoPlayer_)||void 0===s||null===(d=s.getVideoDimensions)||void 0===d?void 0:d.call(s))||{width:640,height:480};y.linearAdSlotWidth=b.width,y.linearAdSlotHeight=b.height,y.nonLinearAdSlotWidth=b.width,y.nonLinearAdSlotHeight=150,y.pageUrl=(null===(u=window.vectx)||void 0===u?void 0:u.parent_url)||window.location.href,null!==(l=a.renderer)&&void 0!==l&&null!==(l=l.videoObject)&&void 0!==l&&l.VideoTitle&&(y.contentTitle=a.renderer.videoObject.VideoTitle);var g=null===(c=a.videoPlayer_)||void 0===c||null===(p=c.getVideoLength)||void 0===p?void 0:p.call(c);g&&(y.contentDuration=g),y.setAdWillAutoPlay((null===(f=a.renderer)||void 0===f?void 0:f.autoplayAllowed)||!1),y.setAdWillPlayMuted((null===(v=a.renderer)||void 0===v?void 0:v.isMuted)||!1),y.setContinuousPlayback(!a.isOutstream),e.requestAds(y,m)}))}function Fo(e,t){var r=e.getUserRequestContext();if(r&&"google_early_bang"===r.type){clearTimeout(r.timeoutId);var i=Po(So,this,Ao).call(this),n=e.getAdsManager(t,i);r.resolve({filled:!0,adsManager:n,floor:r.floor,hash:r.hash,floorIndex:r.floorIndex,url:r.vastURL})}}function zo(e){var t=e.getUserRequestContext();t&&"google_early_bang"===t.type&&(clearTimeout(t.timeoutId),t.resolve({filled:!1}))}function Ao(){var e=new google.ima.AdsRenderingSettings;return e.useStyledLinearAds=!1,e.useStyledNonLinearAds=!0,e.enablePreloading=!0,e.mimeTypes=["video/mp4","video/ogg"],e.loadVideoTimeout=8e3,e}function Io(e,t){try{var r=t;return t.includes(",")&&(r=encodeURIComponent(t)),e.replace(/(eb_br%3D)[^%&]+/,"$1".concat(r))}catch(t){return Er("[VideoBidderGam] Error updating floor hash:",t),e}}function jo(e,t){if(!e.videoPmpDeal||!Array.isArray(e.videoPmpDeal))return[];if(0===e.videoPmpDeal.length)return[];var r=[];return t>.2&&e.videoPmpDeal.forEach((function(e){void 0!==e.adjustedDealFloor&&(e.adjustedDealFloor>=99999||t>e.adjustedLowerDealFloor&&t<e.adjustedUpperDealFloor)&&r.push(e.dealId)})),e.pmpDealsToConsider=r,r}function To(e,t,r){return e}function Ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Uo(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Mo=new WeakSet,Do=function(){return o((function e(){var r,i;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=Mo),i.add(r),this.name="VideoBidderGamPod"}),[{key:"fetchBids",value:(e=y(g().mark((function e(t,r){var i,n,o,a,s,d,u,l,c,p,f,v,h,m,y,b,_,w,B,k,P,S,O,C,x,F,z,A,I;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&null!==(i=t.isPodWaterfallEligible)&&void 0!==i&&i.call(t)){e.next=2;break}return e.abrupt("return",{filled:!1,skipped:!0});case 2:if(Vr(t.isOutstream)){e.next=4;break}return e.abrupt("return",{filled:!1,skipped:!0});case 4:if(a=15e3,s=t.getPlayerId(),d=qr(s)){e.next=10;break}return Er("[VideoBidderGamPod] No player found for ID:",s),e.abrupt("return",{filled:!1});case 10:if(u=d.adRenderer){e.next=14;break}return Er("[VideoBidderGamPod] No adRenderer on player"),e.abrupt("return",{filled:!1});case 14:if(l=null===(n=u.renderer)||void 0===n?void 0:n.adsLoader_,c=null===(o=u.videoPlayer_)||void 0===o?void 0:o.getVideoElement(),l&&c){e.next=19;break}return Er("[VideoBidderGamPod] Missing adsLoader or videoElement"),e.abrupt("return",{filled:!1});case 19:if(p=t.origVastURL||t.vastURL){e.next=23;break}return Er("[VideoBidderGamPod] No VAST URL available"),e.abrupt("return",{filled:!1});case 23:if(f=$r(p),(v=t.getVideoBidCacheTopNBids(f))&&0!==v.length){e.next=28;break}return Er("[VideoBidderGamPod] No valid pod bids found"),e.abrupt("return",{filled:!1});case 28:h=v[0],m=v.slice(1),y=Number((null==h?void 0:h.cpm)||0),b=t.isOutstream?"undefined"==typeof __ezOutstream||__ezOutstream.IsEzDfpAccount:"undefined"==typeof __ezInstream||__ezInstream.IsEzDfpAccount,_=Date.now(),w=0,B=Uo(Mo,this,Lo).call(this,l,c),console.log(t.videoFallbackFloors),console.log(t.videoFallbackHashes),console.log(t.videoAdBidFloor),console.log(t.videoAdBidHash),e.prev=39;case 40:if(!(Date.now()-_<a)){e.next=62;break}return C=null!==(k=null===(P=t.videoFallbackFloors)||void 0===P?void 0:P[w])&&void 0!==k?k:t.videoAdBidFloor,x=null!==(S=null===(O=t.videoFallbackHashes)||void 0===O?void 0:O[w])&&void 0!==S?S:t.videoAdBidHash,F=C<=y,console.log("current iteration",w),console.log("current floor",C),console.log("current hash",x),console.log("include backfill",F),z=Kr(p,t.prebidAdUnits,h,m,x,F,b),A=Uo(Mo,this,Go).call(this,t,C),z=Dr(z,"deal1",A),e.next=53,Uo(Mo,this,Vo).call(this,l,c,z,C,x,w,u);case 53:if(!(I=e.sent).filled){e.next=57;break}return Er("[VideoBidderGamPod] FILLED at floor $".concat(C)),e.abrupt("return",Eo(Eo({},I),{},{filled:!0,primaryBidCpm:y,includeBackfill:F}));case 57:if(t.videoFallbackFloors&&!(w>=t.videoFallbackFloors.length-1)){e.next=59;break}return e.abrupt("break",62);case 59:w++,e.next=40;break;case 62:return Er("[VideoBidderGamPod] Pod waterfall exhausted floors with no fill"),e.abrupt("return",{filled:!1,primaryBidCpm:y});case 64:return e.prev=64,B(),e.finish(64);case 67:case"end":return e.stop()}}),e,this,[[39,,64,67]])}))),function(t,r){return e.apply(this,arguments)})}]);var e}();function Lo(e,t){var r=this,i=function(e){Uo(Mo,r,qo).call(r,e,t)},n=function(e){Uo(Mo,r,No).call(r,e)};return e.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,i,!1),e.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n,!1),function(){e.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,i),e.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n)}}function Vo(e,t,r,i,n,o,a){return new Promise((function(t){var s,d,u,l,c,p,f,v,h=setTimeout((function(){Er("[VideoBidderGamPod] Timeout waiting for floor response"),t({filled:!1})}),8e3),m={type:"google_pod_waterfall",floor:i,hash:n,floorIndex:o,vastURL:r,resolve:t,timeoutId:h},y=new google.ima.AdsRequest;y.adTagUrl=r,y.vastLoadTimeout=7e3;var b=(null===(s=a.videoPlayer_)||void 0===s||null===(d=s.getVideoDimensions)||void 0===d?void 0:d.call(s))||{width:640,height:480};y.linearAdSlotWidth=b.width,y.linearAdSlotHeight=b.height,y.nonLinearAdSlotWidth=b.width,y.nonLinearAdSlotHeight=150,y.pageUrl=(null===(u=window.vectx)||void 0===u?void 0:u.parent_url)||window.location.href,null!==(l=a.renderer)&&void 0!==l&&null!==(l=l.videoObject)&&void 0!==l&&l.VideoTitle&&(y.contentTitle=a.renderer.videoObject.VideoTitle);var g=null===(c=a.videoPlayer_)||void 0===c||null===(p=c.getVideoLength)||void 0===p?void 0:p.call(c);g&&(y.contentDuration=g),y.setAdWillAutoPlay((null===(f=a.renderer)||void 0===f?void 0:f.autoplayAllowed)||!1),y.setAdWillPlayMuted((null===(v=a.renderer)||void 0===v?void 0:v.isMuted)||!1),y.setContinuousPlayback(!a.isOutstream),e.requestAds(y,m)}))}function qo(e,t){var r=e.getUserRequestContext();if(r&&"google_pod_waterfall"===r.type){clearTimeout(r.timeoutId);var i=Uo(Mo,this,Ho).call(this),n=e.getAdsManager(t,i);r.resolve({filled:!0,adsManager:n,floor:r.floor,hash:r.hash,floorIndex:r.floorIndex,url:r.vastURL})}}function No(e){var t=e.getUserRequestContext();t&&"google_pod_waterfall"===t.type&&(clearTimeout(t.timeoutId),t.resolve({filled:!1}))}function Ho(){var e=new google.ima.AdsRenderingSettings;return e.useStyledLinearAds=!1,e.useStyledNonLinearAds=!0,e.enablePreloading=!0,e.mimeTypes=["video/mp4","video/ogg"],e.loadVideoTimeout=8e3,e}function Go(e,t){if(!e.videoPmpDeal||!Array.isArray(e.videoPmpDeal)||0===e.videoPmpDeal.length)return[];var r=[];return t>.2&&e.videoPmpDeal.forEach((function(e){void 0!==e.adjustedDealFloor&&(e.adjustedDealFloor>=99999||t>e.adjustedLowerDealFloor&&t<e.adjustedUpperDealFloor)&&r.push(e.dealId)})),e.pmpDealsToConsider=r,r}function Wo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $o=function(){function r(e,i,n){if(t(this,r),!e||!i||void 0===n)throw new Error("playerId, contentId, and positionId are required");this.request={playerId:e,contentId:i,positionId:n,videoIndex:0,playerState:{autoplay:!1,floating:!1},adConfig:{adsEnabled:2,adIndex:1,unfilledCount:0},floorConfig:{version:0,previousFloors:{last:-1,outstream:-1,instream:-1,highest:-1}},pageContext:{pageViewId:"undefined"!=typeof _ezaq?_ezaq.page_view_id:"",requestTime:"undefined"!=typeof _ezaq?_ezaq.t_epoch:Date.now()/1e3}}}return o(r,[{key:"withVideoIndex",value:function(e){return this.request.videoIndex=e,this}},{key:"withPlayerState",value:function(e){return this.request.playerState=Ko(Ko({},this.request.playerState),e),this}},{key:"withAdConfig",value:function(e){return this.request.adConfig=Ko(Ko({},this.request.adConfig),e),this}},{key:"withFloorConfig",value:function(e){return e.previousFloors&&(e.previousFloors=Ko(Ko({},this.request.floorConfig.previousFloors),e.previousFloors)),this.request.floorConfig=Ko(Ko({},this.request.floorConfig),e),this}},{key:"withPageContext",value:function(e){return this.request.pageContext=Ko(Ko({},this.request.pageContext),e),this}},{key:"withVideoAdParams",value:function(e){return this.request.videoAdParams=Ko(Ko({},this.request.videoAdParams),e),this}},{key:"withBackfillMode",value:function(e){return this.request.isBackfillMode=e,this}},{key:"withRewardedPreroll",value:function(e){return this.request.isRewardedPreroll=e,this}},{key:"fromWindowState",value:function(){"undefined"!=typeof window&&"object"===e(window.lastVideoFloor)&&window.lastVideoFloor.hasOwnProperty("last")&&this.withFloorConfig({previousFloors:{last:window.lastVideoFloor.last,outstream:window.lastVideoFloor.outstream,instream:window.lastVideoFloor.instream,highest:window.lastVideoFloor.highest}});var t=0;if("undefined"!=typeof window&&("ez-o"!==this.request.playerId&&"ez-r-o"!==this.request.playerId||void 0===window.__ezOutstream||!window.__ezOutstream.UnfilledCnt?void 0!==window.__ezInstream&&window.__ezInstream.UnfilledCnt&&(t=window.__ezInstream.UnfilledCnt):t=window.__ezOutstream.UnfilledCnt),this.withAdConfig({unfilledCount:t}),"undefined"!=typeof window&&void 0!==window.__ezOutstream&&(window.__ezOutstream.AdIndex&&this.withAdConfig({adIndex:window.__ezOutstream.AdIndex}),void 0!==window.__ezOutstream.floorVersion&&this.withFloorConfig({version:window.__ezOutstream.floorVersion}),window.__ezOutstream.generatorVersion&&this.withAdConfig({generatorVersion:window.__ezOutstream.generatorVersion}),window.__ezOutstream.rampUp&&this.withFloorConfig({useReducedFloors:!0})),"undefined"!=typeof window&&void 0!==window.__ezInstream&&(window.__ezInstream.EnableVideoDeals&&this.withAdConfig({enableDeals:!0}),window.__ezInstream.rampUp&&this.withFloorConfig({useReducedFloors:!0})),"undefined"!=typeof window&&window.is_humix_app&&this.withPageContext({isHumixApp:!0}),"undefined"!=typeof window&&"1"===new URLSearchParams(window.location.href).get("ez_no_outstream_floor")&&this.withFloorConfig({noOutstreamFloor:!0}),"undefined"!=typeof window&&void 0!==window._ezaq){var r={};window._ezaq.url&&(r.parentUrl=window._ezaq.url),window._ezaq.ab_test_id&&(r.abTestId=window._ezaq.ab_test_id),Object.keys(r).length>0&&this.withPageContext(r)}return this}},{key:"validate",value:function(){var e=this.request,t=e.playerId,r=e.contentId,i=e.positionId;if(e.pageContext,!t||!r||void 0===i)throw new Error("Missing required fields: playerId, contentId, and positionId");if(this.request.videoAdParams){var n=this.request.videoAdParams,o=n.plcmt,a=n.minDuration,s=n.maxDuration;if(void 0!==o&&(o<1||o>4))throw new Error("Invalid plcmt value: must be between 1 and 4");if(void 0!==a&&a<0)throw new Error("Invalid minDuration: must be non-negative");if(void 0!==s&&s<0)throw new Error("Invalid maxDuration: must be non-negative");if(void 0!==a&&void 0!==s&&a>s)throw new Error("Invalid duration range: minDuration cannot exceed maxDuration")}return!0}},{key:"build",value:function(){return this.validate(),JSON.parse(JSON.stringify(this.request))}},{key:"toLegacyParams",value:function(){var e=new URLSearchParams,t=this.request,r=t.playerId,i=t.contentId,n=t.positionId,o=t.videoIndex,a=t.playerState,s=t.adConfig,d=t.floorConfig,u=t.pageContext,l=t.videoAdParams,c=t.isBackfillMode;return e.set("player_id",r),e.set("content_id",i),e.set("position_id",n.toString()),o>0&&e.set("video_index",o.toString()),e.set("autoplay",a.autoplay?"1":"0"),e.set("floating",a.floating?"1":"0"),e.set("ads_enabled",s.adsEnabled.toString()),s.adUnit&&e.set("ad_unit",s.adUnit),1!==s.adIndex&&e.set("ad_index",s.adIndex.toString()),s.isFirstBreak&&e.set("is_first_break","1"),s.enableDeals&&e.set("enable_deals","1"),s.unfilledCount>0&&e.set("unf_c",s.unfilledCount.toString()),s.generatorVersion&&e.set("generator_version",s.generatorVersion),e.set("floor_version",d.version.toString()),e.set("prevfl",d.previousFloors.last.toString()),e.set("prevflo",d.previousFloors.outstream.toString()),e.set("prevfli",d.previousFloors.instream.toString()),e.set("prevflh",d.previousFloors.highest.toString()),d.useReducedFloors&&e.set("reducer","1"),d.noOutstreamFloor&&e.set("ez_no_outstream_floor","1"),e.set("pageview_id",u.pageViewId),e.set("pv_ep",Math.floor(u.requestTime).toString()),u.parentUrl&&e.set("parent_url",u.parentUrl),u.abTestId&&e.set("mod",u.abTestId),u.isHumixApp&&e.set("is_humix_app","1"),l&&(void 0!==l.plcmt&&e.set("plcmt",l.plcmt.toString()),void 0!==l.minDuration&&e.set("min_length",l.minDuration.toString()),void 0!==l.maxDuration&&e.set("max_length",l.maxDuration.toString())),c&&e.set("is_backfill_mode","1"),this.request.isRewardedPreroll&&e.set("is_rewarded_preroll","1"),e}}],[{key:"fromLegacy",value:function(e){var t=new r(e.playerId,e.videoId,e.videoPositionId);if(void 0!==e.videoIndex&&t.withVideoIndex(e.videoIndex),t.withPlayerState({autoplay:e.isAutoPlay||!1,floating:e.isFloating||!1,floatPosition:e.floatPosition}),t.withAdConfig({adsEnabled:e.adsEnabled,adUnit:e.adUnit,isFirstBreak:e.isFirstBreak}),e.paramConfig){var i={};void 0!==e.paramConfig.plcmt&&(i.plcmt=e.paramConfig.plcmt),void 0!==e.paramConfig.minLength&&(i.minDuration=e.paramConfig.minLength),void 0!==e.paramConfig.maxLength&&(i.maxDuration=e.paramConfig.maxLength),Object.keys(i).length>0&&t.withVideoAdParams(i),void 0!==e.paramConfig.isBackfillMode&&t.withBackfillMode(e.paramConfig.isBackfillMode)}return t.fromWindowState()}}])}();function Jo(e,t,r){return new $o(e,t,r)}function Yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Zo=function(e){return"function"==typeof Promise.allSettled?Promise.allSettled(e):Promise.all(e.map((function(e){return Promise.resolve(e).then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))})))};const Xo=function(){return o((function e(){var r=this;t(this,e),we(this,"breaks",{}),we(this,"floatingBreaks",{}),we(this,"rewardedBreaks",{}),we(this,"lastInstreamBreakRequestConfig",null),we(this,"rewardedBreaksPromise",null),we(this,"target",new EventTarget),we(this,"biddingInProcess",{}),we(this,"bidderTimeoutMS",1800),we(this,"globalBidHistory",{}),we(this,"bidders",{}),we(this,"auctionsRun",0),we(this,"adsShown",0),we(this,"auctionPromiseByImpressionId",{}),we(this,"videoBidderAps",void 0),we(this,"videoBidderPrebid",void 0),we(this,"videoBidderGam",void 0),we(this,"videoBidderGamPod",void 0),this.videoBidderAps=new Hi,this.videoBidderPrebid=new mo,this.videoBidderGam=new Oo,this.videoBidderGamPod=new Do,this.initializeBidFilter(),this.initializeVideoBidTracking(),"undefined"!=typeof window&&(!0===window.__rewardedPreroll?this.setupRewardedPrerollListeners():window.addEventListener("rewardedPrerollInit",(function(){window.__rewardedPreroll=!0,r.setupRewardedPrerollListeners(),r.lastInstreamBreakRequestConfig&&(r.rewardedBreaksPromise=r.requestRewardedBreaks(r.lastInstreamBreakRequestConfig))}),{once:!0}))}),[{key:"setupRewardedPrerollListeners",value:function(){var e=this;window.addEventListener("rewardedPrerollFinished",(function(){e.swapRewardedBreaks()}),{once:!0})}},{key:"isTrueInstreamRequest",value:function(e){var t;return!(null!=e&&e.isOutstream||1!==(null==e||null===(t=e.prebidParams)||void 0===t?void 0:t.plcmt))}},{key:"isPodGamOnlyRequest",value:function(e){var t;return!(null==e||null===(t=e.isPodWaterfallEligible)||void 0===t||!t.call(e))}},{key:"getUseVastProxyForSingleAuction",value:function(e,t){return!this.isPodGamOnlyRequest(e)&&!this.isTrueInstreamRequest(e)&&(e.isOutstream||t||!Vr(e.isOutstream))}},{key:"maybeRunPodWaterfall",value:(l=y(g().mark((function e(t){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!==(r=t.isPodWaterfallEligible)&&void 0!==r&&r.call(t)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Er("[Pod Waterfall] Running for impression ".concat(t.impressionId)),e.next=6,this.videoBidderGamPod.fetchBids(t,15e3);case 6:i=e.sent,t.processPodWaterfallResult(i),null!=i&&i.filled?Er("[Pod Waterfall] Filled at floor $".concat(i.floor)):Er("[Pod Waterfall] No fill, keeping standard request path"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),Er("[Pod Waterfall] Error during fetch:",e.t0),t.processPodWaterfallResult({filled:!1,error:!0});case 15:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e){return l.apply(this,arguments)})},{key:"createDurationVariants",value:function(e){var t,r,i,n,o,a,s,d="true"===(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vcpmsec);if(!e.isOutstream||!d)return[e];Er("[CPM/sec Original] floor: ".concat(e.videoAdBidFloor,", hash: ").concat(e.videoAdBidHash,", fallbackFloors: ").concat((null===(r=e.videoFallbackFloors)||void 0===r?void 0:r.length)||0,", vastURL: ").concat(e.vastURL?e.vastURL.substring(0,100):"missing")),Er("[CPM/sec Original] bidFloorActions: ".concat((null===(i=e.bidFloorActions)||void 0===i?void 0:i.length)||0,", prebidParams: ").concat(JSON.stringify(e.prebidParams))),Er("[CPM/sec Original] Global stat source floors available: ".concat(Object.keys(window.__ezStatSourceFloors||{}).length,", vassf flag: ").concat(null===(n=window.__ez)||void 0===n||null===(n=n.tf)||void 0===n?void 0:n.vassf));var u=function(e){var t=new ii(e);return e.prebidParams&&(t.prebidParams=Qo({},e.prebidParams)),e.videoFallbackFloors&&(t.videoFallbackFloors=Or(e.videoFallbackFloors)),e.videoFallbackHashes&&(t.videoFallbackHashes=Or(e.videoFallbackHashes)),e.bidFloorActions&&(t.bidFloorActions=Or(e.bidFloorActions)),e.bidFloorActionsTS&&(t.bidFloorActionsTS=Or(e.bidFloorActionsTS)),e.statSourceFloors&&(t.statSourceFloors=Qo({},e.statSourceFloors)),e.multiFloorStatSourceFloors&&(t.multiFloorStatSourceFloors=Qo({},e.multiFloorStatSourceFloors)),e.videoPmpDeal&&(t.videoPmpDeal=Or(e.videoPmpDeal)),e.prebidAdUnits&&(t.prebidAdUnits=JSON.parse(JSON.stringify(e.prebidAdUnits))),t},l=(null===(o=e.bidFloorActions)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.prebidFloor)>0?e.bidFloorActions[0].prebidFloor:e.videoAdBidFloor||0,c=u(e);c.prebidParams||(c.prebidParams={}),c.prebidParams.minduration=1,c.prebidParams.maxduration=15,c.durationTier="15s",c.expectedDuration=15,c.videoAdBidFloor=Math.max(.01,l),c.impressionId=e.impressionId+"_15s",c.key=e.key+"::15s",c.bidFloorActions=[],Er("[CPM/sec Clone Debug] 15s variant - floor: ".concat(c.videoAdBidFloor,", hash: ").concat(c.videoAdBidHash,", fallbackFloors: ").concat((null===(a=c.videoFallbackFloors)||void 0===a?void 0:a.length)||0,", vastURL: ").concat(c.vastURL?"present":"missing"));var p=u(e);return p.prebidParams||(p.prebidParams={}),p.prebidParams.minduration=16,p.prebidParams.maxduration=30,p.durationTier="30s",p.expectedDuration=30,p.videoAdBidFloor=Math.max(.01,l),p.impressionId=e.impressionId+"_30s",p.key=e.key+"::30s",p.bidFloorActions=[],Er("[CPM/sec Clone Debug] 30s variant - floor: ".concat(p.videoAdBidFloor,", hash: ").concat(p.videoAdBidHash,", fallbackFloors: ").concat((null===(s=p.videoFallbackFloors)||void 0===s?void 0:s.length)||0,", vastURL: ").concat(p.vastURL?"present":"missing")),Er("[CPM/sec Multi-Duration] Created variants for impression ".concat(e.impressionId,": 15s (").concat(c.impressionId,"), 30s (").concat(p.impressionId,")")),Er("[CPM/sec Multi-Duration] Floors  15s: $".concat(c.videoAdBidFloor.toFixed(3),", 30s: $").concat(p.videoAdBidFloor.toFixed(3)," (base: $").concat(l,")")),[c,p]}},{key:"shouldUseCacheRecovery",value:function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.isOutstream&&"undefined"!=typeof __ezOutstream)t=__ezOutstream.UnfilledCnt||0,r=5;else{if("undefined"==typeof __ezInstream)return!1;t=__ezInstream.UnfilledCnt||0,r=3,i&&(r*=2)}if(t<r)return!1;var n=Ui.videoBidCache;return!!n&&n.getPlayerBidCount(e.getPlayerId())>0}},{key:"hasCachedBidsForPlayer",value:function(e){var t=Ui.videoBidCache;return!!t&&t.getPlayerBidCount(e)>0}},{key:"doAuction",value:function(e){var t,r,i,n=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null===(t=e.bidFloorActions)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.prebidFloor)>0&&(e.videoAdBidFloor=e.bidFloorActions[0].prebidFloor),this.shouldUseCacheRecovery(e,o)?(e.isCacheRecovery=!0,this.biddingInProcess[e.getPlayerId()]=!0,Er("[Recovery] Skipping auction, using cached bids for player "+e.getPlayerId()),this.auctionPromiseByImpressionId[e.impressionId]=Promise.resolve()):(r=this.auctionPromiseByImpressionId)[i=e.impressionId]||(r[i]=y(g().mark((function t(){var r,i,a,s,d;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.biddingInProcess[e.getPlayerId()]=!0,n.auctionsRun++,(i=n.videoBidderPrebid.fetchBids(e,n.bidderTimeoutMS,o)).then((function(t){var r,i,o;(t.bids,t.timedOut)&&(e.isOutstream&&(null===(r=window.__ez)||void 0===r||null===(r=r.ce)||void 0===r||r.AddPageviewEvent("video_prebid_auction_timed_out",null!==(i=null===(o=window._ezaq)||void 0===o?void 0:o.ab_test_id)&&void 0!==i?i:"unknown")),n.bidderTimeoutMS+=1200,Er("Prebid timed out, incrementing timeout: ",n.bidderTimeoutMS))})),a=n.videoBidderAps.fetchBids(e,n.bidderTimeoutMS,o),s=[i,a],!e.isOutstream&&e.isAdBreakFrontloaded()&&o&&!0!==(null===(r=window.__ezInstream)||void 0===r?void 0:r.dgeb)&&(Er("Fetching Google bid for instream"),d=n.videoBidderGam.fetchBids(e,n.bidderTimeoutMS,o),s.push(d)),window.__ezvidauctionran=!0,t.abrupt("return",Promise.allSettled(s));case 9:case"end":return t.stop()}}),t)})))())}},{key:"waitForPendingBidCacheWrites",value:(u=y(g().mark((function e(t){var r,i,n,o,a,s,d,u=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:1200,e.prev=1,"function"==typeof(n=null===(i=window.__ez)||void 0===i||null===(i=i.vbf)||void 0===i?void 0:i.awaitPendingForAdUnitCodes)){e.next=5;break}return e.abrupt("return");case 5:if(o=Array.isArray(t)?t:[t],0!==(a=o.map((function(e){return null==e?void 0:e.key})).filter(Boolean)).length){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,n(a,r);case 11:(null==(s=e.sent)?void 0:s.awaited)>0&&(d=s.timedOut?" (timed out)":"",Er("[CPM/sec Cache Sync] Awaited ".concat(s.awaited," pending cache write(s)").concat(d))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),Er("[CPM/sec Cache Sync] Failed awaiting pending cache writes:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])}))),function(e){return u.apply(this,arguments)})},{key:"bid",value:(d=y(g().mark((function e(t,r){var i,n,o,a,s,d,u,l,c,p,f,v,h,m,b,_,w,B,k=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.biddingInProcess[t.getPlayerId()]=!0,!this.shouldConsiderCustomBreaksOutstreamCollision(t)){e.next=6;break}return Er("Handling custom breaks outstream collision"),e.next=5,this.handleCustomBreaksOutstreamCollision(t,r);case 5:return e.abrupt("return");case 6:if(!Mr()){e.next=12;break}return t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.vastURL=xr,this.dispatchRenderAdBreak(t),e.abrupt("return");case 12:if(a="true"===(null===(i=__ez)||void 0===i||null===(i=i.tf)||void 0===i?void 0:i.vcpmsec),s=null!==(n=null===(o=window._ezaq)||void 0===o?void 0:o.ab_test_id)&&void 0!==n?n:"unknown",!a||!t.isOutstream){e.next=51;break}return Er("[CPM/sec Test] Running multi-duration auction for outstream (test group: ".concat(s,")")),d=this.createDurationVariants(t),u=t.key,l=t.impressionId,d.forEach((function(e){k.breaks[e.key]=e})),c=d.map((function(e){return k.doAuction(e,!1)})),e.prev=21,e.next=24,Zo(c);case 24:return e.next=26,this.waitForPendingBidCacheWrites(d,3e3);case 26:if(p=function(){var e=null,t=-1,r=[];return d.forEach((function(i){var n,o,a=i.getHighestBidWithSource(),s=Number((null==a?void 0:a.cpm)||0),d=Math.max(1,(null==a?void 0:a.duration)||i.expectedDuration||30),u=s/d,l=null!==(n=null===(o=window.__ezOutstream)||void 0===o||null===(o=o.tierFillRates)||void 0===o?void 0:o[i.durationTier])&&void 0!==n?n:1,c=u*l,p=l<1?" (fill: ".concat((100*l).toFixed(0),"%, expected: $").concat(c.toFixed(4),"/sec)"):"";Er("[CPM/sec] ".concat(i.durationTier,": $").concat(s," CPM / ").concat(d,"s = $").concat(u.toFixed(4),"/sec").concat(p)),r.push("".concat(i.durationTier,":").concat(s>0?a.source||"bid":"no-fill")),s<=0||c>t&&(t=c,e=i)})),{bestVariant:e,bestCpmPerSec:t,variantFillSummary:r}},f=p(),v=f.bestVariant,h=f.bestCpmPerSec,m=f.variantFillSummary,v){e.next=35;break}return e.next=31,this.waitForPendingBidCacheWrites(d,2e3);case 31:b=p(),v=b.bestVariant,h=b.bestCpmPerSec,m=b.variantFillSummary;case 35:Er("[CPM/sec SSP Monitor] ".concat(m.join(", "))),d.forEach((function(e){delete k.breaks[e.key],delete k.auctionPromiseByImpressionId[e.impressionId]})),v?(v.key=u,v.impressionId=l,_=v.getHighestBidWithSource(),w=_.duration||v.expectedDuration||30,Er("[CPM/sec Test] Winner: ".concat(v.durationTier," at $").concat(h.toFixed(4),"/sec (CPM: $").concat(_.cpm,", duration: ").concat(w,"s)")),v.assembleTagURL(!0),this.dispatchRenderAdBreak(v)):(Er("[CPM/sec Test] No winning bid found, skipping GAM fallback for outstream"),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.noFill=!0),e.next=47;break;case 40:e.prev=40,e.t0=e.catch(21),Er("[CPM/sec Test] Error in multi-duration auction:",e.t0),d.forEach((function(e){delete k.breaks[e.key],delete k.auctionPromiseByImpressionId[e.impressionId]})),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.noFill=!0;case 47:return e.prev=47,this.biddingInProcess[t.getPlayerId()]=!1,e.finish(47);case 50:return e.abrupt("return");case 51:B=this.getUseVastProxyForSingleAuction(t,r),this.doAuction(t,!1).catch((function(e){Er("Error bidding",e),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating)})).finally(y(g().mark((function e(){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Er("Bidding finished"),r=t.getHighestBidWithSource(),Er("[VideoBidder]highestBidDetails ".concat(r)),B){e.next=6;break}return e.next=6,k.maybeRunPodWaterfall(t);case 6:t.assembleTagURL(B),t.isOutstream&&po("ot_vast_url_assembled"),k.dispatchRenderAdBreak(t);case 9:case"end":return e.stop()}}),e)}))));case 53:case"end":return e.stop()}}),e,this,[[21,40,47,50]])}))),function(e,t){return d.apply(this,arguments)})},{key:"bidWithoutRender",value:(s=y(g().mark((function e(t){var r,i,n,o,a,s,d,u,l,c,p,f,v,h,m,b,_,w,B,k,P=this,S=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=S.length>1&&void 0!==S[1]&&S[1],a=!(S.length>2&&void 0!==S[2])||S[2],this.biddingInProcess[t.getPlayerId()]=!0,t.isRewarded=a,t.isRewarded&&((s=t.prebidParams||{}).playbackmethod=[3],s.plcmt=3,s.pos=7,t.prebidParams=s),!this.shouldConsiderCustomBreaksOutstreamCollision(t)){e.next=10;break}return Er("Handling custom breaks outstream collision"),e.next=9,this.handleCustomBreaksOutstreamCollision(t,o);case 9:return e.abrupt("return",t);case 10:if(!Mr()){e.next=15;break}return t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.vastURL=xr,e.abrupt("return",t);case 15:if(d="true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vcpmsec),u=null!==(i=null===(n=window._ezaq)||void 0===n?void 0:n.ab_test_id)&&void 0!==i?i:"unknown",!d||!t.isOutstream){e.next=66;break}return Er("[CPM/sec Test] Running multi-duration auction without render (test group: ".concat(u,")")),l=this.createDurationVariants(t),c=t.key,p=t.impressionId,l.forEach((function(e){P.breaks[e.key]=e})),f=l.map((function(e){return P.doAuction(e,!1)})),e.prev=24,e.next=27,Zo(f);case 27:return e.next=29,this.waitForPendingBidCacheWrites(l,3e3);case 29:if(v=function(){var e=null,t=-1;return l.forEach((function(r){var i,n,o=r.getHighestBidWithSource(),a=Number((null==o?void 0:o.cpm)||0),s=a/Math.max(1,(null==o?void 0:o.duration)||r.expectedDuration||30)*(null!==(i=null===(n=window.__ezOutstream)||void 0===n||null===(n=n.tierFillRates)||void 0===n?void 0:n[r.durationTier])&&void 0!==i?i:1);a<=0||s>t&&(t=s,e=r)})),{bestVariant:e,bestCpmPerSec:t}},h=v(),m=h.bestVariant,b=h.bestCpmPerSec,m){e.next=37;break}return e.next=34,this.waitForPendingBidCacheWrites(l,2e3);case 34:_=v(),m=_.bestVariant,b=_.bestCpmPerSec;case 37:if(l.forEach((function(e){delete P.breaks[e.key],delete P.auctionPromiseByImpressionId[e.impressionId]})),!m){e.next=48;break}return m.key=c,m.impressionId=p,w=m.getHighestBidWithSource(),B=w.duration||m.expectedDuration||30,Er("[CPM/sec Test] Best variant: ".concat(m.durationTier," at $").concat(b.toFixed(4),"/sec (CPM: $").concat(w.cpm,", duration: ").concat(B,"s)")),m.assembleTagURL(!0),e.abrupt("return",m);case 48:return Er("[CPM/sec Test] No winning bid found, skipping GAM fallback for outstream"),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.noFill=!0,e.abrupt("return",t);case 53:e.next=63;break;case 55:return e.prev=55,e.t0=e.catch(24),Er("[CPM/sec Test] Error in multi-duration auction:",e.t0),l.forEach((function(e){delete P.breaks[e.key],delete P.auctionPromiseByImpressionId[e.impressionId]})),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.noFill=!0,e.abrupt("return",t);case 63:return e.prev=63,this.biddingInProcess[t.getPlayerId()]=!1,e.finish(63);case 66:return k=this.getUseVastProxyForSingleAuction(t,o),e.abrupt("return",new Promise((function(e){P.doAuction(t,!1).catch((function(e){Er("Error bidding",e),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating)})).finally(y(g().mark((function r(){return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(Er("Bidding finished without render"),k){r.next=4;break}return r.next=4,P.maybeRunPodWaterfall(t);case 4:t.assembleTagURL(k),e(t);case 6:case"end":return r.stop()}}),r)}))))})));case 68:case"end":return e.stop()}}),e,this,[[24,55,63,66]])}))),function(e){return s.apply(this,arguments)})},{key:"bidMultipleBreaks",value:function(e,t){var r,i=this;if(0!==e.length){var n=e.find((function(e){return i.isPodGamOnlyRequest(e)}));if(n)return Er("[Multi-Auction] Pod break detected; falling back to single-break bidding"),void this.bid(n,t);"true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vamauf)&&this.applyUnifiedFloor(e),e.forEach((function(e){e.isMultiAuction=1}));var o=e.map((function(e){return i.doAuction(e,!0)}));Zo(o).finally((function(){var r,n=null,o=-1,a=-1,s="",d=null,u="true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vcpmsec);if(e.forEach((function(e){var t,r=e.getHighestBidWithSource();(t=u&&e.isOutstream&&r.cpmPerSec>0?30*r.cpmPerSec:r.cpm)>a&&(a=t,o=r.cpm,n=e,s=r.source),e.isOutstream||(d=e),e.isComplete=!0})),n){var l=n.isOutstream?"OUTSTREAM":"INSTREAM";if(Er("[Multi-Auction] Winner: ".concat(l," ").concat(s.toUpperCase()," at $").concat(o.toFixed(2))),u){var c=e.find((function(e){return e.isOutstream}));if(c){var p=c.getHighestBidWithSource(),f=p.duration||c.expectedDuration||30,v=p.cpm/f;Er("[Multi-Auction CPM/sec] Outstream: $".concat(p.cpm.toFixed(2)," / ").concat(f,"s = $").concat(v.toFixed(4),"/sec (normalized: $").concat((30*v).toFixed(2),")"))}if(d){var h=d.getHighestBidWithSource();Er("[Multi-Auction CPM/sec] Instream: $".concat(h.cpm.toFixed(2)," flat CPM"))}}}var m={};if(n){var y,b,g=n.isOutstream||t||!Vr(n.isOutstream)||n.isAdBreakFrontloaded()&&!0!==(null===(y=window.__ezInstream)||void 0===y?void 0:y.dgeb);n.assembleTagURL(g);var _=i.getRenderFormatInfo(n);n.isMultiformatWinner=_.isMultiformat,n.multiAuctionWinningFormat=_.format,m.bestBreak=n,null!==(b=window.__ezDevtools)&&void 0!==b&&b.addMultiAuction&&__ezDevtools.addMultiAuction(e.map((function(e){var t=e.getHighestBidWithSource(),r=t.cpm,i=t.source;return{impressionId:e.impressionId,cpm:r,source:i,isBest:e===m.bestBreak,isMultiformat:e===n&&_.isMultiformat,format:e===n?_.format:void 0}}))),i.finalizeBidMultipleBreaks(m,n,d,t,e)}else{var w;null!==(w=window.__ezDevtools)&&void 0!==w&&w.addMultiAuction&&__ezDevtools.addMultiAuction(e.map((function(e){var t=e.getHighestBidWithSource(),r=t.cpm,i=t.source;return{impressionId:e.impressionId,cpm:r,source:i,isBest:!1}}))),i.finalizeBidMultipleBreaks(m,n,d,t,e)}}))}}},{key:"finalizeBidMultipleBreaks",value:function(e,t,r,i,n){var o=this;if(r&&r!==t){var a,s=r.isOutstream||i||!Vr(r.isOutstream)||r.isAdBreakFrontloaded()&&!0!==(null===(a=window.__ezInstream)||void 0===a?void 0:a.dgeb);r.assembleTagURL(s),e.instreamBreak=r}t||!r||e.bestBreak||(e.bestBreak=r),n.forEach((function(e){o.biddingInProcess[e.getPlayerId()]=!1})),Object.keys(e).length>0?this.dispatchRenderMultipleAdBreaks(e):Er("No breaks to render from multi-auction"),Er("Multi-auction completed. Best break: ".concat((null==t?void 0:t.key)||"none",", Instream break: ").concat((null==r?void 0:r.key)||"none"))}},{key:"applyUnifiedFloor",value:function(e){var t=-1,r="";e.forEach((function(e){e.videoAdBidFloor>t&&(t=e.videoAdBidFloor,r=e.videoAdBidHash)})),t>0&&(e.forEach((function(e){e.videoAdBidFloor=t,e.videoAdBidHash=r})),Er("Multi-auction using highest floor: ".concat(t," with bid hash: ").concat(r)))}},{key:"addListener",value:function(e,t){this.target.addEventListener(e,t)}},{key:"getRenderFormatInfo",value:function(e){if(null==e||!e.isOutstream||null==e||!e.vastURL||"string"!=typeof e.vastURL)return{isMultiformat:!1,format:void 0};try{var t=(new URL(e.vastURL).searchParams.get("mf")||"").toLowerCase();return"banner"===t||"native"===t?{isMultiformat:!0,format:t}:{isMultiformat:!1,format:void 0}}catch(t){var r,i=e.vastURL.match(/[?&]mf=([^&]+)/i),n=(null==i||null===(r=i[1])||void 0===r?void 0:r.toLowerCase())||"";return"banner"===n||"native"===n?{isMultiformat:!0,format:n}:{isMultiformat:!1,format:void 0}}}},{key:"isMultiformatRenderBreak",value:function(e){return this.getRenderFormatInfo(e).isMultiformat}},{key:"dispatchRenderAdBreak",value:function(e){if(this.isMultiformatRenderBreak(e))this.dispatchRenderMultiformatAd(e);else{var t=new Event("RenderAdBreak");t.AdBreak=e,this.target.dispatchEvent(t)}}},{key:"dispatchRenderMultipleAdBreaks",value:function(e){var t=new Event("RenderAdBreak");t.AdBreaks=e,this.target.dispatchEvent(t)}},{key:"dispatchRenderMultiformatAd",value:function(e){var t=new Event("RenderMultiformatAd");t.AdBreak=e,this.target.dispatchEvent(t)}},{key:"processAdBreakData",value:function(e,t,r){var i=this;e.forEach((function(e){var n=new ii(e);n.isFloating=t,null!==r&&(n.floatPosition=r),t?i.floatingBreaks[e.key]=n:i.breaks[e.key]=n}))}},{key:"processRewardedAdBreakData",value:function(e,t){var r=this;e.forEach((function(e){var i=new ii(e);i.isFloating=!1,null!==t&&(i.floatPosition=t),r.rewardedBreaks[e.key]=i}))}},{key:"getRewardedBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.rewardedBreaks).filter((function(e){return e.key.includes(r)}))}},{key:"swapRewardedBreaks",value:(a=y(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.rewardedBreaksPromise){e.next=4;break}return Er("[Rewarded Preroll] Waiting for rewarded breaks request to complete..."),e.next=4,this.rewardedBreaksPromise;case 4:Er("[Rewarded Preroll] Swapping breaks with rewarded breaks"),this.breaks=this.rewardedBreaks,this.rewardedBreaks={},(t=new Event("rewardedBreaksSwapped")).breaks=this.breaks,this.target.dispatchEvent(t);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.breaks).filter((function(e){return e.key.includes(r)}))}},{key:"getFloatingBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.floatingBreaks).filter((function(e){return e.key.includes(r)}))}},{key:"getIncompleteBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.breaks).filter((function(e){return e.key.includes(r)&&!e.isComplete}))}},{key:"clearExistingAdBreaks",value:function(e,t,r,i){var n=this,o=e+"$"+t+"$"+r;i?Object.keys(this.floatingBreaks).forEach((function(e){e.includes(o)&&delete n.floatingBreaks[e]})):Object.keys(this.breaks).forEach((function(e){e.includes(o)&&delete n.breaks[e]}))}},{key:"requestBreaksV2",value:(n=y(g().mark((function e(t){var r,i,n,o,a,s,d,u,l,c,p,f,v,h,m,y,b,_,w,B,k,P,S,O,C;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.playerId,i=t.videoId,n=t.adsEnabled,o=t.videoPositionId,a=t.videoIndex,s=void 0===a?0:a,d=t.isAutoPlay,u=void 0!==d&&d,l=t.isFloating,c=void 0!==l&&l,p=t.adUnit,f=void 0===p?null:p,v=t.isFirstBreak,h=void 0!==v&&v,m=t.isFloatingAdBreaks,y=void 0!==m&&m,b=t.floatPosition,_=void 0===b?null:b,w=t.paramConfig,B=void 0===w?{}:w,this.clearExistingAdBreaks(r,i,s,y),k=Jo(r,i,o).withVideoIndex(s).withPlayerState({autoplay:u,floating:c,floatPosition:_}).withAdConfig({adsEnabled:n,adUnit:f,isFirstBreak:h}).fromWindowState(),B&&Object.keys(B).length>0&&(P={},void 0!==B.plcmt&&(P.plcmt=B.plcmt),void 0!==B.minLength&&(P.minDuration=B.minLength),void 0!==B.maxLength&&(P.maxDuration=B.maxLength),Object.keys(P).length>0&&k.withVideoAdParams(P),void 0!==B.isBackfillMode&&k.withBackfillMode(B.isBackfillMode)),S=k.build(),e.next=7,this.requestBreaksWithJsonPost(S,r,i,s,y,_);case 7:return O=e.sent,C=i&&i.toLowerCase().includes("outstream"),y||C||(this.lastInstreamBreakRequestConfig=t,"undefined"!=typeof window&&!0===window.__rewardedPreroll&&(this.rewardedBreaksPromise=this.requestRewardedBreaks(t))),e.abrupt("return",O);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"requestRewardedBreaks",value:(i=y(g().mark((function e(t){var r,i,n,o,a,s,d,u,l,c,p,f,v,h,m,y,b,_,w,B,k,P,S,O,C,x;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.playerId,i=t.videoId,n=t.videoPositionId,o=t.videoIndex,a=void 0===o?0:o,s=t.isAutoPlay,d=void 0!==s&&s,u=t.isFloating,l=void 0!==u&&u,c=t.floatPosition,p=void 0===c?null:c,f=t.adUnit,v=void 0===f?null:f,h=t.isFirstBreak,m=void 0!==h&&h,y=t.adsEnabled,b=t.paramConfig,_=void 0===b?{}:b,w=Jo(r,i,n).withVideoIndex(a).withPlayerState({autoplay:d,floating:l,floatPosition:p}).withAdConfig({adsEnabled:y,adUnit:v,isFirstBreak:m}).fromWindowState().withRewardedPreroll(!0),_&&Object.keys(_).length>0&&(B={},void 0!==_.plcmt&&(B.plcmt=_.plcmt),void 0!==_.minLength&&(B.minDuration=_.minLength),void 0!==_.maxLength&&(B.maxDuration=_.maxLength),Object.keys(B).length>0&&w.withVideoAdParams(B),void 0!==_.isBackfillMode&&w.withBackfillMode(_.isBackfillMode)),k=w.build(),P=this.getEzVastsBaseURL(),S=new URL("/ez-vasts",P),e.next=9,fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}).catch((function(e){O=e}));case 9:if(C=e.sent,!O){e.next=13;break}return console.error("[Rewarded Preroll] Error fetching rewarded breaks:",O),e.abrupt("return");case 13:return e.next=15,C.json();case 15:if((x=e.sent)&&0!==x.length){e.next=19;break}return Er("[Rewarded Preroll] No rewarded breaks received"),e.abrupt("return");case 19:this.processRewardedAdBreakData(x,p),Er("[Rewarded Preroll] Rewarded breaks loaded: "+Object.keys(this.rewardedBreaks).length),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.error("[Rewarded Preroll] Error requesting rewarded breaks:",e.t0);case 26:case"end":return e.stop()}}),e,this,[[0,23]])}))),function(e){return i.apply(this,arguments)})},{key:"getEzVastsBaseURL",value:function(){return window._ez_sa||window._ez_send_requests_through_ezoic||window.hasOwnProperty("ezIntType")&&"wp"===window.ezIntType?"https://g.ezoic.net":window.location.origin}},{key:"requestBreaksWithJsonPost",value:(r=y(g().mark((function e(t,r,i,n,o,a){var s,d,u,l,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.getEzVastsBaseURL(),d=new URL("/ez-vasts",s),e.next=4,fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch((function(e){u=e}));case 4:if(l=e.sent,!u){e.next=8;break}return console.error("Error:",u),e.abrupt("return",[]);case 8:return e.next=10,l.json();case 10:if((c=e.sent)&&0!==c.length){e.next=14;break}return console.error("No breaks receieved. Not bidding."),e.abrupt("return",[]);case 14:if(this.processAdBreakData(c,o,a),!o){e.next=17;break}return e.abrupt("return",this.getFloatingBreaks(r,i,n));case 17:return e.abrupt("return",this.getBreaks(r,i,n));case 18:case"end":return e.stop()}}),e,this)}))),function(e,t,i,n,o,a){return r.apply(this,arguments)})},{key:"biddingComplete",value:function(e){this.biddingInProcess[e]=!1}},{key:"getBiddingInProcess",value:function(e){return this.biddingInProcess[e]||!1}},{key:"recordBidders",value:function(e){var t=this;e.forEach((function(e){var r;t.bidders.hasOwnProperty(e.bidder)||(t.bidders[e.bidder]={bidsResponded:0,bidsWon:0,maxBidValue:-1}),t.bidders[e.bidder].bidsResponded++,t.bidders[e.bidder].maxBidValue<e.cpm&&(t.bidders[e.bidder].maxBidValue=e.cpm),t.recordBidInHistory(e.bidder,e.cpm,null!==(r=e.appliedFloor)&&void 0!==r?r:null,!1)}))}},{key:"recordWinForBidder",value:function(e,t){this.adsShown++,this.bidders.hasOwnProperty(e)||(this.bidders[e]={bidsResponded:1,bidsWon:0,maxBidValue:-1}),this.bidders[e].bidsWon++,this.bidders[e].maxBidValue<t&&(this.bidders[e].maxBidValue=t),this.recordBidInHistory(e,t,null,!0)}},{key:"shouldConsiderCustomBreaksOutstreamCollision",value:function(e){var t,r;if(!e.isOutstream&&e.isAdBreakCustomPosition()&&0===e.timeOffsetSeconds)return null===(r=ezVideoAdConductor)||void 0===r||null===(r=r.getVideoAdConductor())||void 0===r||null===(r=r.getOutstreamPlayer())||void 0===r?void 0:r.isAdInProgress();var i=null===(t=window.__ez)||void 0===t||null===(t=t.nextCustomBreak)||void 0===t?void 0:t.break;if(!i)return!1;if(i.isTriggered||i.isComplete||i.IsSkipped)return!1;if(!i.getIsPlayerCurrentlyFloating()&&e.isOutstream){var n=this.getTimeUntilNextBreak(e.getPlayerId(),i);if(n<=-1&&(n=window.__ez.nextCustomBreak.timeUntilBreak||0),n<=15)return!0;if(n<=30&&e.prebidParams&&e.prebidParams.maxduration>=16)return!0}return!1}},{key:"handleCustomBreaksOutstreamCollision",value:(e=y(g().mark((function e(t,r){var i,n,o,a,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isOutstream||!t.isAdBreakCustomPosition()||0!==t.timeOffsetSeconds){e.next=7;break}return Er("Skipping custom break preroll since outstream is currently playing"),t.isTriggered=!0,t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),this.biddingComplete(t.getPlayerId()),e.abrupt("return");case 7:i=window.__ez.nextCustomBreak,n=i.break,o=0;try{a=n.getPlayerId(),(o=this.getTimeUntilNextBreak(a,n))<=-1&&null!=i.timeUntilBreak&&(o=i.timeUntilBreak)}catch(e){o=null!==(s=i.timeUntilBreak)&&void 0!==s?s:0}if(!(o<=15)){e.next=16;break}return Er("Waiting for custom break to finish before bidding",t.impressionId),e.next=15,new Promise((function(e){return setTimeout(e,1e3*o)}));case 15:this.bid(t,r);case 16:o<=30&&t.isOutstream&&t.prebidParams&&t.prebidParams.maxduration>=16&&(Er("Updating maxduration to 15 seconds for outstream break",t.impressionId),t.prebidParams.maxduration=15,this.bid(t,r));case 17:case"end":return e.stop()}}),e,this)}))),function(t,r){return e.apply(this,arguments)})},{key:"getTimeUntilNextBreak",value:function(e,t){var r=-1;if(e){var i=qr(e);if(i&&"function"==typeof i.getCurrentVideoTime){var n=i.getCurrentVideoTime();null!=t.timeOffsetSeconds&&null!=n&&(r=t.timeOffsetSeconds-n)}}return r}},{key:"recordBidInHistory",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.globalBidHistory[e]||(this.globalBidHistory[e]={bids:[],avgBid:0,maxBid:0,winCount:0,totalBids:0,avgFloor:0,avgPremium:0,totalFloors:0});var n=this.globalBidHistory[e];if(n.bids.push({cpm:t,floor:r,timestamp:Date.now(),wasWinner:i}),n.totalBids++,n.avgBid=(n.avgBid*(n.totalBids-1)+t)/n.totalBids,n.maxBid=Math.max(n.maxBid,t),i&&n.winCount++,"number"==typeof r){n.totalFloors++,n.avgFloor=(n.avgFloor*(n.totalFloors-1)+r)/n.totalFloors;var o=t-r;n.avgPremium=(n.avgPremium*(n.totalFloors-1)+o)/n.totalFloors}n.bids.length>100&&n.bids.shift()}},{key:"getBidderPerformance",value:function(){var e=0,t=0,r=0;return Object.values(this.globalBidHistory).forEach((function(i){i.bids.forEach((function(i){e++,i.wasWinner&&t++,r+=i.cpm}))})),{winRate:e>0?t/e:0,avgBid:e>0?r/e:0}}},{key:"initializeBidFilter",value:function(){epbjs.que.push((function(){var e=Ui.initVideoBidFilter();void 0===window.__ez&&(window.__ez={}),void 0===window.__ez.vbf&&(window.__ez.vbf={}),window.__ez.vbf=e,Er("Video bid filter initialized to prevent low CPM bids from being cached externally")}))}},{key:"initializeVideoBidTracking",value:function(){epbjs.que.push((function(){!function(){var e=window.epbjs;if(e&&e.onEvent){var t=new Set;e.onEvent("auctionEnd",(function(e){var r,i,n;if(e&&!t.has(e.auctionId)&&(t.add(e.auctionId),(null==e||null===(r=e.bidsReceived)||void 0===r?void 0:r.some((function(e){var t;return"video"===e.mediaType||(null===(t=e.mediaTypes)||void 0===t?void 0:t.video)})))||(null==e||null===(i=e.bidderRequests)||void 0===i?void 0:i.some((function(e){var t;return null===(t=e.bids)||void 0===t?void 0:t.some((function(e){var t;return null===(t=e.mediaTypes)||void 0===t?void 0:t.video}))}))))){var o=Object.create(null);(e.bidsReceived||[]).forEach((function(e){o[e.requestId]=e}));var a=[];(e.bidderRequests||[]).forEach((function(e){(e.bids||[]).forEach((function(e){var t=o[e.bidId];if(t&&null!=t.cpm){var r=function(e){if(e&&e.params){var t;if("s2s"===e.src){var r,i=null===(r=e.ortb2Imp)||void 0===r||null===(r=r.ext)||void 0===r||null===(r=r.prebid)||void 0===r?void 0:r.floors;if(i)return"number"==typeof i.floor&&(t=i.floor),"number"==typeof i.floormin&&(t=i.floormin),t}for(var n=0,o=["floor","bidFloor","bidfloor","reserve","floorPrice","floorprice","customFloor","kadfloor"];n<o.length;n++){var a,s=o[n];if(null!==(a=e.params)&&void 0!==a&&a.hasOwnProperty(s)){t=e.params[s];break}}if("string"==typeof t&&(t=parseFloat(t)),"number"==typeof t&&!isNaN(t))return t;if("function"==typeof e.getFloor){var d=e.getFloor();if(d&&d.floor)return d.floor}}}(e);t.appliedFloor=r,t.premium="number"==typeof r&&r>0?t.cpm-r:null,a.push(t)}}))})),a.length&&null!==(n=window.__ez)&&void 0!==n&&null!==(n=n.vhb)&&void 0!==n&&n.recordBidders&&window.__ez.vhb.recordBidders(a)}}))}}()}))}}]);var e,r,i,n,a,s,d,u,l}();function ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ea(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ra(){return ra=y(g().mark((function e(){var t,r,i,n,o,a,s,d,u=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},e.prev=1,t.plcmt){e.next=4;break}throw new Error("plcmt (placement type) is required. Use 1 for true instream, 2 for accompanying content, or 4 for standalone outstream.");case 4:if([1,2,4].includes(t.plcmt)){e.next=7;break}throw new Error("Invalid plcmt value: ".concat(t.plcmt,". Must be 1, 2, or 4."));case 7:if(r=4===t.plcmt,Er("[runEzoicVideoAuction] Starting auction with config:",i=ta({videoLanguage:"en",isOutstream:r,playerId:r?"ez-o":"ez-i"},t)),window.__ez&&window.__ez.vhb){e.next=13;break}throw new Error("VideoBidder not initialized. Please ensure video header bidding is loaded.");case 13:if(window.__ez.dot){e.next=15;break}throw new Error("Ezoic dot utilities not available. Please ensure Ezoic tracking is loaded.");case 15:return n=window.__ez.vhb,e.next=18,ia(n,i);case 18:if(o=e.sent){e.next=21;break}throw new Error("No suitable AdBreak found or could be created for auction");case 21:return Er("[runEzoicVideoAuction] Using AdBreak:",o.key),aa(o,i),o.isBackfillMode=!0,e.next=26,n.bidWithoutRender(o,r,!1);case 26:return Er("[runEzoicVideoAuction] Auction completed for AdBreak:",(a=e.sent).key),e.next=30,sa(a,i);case 30:return s=e.sent,Er("[runEzoicVideoAuction] Auction result:",d=ua(a,s,i)),e.abrupt("return",d);case 36:throw e.prev=36,e.t0=e.catch(1),console.error("[runEzoicVideoAuction] Error running auction:",e.t0),e.t0;case 40:case"end":return e.stop()}}),e,null,[[1,36]])}))),ra.apply(this,arguments)}function ia(e,t){return na.apply(this,arguments)}function na(){return(na=y(g().mark((function e(t,r){var i,n,o,a,s,d,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.adBreakKey){e.next=5;break}if(!(i=t.breaks[r.adBreakKey]||t.floatingBreaks[r.adBreakKey])){e.next=4;break}return e.abrupt("return",i);case 4:Er("[runEzoicVideoAuction] Specified adBreakKey not found:",r.adBreakKey);case 5:if(n=[].concat(Or(Object.values(t.breaks)),Or(Object.values(t.floatingBreaks))),o=n.filter((function(e){return e.getPlayerId()===r.playerId&&!!e.isOutstream==!!r.isOutstream&&!e.isComplete})),!r.isOutstream&&r.adPosition&&(o=o.filter((function(e){return oa(e.timeOffset,r.adPosition)}))),!(o.length>0)){e.next=10;break}return e.abrupt("return",o[0]);case 10:return Er("[runEzoicVideoAuction] No existing breaks found, requesting new breaks"),a=r.isOutstream?"outstream-default":"3rdpartyvideo",e.next=14,t.requestBreaksV2({playerId:r.playerId,videoId:a,adsEnabled:1,videoPositionId:1,videoIndex:0,isAutoPlay:r.isAutoplay||!0,isFloating:r.isOutstream,adUnit:null,isFirstBreak:!0,isFloatingAdBreaks:r.isOutstream,floatPosition:null,paramConfig:{plcmt:r.plcmt,minLength:r.minLength||null,maxLength:r.maxLength||null,isBackfillMode:!0}});case 14:if(!((s=e.sent)&&s.length>0)){e.next=21;break}return d=s[0],!r.isOutstream&&r.adPosition&&(u=s.filter((function(e){return oa(e.timeOffset,r.adPosition)})),u.length>0?d="midroll"===r.adPosition.toLowerCase()?u.reduce((function(e,t){var r="number"==typeof e.timeOffsetSeconds?e.timeOffsetSeconds:1/0;return("number"==typeof t.timeOffsetSeconds?t.timeOffsetSeconds:1/0)<r?t:e})):u[0]:(Er("[runEzoicVideoAuction] Warning: No breaks match requested adPosition:",r.adPosition),d=s[0])),d.prebidParams?d.prebidParams.plcmt=r.plcmt:d.prebidParams={plcmt:r.plcmt},Er("[runEzoicVideoAuction] Created new AdBreak with key:",d.key),e.abrupt("return",d);case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oa(e,t){if(!t)return!0;switch(t.toLowerCase()){case"preroll":return"start"===e||0===e;case"postroll":return"end"===e;case"midroll":return"start"!==e&&"end"!==e;default:return!0}}function aa(e,t){t.prebidParams&&(e.prebidParams=ta(ta({},e.prebidParams),t.prebidParams)),e.prebidParams||(e.prebidParams={}),e.prebidParams.plcmt=t.plcmt,t.minLength&&e.prebidParams&&(e.prebidParams.minduration=t.minLength),t.maxLength&&e.prebidParams&&(e.prebidParams.maxduration=t.maxLength),t.videoLanguage&&"en"!==t.videoLanguage&&(e.params||(e.params={}),e.params.videoLanguage=t.videoLanguage),t.videoTitle&&(e.params||(e.params={}),e.params.videoTitle=t.videoTitle),t.adPosition&&(e.params||(e.params={}),e.params.adPosition=t.adPosition),e.isMultiformatEnabled=!1}function sa(e){return da.apply(this,arguments)}function da(){return(da=y(g().mark((function e(t){var r,i,n,o,a,s,d,u,l,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getHighestBidWithSource(),i=null,n=0,o=null,a=null,r&&r.cpm>0&&(n=r.cpm,"prebid"===r.source?(s=r.bid)&&(i=s.bidder,a=s.ezVideoCacheKey||s.videoCacheKey||s.adId,u=t.handleWinningAdIdOrHbUUId(a),o=null!==(d=null==u?void 0:u.statSourceId)&&void 0!==d?d:t.statSourceId):"aps"===r.source&&(i="amzn",a="aps",c=t.handleWinningAdIdOrHbUUId(a),o=null!==(l=null==c?void 0:c.statSourceId)&&void 0!==l?l:t.isOutstream?11337:11324)),t.isComplete=!0,t.isTriggered=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),e.abrupt("return",{winningBidder:i,winningCpm:n,statSourceId:o,adId:a,source:(null==r?void 0:r.source)||null,hasWinningBid:n>0,bid:(null==r?void 0:r.bid)||null});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(e,t,r){var i,n=__ez.dot.getEpoch(0),o=__ez.dot.getDID(),a=la();if(!t.hasWinningBid&&e.isOutstream)return{encodedQueryParams:"",ezoicVastUrl:"",meta:{adBreakKey:e.key}};var s=e.vastURL;if(e.isOutstream){var d=t.bid;if(t.hasWinningBid&&"prebid"===t.source&&d){var u=d.ezVideoCacheKey||d.videoCacheKey||d.adId;u&&(s="".concat(c(),"?uuid=").concat(u))}else t.hasWinningBid&&"aps"===t.source&&d&&d.amzniid&&d.amznbid&&(s="https://aax.amazon-adsystem.com/e/dtb/vast?b="+d.amzniid+"&rnd="+Math.random().toString(36).substring(2,15)+"&pp="+d.amznbid)}var l={adId:t.adId||"no-fill",vastUrl:s,iid:(null===(i=e.impressionId)||void 0===i?void 0:i.toString())||"",unit:e.adUnit||"",did:o,vid:a,tepoch:n.toString()};t.statSourceId&&(l.ssid=t.statSourceId.toString()),t.winningCpm&&t.winningCpm>0&&(l.cpm=t.winningCpm.toString()),t.winningBidder&&(l.bidder=t.winningBidder),e.videoAdBidFloor&&e.videoAdBidFloor>0&&(l.bf=e.videoAdBidFloor.toString()),r.isOutstream&&(l.os="1"),void 0!==e.timeOffset&&null!==e.timeOffset?l.ad_position=e.timeOffset:l.ad_position="start",r.isOutstream||(l.video_impression_id=la());var p=__ez.dot.getPageviewId();p&&(l.pvid=p),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("visit_uuid")&&(l.visit_uuid=_ezaq.visit_uuid),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")&&(l.ab_test_id=_ezaq.ab_test_id),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("template_id")&&(l.template_id=_ezaq.template_id),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("url")?l.url=_ezaq.url:l.url=window.location.href;var f=void 0;e.isOutstream&&"undefined"!=typeof __ezOutstream&&void 0!==__ezOutstream.AdIndex?f=__ezOutstream.AdIndex:e.isOutstream||"undefined"==typeof __ezInstream||void 0===__ezInstream.AdIndex||(f=__ezInstream.AdIndex),void 0!==f&&(l.ad_index=f.toString()),void 0!==e.didS2SBidderWin&&(l.is_winner_s2s=e.didS2SBidderWin?"1":"0"),e.bidders&&Array.isArray(e.bidders)&&e.bidders.length>0?l.bidders="["+e.bidders.join(",")+"]":l.bidders="[]",e.receivedBidders&&Array.isArray(e.receivedBidders)&&e.receivedBidders.length>0?l.received_bidders="["+e.receivedBidders.join(",")+"]":l.received_bidders="[]",e.prebidParams&&void 0!==e.prebidParams.minduration&&(l.min_ad_length=e.prebidParams.minduration.toString()),e.prebidParams&&void 0!==e.prebidParams.maxduration&&(l.max_ad_length=e.prebidParams.maxduration.toString()),void 0!==e.prebidNumBidsInCache&&(l.num_bids_in_client_cache=e.prebidNumBidsInCache.toString());var v,h,m,y,b,g,_,w=(v=JSON.stringify(l),h=btoa(v),m=h.match(/=+$/),y=m?m[0].length:0,b=(h.match(/\+/g)||[]).length,g=(h.match(/\//g)||[]).length,_=h.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),ca&&(y||b||g)&&console.log("[runEzoicVideoAuction] base64url sanitized",{removedPaddingLen:y,plusCount:b,slashCount:g,beforeLen:h.length,afterLen:_.length}),_),B="https://vastproxy.ezoic.net/vastenhanced?ezoic_vast_data=".concat(w);return{encodedQueryParams:encodeURIComponent("&ezoic_vast_data=".concat(w,"&ez_vast_bf=1")),ezoicVastUrl:B,meta:{adBreakKey:e.key}}}function la(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}"undefined"!=typeof window&&(window.__ez||(window.__ez={}),window.__ez.runEzoicVideoAuction=function(){return ra.apply(this,arguments)});var ca=function(){try{if("undefined"!=typeof window&&window.location&&window.location.search)return"1"===new URLSearchParams(window.location.search).get("ez_vast_bf_debug")}catch(e){}return!1}();const pa=function(){return o((function e(){t(this,e)}),[{key:"init",value:function(){var e;window.__ez=window.__ez||{},(e=window.__ez).vhb||(e.vhb=new Xo),po("ot_vhb_init"),document.dispatchEvent(new CustomEvent("ezoicVideoBidderReady"))}}])}();var fa=new Sr,va=new pa;fa.init(),va.init()})()})();